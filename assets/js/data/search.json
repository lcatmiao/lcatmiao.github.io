[
  
  {
    "title": "ç”¨æˆ·æ€æºç åæ±‡ç¼–å®šä½æ–¹æ³•è®°å½•",
    "url": "/posts/%E7%94%A8%E6%88%B7%E6%80%81%E6%BA%90%E7%A0%81%E5%8F%8D%E6%B1%87%E7%BC%96%E5%AE%9A%E4%BD%8D%E6%96%B9%E6%B3%95%E8%AE%B0%E5%BD%95/",
    "categories": "Tech, C",
    "tags": "gdb",
    "date": "2025-05-24 21:55:00 +0800",
    





    "snippet": "å‰è¨€é—®é¢˜èƒŒæ™¯å°±æ˜¯è¿›ç¨‹å´©æºƒï¼Œäº§ç”Ÿäº† core æ–‡ä»¶ã€‚å…¶å®è¿™æ¬¡å®šä½éå¸¸ç®€å•ï¼Œbt, disassemble å°±èƒ½ç›´æ¥çœ‹å‡ºæ¥äº†ã€‚æ—¢ç„¶ç®€å•ï¼Œå°±åˆ©ç”¨è¿™æ¬¡æœºä¼šå°è¯•äº†ä¸€ä¸‹æºç åæ±‡ç¼–çš„å®šä½æ–¹æ³•ã€‚æ­¤å‰åœ¨åˆ«äººçš„å¸®åŠ©ä¸‹ï¼Œè¿ç”¨è¯¥æ–¹æ³•å®šä½è¿‡å†…æ ¸æ€çš„é—®é¢˜ï¼Œä½†éƒ½äº‹å‘ç´§æ€¥ï¼Œäº‹åæ²¡èƒ½å¤ç›˜ï¼Œç•™ä¸‹äº†é—æ†¾ã€‚å°½ç®¡å­˜åœ¨å·®å¼‚ï¼Œè¿˜æ˜¯å†³å®šåœ¨ç”¨æˆ·æ€â€œæ¨¡æ‹Ÿâ€ä¸€ä¸‹ã€‚å®šä½è¿‡ç¨‹Program terminated with signal SIGSEGV, Segmentation fault.#0  0x00007fcff9ad157a in check ()   from ....so(gdb) bt#0  0x00007fcff9ad157a in check ()   from ....so#1  0x00007fcff9ad27c1 in func ()   from ....so#2  0x00007fcff9ad3483 in func ()   from ....so#3  0x00007fcff9ad6696 in func ()   from ....so#4  0x00007fcff9ad9a40 in func ()   from ....so#5  0x00007fd018fa50d6 in func () from ....so#6  0x000000000041dbe9 in func ()#7  0x00000000004178bd in func ()#8  0x00007fd018fc39fd in func () from ....so#9  0x000000000040b56c in main ()æ­»åœ¨ check() ä¸­ã€‚(gdb) disassemble checkDump of assembler code for function check:   0x00007fcff9ad1408 &amp;lt;+0&amp;gt;:     push   %r15   0x00007fcff9ad140a &amp;lt;+2&amp;gt;:     push   %r14   0x00007fcff9ad140c &amp;lt;+4&amp;gt;:     mov    %rdi,%r14...   0x00007fcff9ad156c &amp;lt;+356&amp;gt;:   mov    0x48(%r14),%rax   0x00007fcff9ad1570 &amp;lt;+360&amp;gt;:   or     $0xffffffffffffffff,%rcx   0x00007fcff9ad1574 &amp;lt;+364&amp;gt;:   mov    (%rax,%rbp,1),%rdi   0x00007fcff9ad1578 &amp;lt;+368&amp;gt;:   xor    %eax,%eax=&amp;gt; 0x00007fcff9ad157a &amp;lt;+370&amp;gt;:   repnz scas %es:(%rdi),%al   0x00007fcff9ad157c &amp;lt;+372&amp;gt;:   mov    %rcx,%rax   0x00007fcff9ad157f &amp;lt;+375&amp;gt;:   not    %rax   0x00007fcff9ad1582 &amp;lt;+378&amp;gt;:   dec    %rax   0x00007fcff9ad1585 &amp;lt;+381&amp;gt;:   cmp    $0x200,%rax...æ‰¾åˆ°å´©æºƒæŒ‡ä»¤çš„åç§»é‡ä¸º +370ï¼Œå…¶åå…­è¿›åˆ¶ä¸º 172ã€‚æ¥ä¸‹æ¥å‡†å¤‡ç¼–è¯‘æºç ã€‚ç¼–è¯‘å‰å‡†å¤‡ï¼š  æºç ç‰ˆæœ¬é¡»ä¸é—®é¢˜ç‰ˆæœ¬ä¸€è‡´  ç»™æºç ç¼–è¯‘åŠ ä¸Š -g å‚æ•°ï¼Œå»æ‰ STRIPï¼Œé™¤æ­¤ä»¥å¤–çš„ç¼–è¯‘å‚æ•°éƒ½ä¸å˜ï¼ˆä¸ç¼–è¯‘é—®é¢˜ç‰ˆæœ¬æ—¶çš„å‚æ•°ä¿æŒä¸€è‡´ï¼‰å°†é—®é¢˜ä»£ç æ‰€åœ¨çš„æ–‡ä»¶ç¼–è¯‘å‡ºæ¥ï¼Œå¾—åˆ°å¯¹åº”çš„ soã€‚éšåï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­åæ±‡ç¼–ï¼š# -S  Intermix source code with disassembly# -l  Include line numbers and filenames in outputobjdump check.so -S -l &amp;gt; check.c.asmåœ¨ check.c.asm ä¸­ç›´æ¥æ‰¾åˆ° check å‡½æ•°ã€‚å…¶ç¬¬ä¸€æ¡æŒ‡ä»¤çš„é¦–åœ°å€ä¸º 2653aã€‚æˆ‘ä»¬å°†ä¹‹åŠ ä¸Šå…ˆå‰åœ¨è°ƒè¯•ç¯å¢ƒä¸­å¾—åˆ°çš„å´©æºƒæŒ‡ä»¤çš„åç§»é‡ï¼š 2653a + 172 = 266acï¼Œå°±å¾—åˆ°äº†å¼€å‘ç¯å¢ƒä¸­å´©æºƒæŒ‡ä»¤çš„åç§»é‡ã€‚   2653a:    ....../.../check.c:3498        return ERR_MAX_CFG;    }    for (i = 0 ;i &amp;lt; obj-&amp;gt;sizeList; i++)    {        snprintf(err_str, NAME_LEN,&quot;list[%d].host&quot;, i);   26699:    e8 42 3b ff ff           callq  1a1e0 &amp;lt;snprintf@plt&amp;gt;/.../check.c:3499        if (strlen(obj-&amp;gt;list[i].host) &amp;gt; 512)   2669e:    49 8b 46 48              mov    0x48(%r14),%rax   266a2:    48 83 c9 ff              or     $0xffffffffffffffff,%rcx   266a6:    48 8b 3c 28              mov    (%rax,%rbp,1),%rdi   266aa:    31 c0                    xor    %eax,%eax   266ac:    f2 ae                    repnz scas %es:(%rdi),%al   266ae:    48 89 c8                 mov    %rcx,%rax   266b1:    48 f7 d0                 not    %rax   266b4:    48 ff c8                 dec    %rax   266b7:    48 3d 00 02 00 00        cmp    $0x200,%raxå¯ä»¥çœ‹åˆ° 266ac çš„å´©æºƒæŒ‡ä»¤ repnz scas %es:(%rdi),%al ä¸è°ƒè¯•ç¯å¢ƒä¸­çš„å´©æºƒæŒ‡ä»¤æ˜¯ä¸€è‡´çš„ã€‚éšå³è§‚å¯Ÿé™„è¿‘çš„æºç ï¼Œå°±çŸ¥é“é—®é¢˜æ‰€åœ¨äº†ã€‚1000% æ˜¯ strlen() çš„é—®é¢˜ï¼Œå¤šåŠæ˜¯ host ä¸º NULL äº†ã€‚å®æµ‹ä¸€ç•ªï¼Œæœä¸å…¶ç„¶ï¼Œç›´æ¥å¤ç°ã€‚æ³¨æ„äº‹é¡¹åœ¨å¼€å‘ç¯å¢ƒä¸­é‡æ–°ç¼–è¯‘ç›¸å…³æºç æ—¶ï¼Œéœ€ä¿è¯ä»£ç ç‰ˆæœ¬ã€ç¼–è¯‘å‚æ•°ï¼ˆé™¤ -g, STRIP å¤–ï¼‰ä¸é—®é¢˜ç‰ˆæœ¬ä¸€è‡´ï¼Œå¦åˆ™åæ±‡ç¼–ç»“æœå°†ä¸é—®é¢˜ç‰ˆæœ¬æ‰€åœ¨ç¯å¢ƒçš„åæ±‡ç¼–ç»“æœä¸ä¸€è‡´ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­å°±æ— æ³•ç²¾å‡†åœ°æ‰¾åˆ°åŒæ ·çš„å´©æºƒæŒ‡ä»¤äº†ï¼ŒäºŒè€…æ±‡ç¼–éƒ½å¯¹ä¸ä¸Šï¼Œä¹Ÿå°±æ— æ³•å®šä½äº†ã€‚"
  },
  
  {
    "title": "gdbæ— -gè°ƒè¯•å®æˆ˜è®°å½•",
    "url": "/posts/gdb%E6%97%A0-g%E8%B0%83%E8%AF%95%E5%AE%9E%E6%88%98%E8%AE%B0%E5%BD%95/",
    "categories": "Tech, C",
    "tags": "gdb",
    "date": "2025-04-24 22:00:00 +0800",
    





    "snippet": "é—®é¢˜èƒŒæ™¯è®¾å¤‡å¤–å‘æ—¥å¿—çš„å†…å®¹é”™ä¹±ï¼Œç”šè‡³äº§ç”Ÿ core æ–‡ä»¶ã€‚ç‰ˆæœ¬æ˜¯æ­£å¸¸ç¼–è¯‘çš„å‘è¡Œç‰ˆæœ¬ï¼Œæ²¡æœ‰é™„å¸¦ -g åŠ å…¥çš„è°ƒè¯•ä¿¡æ¯ã€‚æˆ‘æ‡’å¾—åŠ è°ƒè¯•ä¿¡æ¯ä¹Ÿä¸æƒ³åŠ  -g é‡æ–°ç¼–è¯‘ï¼ŒäºŒè€…åœ¨æœ¬äººçš„å¼€å‘ç¯å¢ƒä¸­éƒ½ååˆ†éº»çƒ¦ã€‚è¿™ç§æ—  -g è°ƒè¯•çš„åœºæ™¯å…¶å®è¿˜è›®å¸¸è§çš„ï¼Œè¿™æ¬¡å®šä½æ¯”è¾ƒé¡ºåˆ©ï¼Œæ•…è®°å½•ä¹‹ã€‚å®šä½è¿‡ç¨‹ä»ç°è±¡ä¸Šçœ‹æ˜¯æ—¥å¿—å†…å®¹é”™ä½äº†ï¼Œä½†ä¹Ÿä¸èƒ½æ’é™¤æ˜¯è¸©å†…å­˜ï¼Œå‡ºç•Œå†…å®¹è¢«ç›´æ¥è§£æä¹Ÿèƒ½å‡ºç°ç±»ä¼¼çš„ç°è±¡ã€‚é€šè¿‡çœ‹ä»£ç ï¼Œæˆ‘é«˜åº¦æ€€ç–‘æ—¥å¿—ç»“æ„ä½“åœ¨ä¼ å‚è¿›å…¥å‡½æ•° output_syslog(log_s *in_buffer) çš„æ—¶å€™å°±å·²ç»æœ‰é—®é¢˜äº†ã€‚æ²¡æœ‰ -g çš„è¯ï¼Œå°±åªèƒ½è¿›è¡Œæœ‰é™çš„è°ƒè¯•ï¼Œé€šè¿‡è·Ÿè¸ªåœ°å€ã€å¼ºçœ‹æ±‡ç¼–æ¥å®šä½ã€‚gdb ç»™æ€€ç–‘çš„å‡½æ•° output_syslog() æ‰“æ–­ç‚¹ï¼Œå‘½ä¸­åï¼Œå¯„å­˜å™¨ä¿¡æ¯å¦‚ä¸‹ï¼š(gdb) b output_syslog Breakpoint 1 at 0x43ed38(gdb) cContinuing.Breakpoint 1, 0x000000000043ed38 in output_syslog ()(gdb) i rx0             0x7f91acf008     547904876552x1             0x0      0x2             0x7ffa1eecd0     549657177296x3             0x7ffa1f0210     549657182736x4             0x2000   8192...è®¾å¤‡æ˜¯ arm æ¶æ„ï¼Œä¸Šé¢çš„å¯„å­˜å™¨åç§°ä¹Ÿæ˜¯ä¸€çœ¼ armã€‚æˆ‘ä»¬ç°åœ¨åˆšè¿›å…¥å‡½æ•° output_syslogï¼Œè¿˜æ²¡æœ‰åšä»»ä½•å…¶å®ƒæ“ä½œï¼Œæ‰€ä»¥ x0 å°±æ˜¯å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚0x7f91acf008 å°±æ˜¯ in_buffer çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ç»“æ„ä½“ log_s çš„é¦–åœ°å€ã€‚è¿™ä¸ªç»“æ„ä½“è¿˜æŒºå¤§çš„ï¼Œå¤§æ¦‚é•¿ä¸‹é¢è¿™æ ·ï¼štypedef struct {    u8      member;    u8      member;        u8      member;    u8      member;    u8      member;    u8      member;    u8      member;    u8      member;    u8      member[MAX_LEN];    u8      member[MAX_LEN];    u16     member;    u16     member;    u16     member;    u16     member;    u16     member;    u16     member;    u16     member;    u16     member[COUNT];    union {        in_addrv4_s in_addrv4;        in_addrv6_s in_addrv6;    } adrv;    u32     ip_version;    u32     member;    u32     member;    u32     member;    u32     member;    u32     member;    u32     member;    u32     member;    u32     focus_on_this_id;    u32     member;    u32     member;    u32     member;    s8      host[MAX_LEN];    s8      url[MAX_LEN];    ...} log_s;æˆ‘ç›´æ¥ä»é¦–åœ°å€å¼€å§‹ä»¥å­—ç¬¦çš„å½¢å¼æ‰“å°äº† 2000 ä¸ªå­—èŠ‚ï¼Œå¦‚ä¸‹ï¼š(gdb) x/2000bc 0x7f91acf008  0x7f91acf008:   6 &#39;\\006&#39;        1 &#39;\\001&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        2 &#39;\\002&#39;        1 &#39;\\001&#39;   0 &#39;\\000&#39; 2 &#39;\\002&#39;0x7f91acf010:   97 &#39;a&#39;  116 &#39;t&#39; 116 &#39;t&#39; 97 &#39;a&#39;  99 &#39;c&#39;  107 &#39;k&#39; 95 &#39;_&#39;  98 &#39;b&#39;0x7f91acf018:   108 &#39;l&#39; 111 &#39;o&#39; 99 &#39;c&#39;  107 &#39;k&#39; 0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;0x7f91acf020:   0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;   0 &#39;\\000&#39; 0 &#39;\\000&#39;...è§‚å¯Ÿå‘ç°ï¼Œå‰ 8 ä¸ª u8 çš„å€¼éƒ½æ˜¯å¯¹çš„ï¼Œæ²¡å•¥é—®é¢˜ï¼Œè¯´æ˜åˆ°è¿™é‡Œæ•°æ®éƒ½è¿˜æ˜¯å¯¹çš„ï¼Œæ²¡æœ‰å‘ç”Ÿé”™è¯¯åç§»çš„è¿¹è±¡ã€‚éš¾é“è¯´æ˜¯åé¢çš„æ•°æ®å‘ç”Ÿäº†åç§»ï¼Œäº¦æˆ–æ˜¯åé¢çš„æ•°æ®è¶Šç•Œè¸©å†…å­˜äº†å—ï¼Ÿç»§ç»­å¾€åçœ‹ã€‚ç”±äºç»“æ„ä½“ä¸­æœ‰å¾ˆå¤šæˆå‘˜ï¼Œä¸”æ•°ç»„æˆå‘˜è¿˜æ¯”è¾ƒå¤§ï¼ŒæŒ‰é¡ºåºä¸€ä¸ªä¸ªæ‰¾æˆå‘˜çš„è¯ï¼Œå®åœ¨éº»çƒ¦ï¼Œå†µä¸”ç”±äºå¯¹é½ï¼Œç»“æ„ä½“æˆå‘˜å†…å­˜åˆ†å¸ƒè¿˜ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥ä»åå¾€å‰æ‰¾ã€‚æˆ‘æŒ‘é€‰äº†ä¸€ä¸ªéœ€è¦é‡ç‚¹å…³æ³¨çš„å˜é‡ï¼Œfocus_on_this_idï¼Œæ ¹æ®å®é™…æƒ…å†µå’Œä»£ç ï¼Œæˆ‘çŸ¥é“è¿™ä¸ªå€¼å–ä½ 16 ä½ååº”è¯¥ä¸º 10035ï¼Œä½†å®é™…å€¼å´ä¸º 16ï¼Œç°åœ¨éœ€è¦é‡ç‚¹ææ¸…è¿™ä¸ªé”™è¯¯çš„åŸå› ã€‚æ³¨æ„åˆ°è¿™ä¸€æ®µï¼š...0x7f91acf670:   0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        1 &#39;\\001&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        7 &#39;\\a&#39;0x7f91acf678:   0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        16 &#39;\\020&#39;       0 &#39;\\000&#39;        39 &#39;\\&#39;&#39; 51 &#39;3&#39;0x7f91acf680:   82 &#39;R&#39;  0 &#39;\\000&#39;        0 &#39;\\000&#39;        17 &#39;\\021&#39;       48 &#39;0&#39;  0 &#39;\\000&#39;        5 &#39;\\005&#39;        0 &#39;\\000&#39;---Type &amp;lt;return&amp;gt; to continue, or q &amp;lt;return&amp;gt; to quit---0x7f91acf688:   48 &#39;0&#39;  0 &#39;\\000&#39;        5 &#39;\\005&#39;        1 &#39;\\001&#39;        119 &#39;w&#39; 119 &#39;w&#39; 119 &#39;w&#39; 46 &#39;.&#39;0x7f91acf690:   116 &#39;t&#39; 101 &#39;e&#39; 115 &#39;s&#39; 116 &#39;t&#39; 104 &#39;h&#39; 116 &#39;t&#39; 116 &#39;t&#39; 112 &#39;p&#39;0x7f91acf698:   46 &#39;.&#39;  99 &#39;c&#39;  111 &#39;o&#39; 109 &#39;m&#39; 0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;        0 &#39;\\000&#39;...ç¬¬ 6 è¡Œå¼€å§‹çš„ www.testhttp.com ä¸€çœ¼å°±åº”è¯¥æ˜¯ host æˆå‘˜çš„å€¼ã€‚è§‚å¯Ÿç»“æ„ä½“ï¼Œfocus_on_this_id é™„è¿‘éƒ½æ˜¯ u32ï¼Œå¦‚æœç»“æ„ä½“è¦å¡«å……ï¼Œåº”è¯¥åœ¨å‰é¢çš„ adrv é™„è¿‘å°±å¡«å……å®Œäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä» focus_on_this_id åˆ° host åº”å½“éƒ½æ˜¯è¿ç»­çš„ã€‚å¤§èƒ†å‡è®¾æ•°æ®åç§»æ²¡æœ‰é”™è¯¯ï¼Œå³ www.testhttp.com å°±æ˜¯ host çš„å€¼ï¼Œé‚£ä¹ˆå¾€å‰å†æ•° 4 * 4 ä¸ªå­—èŠ‚ï¼Œå°±æ˜¯ focus_on_this_id çš„å€¼ï¼Œå¦‚ä¸‹ï¼š# from low address to high address16 &#39;\\020&#39;    0 &#39;\\000&#39;    39 &#39;\\&#39;&#39;    51 &#39;3&#39;# convert to hex\\x10    \\x00    \\x27    \\x33arm æ¶æ„æ˜¯å°ç«¯åºï¼Œæ‰€ä»¥ focus_on_this_id çš„æ•°å€¼ä¸º 0x33270010ï¼Œå–ä½ 16 ä½ï¼Œå…¶åè¿›åˆ¶æ­£å¥½ä¸º 16ï¼Œä¸å®é™…å€¼ç›¸åŒï¼Œè¿™è¯´æ˜æ•°æ®åç§»å¤§æ¦‚ç‡çœŸçš„æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬æ‰¾åˆ°çš„å€¼åº”è¯¥å°±æ˜¯å˜é‡ focus_on_this_id çš„å€¼ã€‚è¿›ä¸€æ­¥ï¼Œæ³¨æ„åˆ° 10035 çš„åå…­è¿›åˆ¶ä¸º 0x2733ï¼Œæ­¤åˆ»å·²ç»å¾ˆèƒ½è¯´æ˜é—®é¢˜äº†â€”â€”é«˜åº¦æ€€ç–‘æ˜¯å­—èŠ‚åºé—®é¢˜ã€‚è¯•å€’è½¬å˜é‡çš„å­—èŠ‚åºï¼Œæ•°å€¼å°±ä¸º 0x10002733ï¼Œå–ä½ 16 ä½ï¼Œå³æ˜¯ 10035ï¼åˆ†æåˆ°è¿™é‡Œå…«ä¹ä¸ç¦»åäº†ï¼Œç›´æ¥æŸ¥ä»£ç ï¼Œå¥½å®¶ä¼™æœä¸å…¶ç„¶ï¼Œå°±æ˜¯æ•´ä¸ªç»“æ„éƒ½æ²¡è½¬å­—èŠ‚åºã€‚æ„Ÿæ‚Ÿè™½è¯´é—®é¢˜æ˜¯å†…éƒ¨æµ‹è¯•å‘ç°çš„ï¼Œæˆ‘å¯ä»¥åŠ  -g é‡æ–°ç¼–è¯‘ï¼Œä½†å¦‚æœæ˜¯åœ¨å‰æ–¹ç¯å¢ƒå®šä½ï¼Œå“ªæ¥çš„è°ƒè¯•ä¿¡æ¯ï¼Ÿå®é™…ä¸Šï¼Œæ—  -g ç›´æ¥ä¸Š gdb è°ƒè¯•ä¸€æ ·èƒ½è°ƒï¼Œåªä¸è¿‡å¾ˆè€ƒéªŒè°ƒè¯•è€…åœ¨æ±‡ç¼–ã€æŒ‡é’ˆã€å†…å­˜ç­‰åº•å±‚åŸç†ä¸Šçš„åŠŸåº•ã€‚ä¸´æ±‡ç¼–è€Œä¸æƒ§ï¼Œå¯»æŒ‡é’ˆè€Œä¸ä¹±ï¼Œè§‚å†…å­˜è€Œçƒ›å¾®ï¼Œæ­¤è°“ä¹‹é«˜æ‰‹ä¹Ÿã€‚å¾è¾ˆå½“ä»¥ä¹‹ä¸ºç›®æ ‡ï¼Œä¸æ–­ç²¾è¿›ã€‚"
  },
  
  {
    "title": "ç®€æHTTPS",
    "url": "/posts/%E7%AE%80%E6%9E%90HTTPS/",
    "categories": "Tech, Network",
    "tags": "tls",
    "date": "2025-04-15 18:50:00 +0800",
    





    "snippet": "å†™åœ¨å‰é¢é˜…è¯»ã€Šå›¾è§£HTTPã€‹ï¼Œå¤§è‡´ç†è§£äº† SSL/TLS çš„æ¡æ‰‹è¿‡ç¨‹å’Œæ€æƒ³åŸç†ã€‚ç„¶è€Œä½œä¸ºå…¥é—¨ä¹¦ï¼Œå®ƒæ²¡æœ‰ä»‹ç»åŸºäº DH ç®—æ³•çš„ TLS æ¡æ‰‹è¿‡ç¨‹ï¼Œä¹Ÿæ²¡æœ‰ä»‹ç»è¯ä¹¦é“¾ç›¸å…³çš„çŸ¥è¯†ğŸ˜¡ã€‚æˆ‘ Google äº†ä¸å°‘èµ„æ–™ï¼Œç€é‡å•ƒäº†å‡ ç¯‡æ–‡ç« ï¼Œç»“åˆæŠ“åŒ…åˆ†æï¼Œæœ¬æƒ³â€œå·®ä¸å¤šå¾—äº†â€ï¼Œå´æ²¡æ–™åˆ°å…¥äº†å¤§å‘ï¼Œç–‘é—®ä¸å‡åå¢ã€‚ä¸€ç­¹è«å±•ä¹‹é™…ï¼ŒAI æŠ€æœ¯å¤§ç«ï¼Œæ•‘æˆ‘ç‹—å‘½ã€‚å—æ­¤é¼“èˆï¼Œå€ŸåŠ© AI è§£æƒ‘ï¼Œåˆæ‰“èµ·ç²¾ç¥å•ƒè¯»äº†å¤šä¸ª RFC ç‰‡æ®µï¼Œé‚æ‹¨äº‘è§æ—¥ã€‚æœ¬æ–‡æ—¢æˆï¼Œè™½å¾—ç›Šäºå¤©æ—¶ï¼Œç„¶äº¦å¯è°“ä¸€æ³¢ä¸‰æŠ˜ï¼Œå†å°½è‰°è¾›ã€‚æˆ‘çœŸç‰›é€¼ğŸ‘ã€‚æœ¬æ–‡ä¸»è¦åŸºäº TLS1.2 ç ”å†™ï¼ŒçŸ¥è¯†æ•´ç†äºæ­¤ğŸ‘‡ã€‚å…ˆè¡Œæ¦‚å¿µ&amp;gt; å¯†ç ä½“åˆ¶å¯†ç å­¦ä¸»è¦æœ‰ä¸¤ç§ä½“åˆ¶ï¼š  å…±äº«å¯†ç ä½“åˆ¶ï¼ˆå¯¹ç§°å¯†ç ä½“åˆ¶ï¼‰  å…¬é’¥å¯†ç ä½“åˆ¶ï¼ˆéå¯¹ç§°å¯†ç ä½“åˆ¶ï¼‰&amp;gt; æ•°å­¦éš¾é¢˜å…¬é’¥å¯†ç ä½“åˆ¶ä¸»è¦åŸºäºä»¥ä¸‹æ•°å­¦éš¾é¢˜ï¼š  å¤§æ•´æ•°åˆ†è§£é—®é¢˜  ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼ˆDLPï¼‰          ä¸€èˆ¬çš„ç¦»æ•£å¯¹æ•°é—®é¢˜      æ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼ˆECDLPï¼‰      ä¸€èˆ¬çš„è¯´æ³•ä¸­ï¼Œé€šå¸¸å°†æ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°é—®é¢˜å•ç‹¬ä½œä¸ºä¸€ç±»ï¼Œä¸ç¦»æ•£å¯¹æ•°é—®é¢˜ã€å¤§æ•´æ•°åˆ†è§£é—®é¢˜ä¸€èµ·ï¼Œå¹¶ç§°å¯†ç å­¦ä¸‰å¤§æ•°å­¦éš¾é¢˜ã€‚æ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°é—®é¢˜æ¯”ä¸€èˆ¬çš„ç¦»æ•£å¯¹æ•°é—®é¢˜æ›´åŠ å›°éš¾ï¼Œè‡ªç„¶å°±è¯ç”Ÿäº†åŸºäºæ¤­åœ†æ›²çº¿çš„å¯†ç å­¦ï¼Œè¢«ç§°ä½œæ¤­åœ†æ›²çº¿å¯†ç å­¦ï¼ˆECCï¼‰ã€‚ä¸€äº›åŸæœ¬åŸºäºä¸€èˆ¬ç¦»æ•£å¯¹æ•°é—®é¢˜çš„ç®—æ³•è¢«ç§»æ¤åˆ°æ¤­åœ†æ›²çº¿ä¸Šï¼Œå°±æœ‰äº† ECC çš„ç®—æ³•ç‰ˆæœ¬ï¼Œæ¯”å¦‚ DH ç®—æ³•çš„æ¤­åœ†æ›²çº¿ç‰ˆæœ¬ï¼Œå°±å« ECDH ç®—æ³•ã€‚ä¸€äº›å…¬é’¥ç®—æ³•ä¸æ•°å­¦éš¾é¢˜çš„å¯¹åº”å…³ç³»ï¼š  RSA - å¤§æ•´æ•°åˆ†è§£é—®é¢˜  DHã€DSA - ä¸€èˆ¬çš„ç¦»æ•£å¯¹æ•°é—®é¢˜  ECDHã€ECDHEã€ECDSA - æ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°é—®é¢˜TLS æ¡æ‰‹è¿‡ç¨‹TLS åœ¨æ¡æ‰‹ä¸­ä¸»è¦åšäº†ä¸‰ä»¶äº‹â€”â€”èº«ä»½è®¤è¯ã€å¯†é’¥äº¤æ¢å’Œå®Œæ•´æ€§æ ¡éªŒã€‚æ¡æ‰‹ä¸»è¦æ˜¯ä¸ºäº†ç”Ÿæˆå¹¶äº¤æ¢å…±äº«å¯†é’¥ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä½¿ç”¨å…¬é’¥ç®—æ³•è¿›è¡Œçš„ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æ‹¥æœ‰å…±äº«å¯†é’¥åï¼Œåç»­çš„é€šä¿¡å†ä½¿ç”¨å…±äº«å¯†é’¥ç®—æ³•è¿›è¡ŒåŠ å¯†ã€‚è¿™æ˜¯å®‰å…¨å’Œæ€§èƒ½ç»¼åˆè€ƒé‡çš„ç»“æœã€‚å…¬é’¥ç®—æ³•å®‰å…¨ä½†æ€§èƒ½æ¶ˆè€—å¤šï¼Œå…±äº«å¯†é’¥ç®—æ³•ç›¸å¯¹ä¸é‚£ä¹ˆå®‰å…¨ä½†æ€§èƒ½æ¶ˆè€—å°‘ï¼Œæ‰€ä»¥çœŸæ­£çš„åŠ å¯†é€šä¿¡ä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯†ï¼Œè€Œä¸”å…±äº«å¯†é’¥çš„äº¤æ¢åˆ™ç”±å…¬é’¥ç®—æ³•å®ç°ã€‚ä»¥ä¸‹åŸºäº TLS1.2 é˜è¿°å…¶æ¡æ‰‹è¿‡ç¨‹ã€‚åŸºäº RSA ç®—æ³•æ­¥éª¤ 1 - å‘èµ·è¿æ¥ï¼Œåå•†å‚æ•°å®¢æˆ·ç«¯å‘é€ `Client Hello`ã€‚å®¢æˆ·ç«¯ç”Ÿæˆéšæœºæ•° Client Randomï¼Œå¹¶å‘é€ Client Hello æŠ¥æ–‡ã€‚è¯¥æŠ¥æ–‡ä¸­åŒ…å« Client Random éšæœºæ•°ä»¥åŠå®¢æˆ·ç«¯æ”¯æŒçš„ç®—æ³•å¥—ä»¶ç­‰ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯è¢«ä¼ é€’ç»™æœåŠ¡å™¨ç”¨äºåå•†ã€‚æ­¥éª¤ 2 - åå•†å‚æ•°ï¼Œå‘é€è¯ä¹¦æœåŠ¡å™¨å‘é€ `Server Hello, Certificate, Server Hello Done`ã€‚      æœåŠ¡å™¨ä» Client Hello ä¸­è·å¾—éšæœºæ•° Client Randomã€‚        æœåŠ¡å™¨ç”Ÿæˆ Server Randomï¼Œå°†è¯¥éšæœºæ•°åŒ…å«è¿› Server Hello ä¸­ã€‚æœåŠ¡å™¨ä¾æ®è‡ªèº«æƒ…å†µï¼Œä»å®¢æˆ·ç«¯ç®—æ³•å¥—ä»¶ä¸­æŒ‘é€‰ä¸€ä¸ªè‡ªèº«æ”¯æŒçš„ç®—æ³•ï¼Œå°†å…¶åŒ…å«è¿› Server Hello ä¸­ã€‚        æœåŠ¡å™¨å‘é€è‡ªå·±çš„è¯ä¹¦ã€‚è¯ä¹¦ä¸­ä¸»è¦åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š                  æœåŠ¡å™¨çš„å…¬é’¥                    æœåŠ¡å™¨çš„åŸŸå                    å…¶å®ƒé™„åŠ ä¿¡æ¯                    CA çš„ç­¾åï¼šä½¿ç”¨ CA çš„ç§é’¥å¯¹ä¸Šè¿°è¯ä¹¦ä¿¡æ¯çš„å“ˆå¸Œå€¼åŠ å¯†æ‰€å¾—çš„ç»“æœã€‚        signature = ca-private-key((hash(cert-info)))                          æœåŠ¡å™¨å‘é€ Server Hello Doneã€‚  å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨å‘é€æŠ¥æ–‡ã€‚å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨é€‰æ‹©äº†ç®—æ³• TLS_RSA_WITH_AES_256_CBC_SHAã€‚å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨å‘é€äº†è‡ªå·±çš„è¯ä¹¦ï¼Œè¯¥è¯ä¹¦è¢« CA ç­¾åï¼Œç­¾åä½¿ç”¨çš„ç­¾åç®—æ³•æ˜¯ RSAï¼Œå“ˆå¸Œç®—æ³•æ˜¯ SHA256ã€‚æ­¥éª¤ 3 - èº«ä»½è®¤è¯ï¼Œå¯†é’¥äº¤æ¢ï¼Œç”Ÿæˆä¼šè¯å¯†é’¥å®¢æˆ·ç«¯å‘é€ `Client Key Exchange, Change Cipher Spec, Encrypted Handshake Message`ã€‚  å®¢æˆ·ç«¯ä» Server Hello ä¸­è·å¾—éšæœºæ•° Server Randomã€‚  å®¢æˆ·ç«¯ä½¿ç”¨ CA çš„è¯ä¹¦ï¼ˆä¸€èˆ¬å·²é¢„ç½®åœ¨æµè§ˆå™¨ä¸­ï¼‰éªŒè¯æœåŠ¡å™¨çš„è¯ä¹¦ã€‚ä½¿ç”¨ CA è¯ä¹¦ä¸­åŒ…å«çš„å…¬é’¥è§£å¯†æœåŠ¡å™¨è¯ä¹¦ä¸­çš„ç­¾åï¼Œå¾—åˆ°å“ˆå¸Œå€¼ï¼Œå†è®¡ç®—æœåŠ¡å™¨è¯ä¹¦ä¿¡æ¯çš„å“ˆå¸Œå€¼ï¼ŒäºŒè€…å¯¹æ¯”ï¼Œè‹¥ä¸€è‡´åˆ™éªŒè¯é€šè¿‡ã€‚éªŒè¯é€šè¿‡ï¼Œè¯æ˜äº†æœåŠ¡å™¨è¯ä¹¦æ˜¯ç”±æµè§ˆå™¨å†…ç½®çš„ CA è¯ä¹¦æ‰€ä»£è¡¨çš„ CA é¢å‘çš„ï¼Œå³è¯æ˜äº†å†…ç½® CA ä¿¡ä»»æœåŠ¡å™¨ï¼›è€Œå†…ç½®çš„ CA æ˜¯å¹¿å—ç¤¾ä¼šä¿¡ä»»çš„ CAï¼Œå·²ç»æ˜¯ä¿¡ä»»é”šç‚¹ã€‚å°±è¿™æ ·ï¼Œæµè§ˆå™¨ä¿¡ä»» CAï¼ŒCA ä¿¡ä»»æœåŠ¡å™¨ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¿¡ä»»æœåŠ¡å™¨ã€‚è¿™ä¸€ä¿¡ä»»é“¾è¯æ˜äº†æœåŠ¡å™¨çš„èº«ä»½å€¼å¾—ä¿¡èµ–ï¼Œä¸”è¯ä¹¦ä¸­çš„å…¬é’¥çš„ç¡®å±äºæœåŠ¡å™¨ï¼Œæ­¤å³èº«ä»½è®¤è¯ã€‚  å®¢æˆ·ç«¯ç”Ÿæˆ PreMaster Secretï¼Œå¹¶ä½¿ç”¨æœåŠ¡å™¨çš„å…¬é’¥åŠ å¯†ï¼Œä½¿ç”¨ Client Key Exchange å‘é€ç»™æœåŠ¡å™¨ï¼Œæ­¤å³å¯†é’¥äº¤æ¢ã€‚  å®¢æˆ·ç«¯ä½¿ç”¨ Client Random, Server Random, PreMaster Secret ç”Ÿæˆä¼šè¯å¯†é’¥ Session Keyã€‚  Change Cipher Spec å‘æœåŠ¡å™¨è¡¨æ˜ï¼šå®¢æˆ·ç«¯å·²ç»æ‹¥æœ‰ä¼šè¯å¯†é’¥ï¼Œæ¥ä¸‹æ¥å‘é€çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†ã€‚  å®¢æˆ·ç«¯è®¡ç®—å‡ºä¸€ä¸ªæ ¡éªŒæ•°æ®ï¼Œä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†åï¼Œä½œä¸º Encrypted Handshake Message1 å‘é€ç»™æœåŠ¡å™¨ã€‚å¦‚ä¸‹å›¾ï¼Œå®¢æˆ·ç«¯å‘é€æŠ¥æ–‡ã€‚å¦‚ä¸‹å›¾ï¼Œåœ¨ Client Key Exchange éƒ¨åˆ†å¯ä»¥çœ‹åˆ°ä½¿ç”¨æœåŠ¡å™¨çš„ RSA å…¬é’¥åŠ å¯†å‘é€çš„ PreMaster Secretã€‚æ­¥éª¤ 4 - å¯†é’¥äº¤æ¢ï¼Œç”Ÿæˆä¼šè¯å¯†é’¥æœåŠ¡å™¨å‘é€ `Change Cipher Spec, Encrypted Handshake Message`ã€‚  æœåŠ¡å™¨ä½¿ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å¾—åˆ° PreMaster Secretï¼Œæ­¤å³å¯†é’¥äº¤æ¢ã€‚  æœåŠ¡å™¨ä½¿ç”¨ Client Random, Server Random, PreMaster Secret ç”Ÿæˆä¼šè¯å¯†é’¥ Session Keyã€‚  æœåŠ¡å™¨ä½¿ç”¨ Session Key è§£å¯†å®¢æˆ·ç«¯å‘æ¥çš„æ ¡éªŒæ•°æ®ï¼Œå¹¶è®¡ç®—æŠ¥æ–‡å“ˆå¸Œå€¼ä¸æ ¡éªŒæ•°æ®è¿›è¡Œå¯¹æ¯”ã€‚  Change Cipher Spec å‘å®¢æˆ·ç«¯è¡¨æ˜ï¼šæœåŠ¡å™¨å·²ç»æ‹¥æœ‰ä¼šè¯å¯†é’¥ï¼Œæ¥ä¸‹æ¥å‘é€çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†ã€‚  æœåŠ¡å™¨è®¡ç®—å‡ºä¸€ä¸ªæ ¡éªŒæ•°æ®ï¼Œä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†åï¼Œä½œä¸º Encrypted Handshake Message2 å‘é€ç»™å®¢æˆ·ç«¯ã€‚å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨å‘é€æŠ¥æ–‡ã€‚å¦‚ä¸‹å›¾ï¼ŒæŠ¥æ–‡ä¿¡æ¯é•¿è¿™æ ·ã€‚æ­¥éª¤ 5 - å®Œæˆæ¡æ‰‹ï¼ŒåŠ å¯†é€šä¿¡åŒæ–¹å‘é€ `Application Data`ã€‚  å®¢æˆ·ç«¯ä½¿ç”¨ Session Key è§£å¯†æœåŠ¡å™¨å‘æ¥çš„æ ¡éªŒæ•°æ®ï¼Œå¹¶è®¡ç®—æŠ¥æ–‡å“ˆå¸Œå€¼ä¸æ ¡éªŒæ•°æ®è¿›è¡Œå¯¹æ¯”ã€‚  TLS è¿æ¥å»ºç«‹å®Œæˆã€‚æ¥ä¸‹æ¥åŒæ–¹ä½¿ç”¨ Session Key åŠ å¯†æ•°æ®ï¼Œè¿›è¡Œ HTTPS é€šä¿¡ã€‚å¦‚ä¸‹å›¾ï¼Œå‘é€åŠ å¯†çš„ HTTP æŠ¥æ–‡ã€‚æ­¥éª¤ 6 - æ–­å¼€è¿æ¥å®¢æˆ·ç«¯å‘é€ `Encrypted Alert`ã€‚å®¢æˆ·ç«¯ä½¿ç”¨ Session Key åŠ å¯†ä¸€ä¸ªå‘Šè­¦ä¿¡æ¯ï¼Œå‘é€ Encrypted Alert3 ä»¥æ–­å¼€ TLS è¿æ¥ã€‚åç»­å†å…³é—­ TCP çš„è¿æ¥ã€‚åŸºäº ECDHE ç®—æ³•åœ¨ RSA æ¡æ‰‹ä¸­ï¼ŒPreMaster Secret ç”±å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨ï¼Œä»è€Œå®Œæˆå¯†é’¥äº¤æ¢ï¼›è€Œåœ¨ DH ç®—æ³•ä¸­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŸºäºæ•°å­¦åŸç†ï¼Œæ ¹æ®ä¸€äº›å…¬å¼€çš„ä¿¡æ¯ç›´æ¥åœ¨å„è‡ªçš„æœ¬åœ°è®¡ç®—å‡º PreMaster Secretï¼Œè¿ç½‘ç»œä¼ è¾“éƒ½ç»™å¹²æ‰äº†ï¼Œæ‰€ä»¥ DH ç®—æ³•æ›´åŠ å®‰å…¨ã€‚DH ç®—æ³•ç®€ä»‹åŸç†DH ç®—æ³•æ˜¯ä¸€ç§å¯†é’¥äº¤æ¢ç®—æ³•ï¼Œæˆ‘ä»¬ä¸ç®¡æ•°å­¦ç»†èŠ‚ï¼Œæç®€é˜è¿°åŸç†ï¼š# å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å„æŒæœ‰ä¸€å¯¹ DH å…¬ç§é’¥ï¼Œä½¿ç”¨å®ƒä»¬å„è‡ªçš„ç§é’¥å’Œå¯¹ç«¯çš„å…¬é’¥å¯ä»¥ç”Ÿæˆä¸€ä¸ªä¼šè¯å¯†é’¥ï¼Œ# è€Œä¸¤ç«¯å„è‡ªç”Ÿæˆçš„ä¼šè¯å¯†é’¥åœ¨æ•°å­¦ä¸Šè¢«è¯æ˜æ˜¯ç›¸ç­‰çš„ã€‚æ¢è¨€ä¹‹ï¼Œåªè¦ä¸¤ç«¯äº’ç›¸äº¤æ¢å…¬é’¥å°±å¯ä»¥å®ç°# æ— éœ€ç½‘ç»œä¼ è¾“çš„ä¼šè¯å¯†é’¥äº¤æ¢ã€‚client-session-key = dh(client-private-key, server-public-key)server-session-key = dh(server-private-key, client-public-key)session-key = client-session-key = server-session-keyåˆ†ç±»DH ç®—æ³•åŸºäºç¦»æ•£å¯¹æ•°é—®é¢˜è€Œè¯ç”Ÿï¼Œæ ¹æ®ç¦»æ•£å¯¹æ•°çš„è®¡ç®—æ–¹å¼ï¼ˆè§æ•°å­¦éš¾é¢˜ï¼‰å¯ä»¥åˆ†ä¸ºï¼š  ä¸€èˆ¬çš„ DH ç®—æ³•  ECDH ç®—æ³•æ ¹æ® DH çš„ç§é’¥æ˜¯å¦å›ºå®šï¼Œå¯ä»¥åˆ†ä¸ºï¼š  Static DH  Ephemeral DH(DHE)åœ¨ Static DH ç®—æ³•ä¸­ï¼ŒæœåŠ¡å™¨æ¯æ¬¡è¿æ¥æ‰€ä½¿ç”¨çš„ DH ç§é’¥æ˜¯ä¸å˜çš„ï¼Œåº”è¯¥æ˜¯ç›´æ¥ä½¿ç”¨çš„ä¸å…¬é’¥è¯ä¹¦æˆå¯¹çš„é‚£ä¸ªç§é’¥ï¼Œé•¿æœŸä½¿ç”¨å®¹æ˜“æ³„éœ²ï¼Œä¸€æ—¦æ³„éœ²ï¼Œé»‘å®¢å°±èƒ½è§£å¯†å½“å‰å’Œä»¥å¾€æ¯æ¬¡è¿æ¥çš„é€šä¿¡ï¼Œè¿™æ ·çš„ç®—æ³•ä¸å…·å¤‡å‰å‘å®‰å…¨æ€§ï¼›è€Œåœ¨ Ephemeral DH ç®—æ³•ä¸­ï¼ŒæœåŠ¡å™¨ä¼šä¸ºæ¯æ¬¡è¿æ¥é‡æ–°ç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„ DH ç§é’¥ï¼Œè¿™æ ·å°±ç®—ç§é’¥æ³„éœ²ï¼Œä¹Ÿåªèƒ½è§£å¯†è¿™ä¸€æ¬¡è¿æ¥çš„é€šä¿¡ï¼Œæ— æ³•è§£å¯†ä»¥å¾€çš„é€šä¿¡ï¼Œæ‰€ä»¥ç®—æ³•å…·å¤‡å‰å‘å®‰å…¨æ€§ã€‚ECDHE æ¡æ‰‹æµç¨‹æ­¥éª¤ 1 - å‘èµ·è¿æ¥ï¼Œåå•†å‚æ•°å®¢æˆ·ç«¯å‘é€ `Client Hello`ã€‚åŒ RSA æ¡æ‰‹ã€‚æ­¥éª¤ 2 - åå•†å‚æ•°ï¼Œå‘é€è¯ä¹¦å’Œ ECDH ä¿¡æ¯æœåŠ¡å™¨å‘é€ `Server Hello, Certificate, Server Key Exchange, Server Hello Done`ã€‚ç›¸æ¯” RSA æ¡æ‰‹ï¼Œå¤šäº†ä¸€ä¸ª Server Key Exchangeï¼Œé˜è¿°å¦‚ä¸‹ã€‚åœ¨è¿™æ­¥ï¼ŒæœåŠ¡å™¨ä¼šé€‰æ‹©ä¸€ç§æ¤­åœ†æ›²çº¿ï¼Œç”Ÿæˆä¸€å¯¹ ECDH å…¬ç§é’¥ï¼Œå¹¶ä½¿ç”¨ Server Private Key å¯¹ Client Random, Server Random, Curve Info, Server DH Public Key çš„ç»„åˆè¿›è¡Œç­¾åï¼Œæœ€åå°†æ›²çº¿ä¿¡æ¯ã€ECDH å…¬é’¥ã€ç­¾åéƒ½åŒ…å«è¿› Server Key Exchange ä¸­ã€‚signature = server-private-key(    hash(client-random, server-random, curve-info, server-dh-public-key))æ­¤å¤„ç­¾åå’Œåç»­éªŒç­¾çš„æ„ä¹‰åœ¨äºè¯æ˜ ECDH ä¿¡æ¯çš„ç¡®æ˜¯ç”±è¯ä¹¦ä¸­çš„å…¬é’¥æ‰€ä»£è¡¨çš„æœåŠ¡å™¨å‘é€çš„ã€‚  æœåŠ¡å™¨æ˜¯åå•†é€‰æ‹©æ¤­åœ†æ›²çº¿çš„ã€‚å®¢æˆ·ç«¯ä¼šé€šè¿‡ elliptic_curves æˆ– supported_groups æ‰©å±•å­—æ®µå‘é€å…¶æ”¯æŒçš„å…¨éƒ¨æ›²çº¿ï¼ŒéšåæœåŠ¡å™¨å†ä»ä¸­é€‰æ‹©ä¸€ä¸ªã€‚éšç€æ ‡å‡†çš„ä¸æ–­å‘å±•ï¼Œelliptic_curves å·²ç»é€æ­¥è¢« supported_groups å–ä»£ã€‚å›  TLS ç‰ˆæœ¬çš„ä¸åŒï¼Œä¸Šè¿°è¯´æ³•å­˜åœ¨ä¸€äº›ç»†èŠ‚å‡ºå…¥ï¼Œä½†å¤§ä½“ä¸Šæ²¡é—®é¢˜ã€‚å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨å‘é€æŠ¥æ–‡ã€‚å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨é€‰æ‹©äº†ç®—æ³• TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256ã€‚è¿™é‡Œæˆ‘ä»¬æœåŠ¡å™¨çš„å¯†é’¥å¯¹æ˜¯ ECC å¯†é’¥å¯¹ï¼Œæ‰€ä»¥åå•†é€‰æ‹©äº† ECDSA ç­¾åç®—æ³•ã€‚å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨å‘é€äº†è‡ªå·±çš„è¯ä¹¦ï¼Œè¯¥è¯ä¹¦è¢« CA ç­¾åï¼Œç­¾åç®—æ³•æ˜¯ ECDSAï¼Œå“ˆå¸Œç®—æ³•æ˜¯ SHA256ã€‚è¿™é‡Œæˆ‘ä»¬ CA çš„å¯†é’¥å¯¹ä¹Ÿæ˜¯ ECC å¯†é’¥å¯¹ï¼Œä½¿ç”¨çš„ ECDSA ç®—æ³•ç­¾å‘çš„å…¬é’¥è¯ä¹¦ã€‚å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨å‘é€äº†è‡ªå·±ç”Ÿæˆçš„ ECDH å…¬é’¥ï¼Œå…¶é‡‡ç”¨çš„ ECC æ›²çº¿ä¸º Named Curve: secp256r1 (0x0017)ã€‚è®¡ç®—å‡ºçš„æ•°å­—ç­¾åä¹Ÿè¢«å‘é€ï¼Œç”±äºæœåŠ¡å™¨çš„ç§é’¥æ˜¯ ECC çš„ï¼Œæ‰€ä»¥ç­¾åç®—æ³•é€‰æ‹©äº† ECDSAã€‚æ­¥éª¤ 3 - èº«ä»½è®¤è¯ï¼Œå¯†é’¥äº¤æ¢ï¼Œç”Ÿæˆä¼šè¯å¯†é’¥å®¢æˆ·ç«¯å‘é€ `Client Key Exchange, Change Cipher Spec, Encrypted Handshake Message`ã€‚  å®¢æˆ·ç«¯ä» Server Hello ä¸­è·å¾—éšæœºæ•° Server Randomã€‚  å®¢æˆ·ç«¯ä½¿ç”¨ CA çš„è¯ä¹¦ï¼ˆä¸€èˆ¬å·²é¢„ç½®åœ¨æµè§ˆå™¨ä¸­ï¼‰éªŒè¯æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œç”±æ­¤è¯æ˜æœåŠ¡å™¨çš„èº«ä»½å€¼å¾—ä¿¡èµ–ï¼Œè¯ä¹¦ä¸­çš„å…¬é’¥çš„ç¡®ä»£è¡¨æœåŠ¡å™¨çš„èº«ä»½ï¼Œæ­¤å³èº«ä»½è®¤è¯ã€‚  å®¢æˆ·ç«¯ä½¿ç”¨è¯ä¹¦ä¸­çš„å…¬é’¥éªŒè¯ Server Key Exchange ä¸­çš„ç­¾åï¼Œç”±æ­¤è¯æ˜ ECDH ä¿¡æ¯çš„å‘é€è€…çš„ç¡®æ˜¯å…¬é’¥æ‰€ä»£è¡¨çš„æœåŠ¡å™¨ï¼Œæ­¤å³èº«ä»½è®¤è¯ã€‚  å®¢æˆ·ç«¯åŸºäºæœåŠ¡å™¨é€‰æ‹©çš„æ›²çº¿ç”Ÿæˆä¸€å¯¹ ECDH å…¬ç§é’¥ã€‚  å®¢æˆ·ç«¯å°†ç”Ÿæˆçš„ Client DH Public Key æ”¾å…¥ Client Key Exchange ä»¥å‘é€ç»™æœåŠ¡å™¨ã€‚  å®¢æˆ·ç«¯ä½¿ç”¨ Client DH Private Key, Server DH Public Key ç›´æ¥åœ¨æœ¬åœ°è®¡ç®—å‡º PreMaster Secretï¼Œåç»­æœåŠ¡å™¨ä¹Ÿä¼šç›´æ¥åœ¨æœ¬åœ°è®¡ç®—å‡ºåŒæ ·çš„ PreMaster Secretï¼Œæ­¤å³å¯†é’¥äº¤æ¢ã€‚  å®¢æˆ·ç«¯ä½¿ç”¨ Client Random, Server Random, PreMaster Secret ç”Ÿæˆä¼šè¯å¯†é’¥ Session Keyã€‚  åŒ RSA æ¡æ‰‹ï¼Œå‘é€ Change Cipher Spec å’Œ Encrypted Handshake Message1ã€‚å¦‚ä¸‹å›¾ï¼Œåœ¨ Client Key Exchange éƒ¨åˆ†å¯ä»¥çœ‹åˆ°å‘é€çš„ Client DH Public Keyã€‚æ­¥éª¤ 4 - å¯†é’¥äº¤æ¢ï¼Œç”Ÿæˆä¼šè¯å¯†é’¥æœåŠ¡å™¨å‘é€ `Change Cipher Spec, Encrypted Handshake Message`ã€‚  æœåŠ¡å™¨ä½¿ç”¨ Client DH Public Key, Server DH Private Key ç›´æ¥åœ¨æœ¬åœ°è®¡ç®—å‡ºä¸å®¢æˆ·ç«¯ä¸€è‡´çš„ PreMaster Secretï¼Œæ­¤å³å¯†é’¥äº¤æ¢ã€‚  æœåŠ¡å™¨ä½¿ç”¨ Client Random, Server Random, PreMaster Secret ç”Ÿæˆä¼šè¯å¯†é’¥ Session Keyã€‚  æœåŠ¡å™¨ä½¿ç”¨ Session Key è§£å¯†å®¢æˆ·ç«¯å‘æ¥çš„æ ¡éªŒæ•°æ®ï¼Œå¹¶è®¡ç®—æŠ¥æ–‡å“ˆå¸Œå€¼ä¸æ ¡éªŒæ•°æ®è¿›è¡Œå¯¹æ¯”ã€‚  åŒ RSA æ¡æ‰‹ï¼Œå‘é€ Change Cipher Spec å’Œ Encrypted Handshake Message2ã€‚æ­¥éª¤ 5 - å®Œæˆæ¡æ‰‹ï¼ŒåŠ å¯†é€šä¿¡åŒæ–¹å‘é€ `Application Data`ã€‚åŒ RSA æ¡æ‰‹ã€‚æ­¥éª¤ 6 - æ–­å¼€è¿æ¥å®¢æˆ·ç«¯å‘é€ `Encrypted Alert`ã€‚åŒ RSA æ¡æ‰‹ã€‚è¡¥å……è¯´æ˜æ ¡éªŒæ•°æ® Finished MessageThe Illustrated TLS Connection: Every Byte Explained è¾ƒä¸ºè¯¦ç»†åœ°å±•ç¤ºäº† ECDHE æ¡æ‰‹çš„æµç¨‹ï¼Œå…¶è¯´æ³•å¦‚ä¸‹ï¼šThe verification data is built from a hash of all handshake messages and verifies the integrity of the handshake process.RFC5246  The Transport Layer Security (TLS) Protocol Version 1.2 çš„è¯´æ³•å¦‚ä¸‹ï¼š# 7.4.9  FinishedThe value handshake_messages includes all handshake messages startingat ClientHello up to, but not including, this Finished message.  Thismay be different from handshake_messages in Section 7.4.8 because itwould include the CertificateVerify message (if sent).  Also, thehandshake_messages for the Finished message sent by the client willbe different from that for the Finished message sent by the server,because the one that is sent second will include the prior one.Note: ChangeCipherSpec messages, alerts, and any other record typesare not handshake messages and are not included in the hashcomputations.  Also, HelloRequest messages are omitted from handshakehashes.æ®æ­¤çŒœæµ‹ï¼Œæœ¬æ–‡ä¾‹å­ä¸­ï¼Œå‚ä¸å“ˆå¸Œçš„æŠ¥æ–‡åŒºé—´å¤§æ¦‚æ˜¯ [Client Hello, Client/Server Finished), Exclude(Change Cipher Spec)ã€‚MAC æ‘˜è¦æ‰€æœ‰ä½¿ç”¨ Session Key åŠ å¯†çš„æ•°æ®ï¼Œå…¶å†…éƒ½åŒ…å«äº†ä¸€ä¸ªåä¸º MAC (Message Authentication Code) çš„æŠ¥æ–‡æ‘˜è¦ã€‚MAC æœ‰å¤šç§å®ç°ï¼Œæ¯”å¦‚ HMAC å’Œ GMACã€‚HMAC å’Œ GMAC çš„ç‰¹ç‚¹ï¼ˆAIï¼‰ï¼š  HMAC          åŸºäºå“ˆå¸Œå‡½æ•°ï¼ˆå¦‚ SHA256ï¼‰      é€‚ç”¨äºé€šç”¨åœºæ™¯      éœ€è¦æ˜¾å¼åœ°ä¸åŠ å¯†ç®—æ³•ï¼ˆå¦‚ AES-CBCï¼‰ç»“åˆä½¿ç”¨        GMAC          åŸºäº Galois åŸŸè¿ç®—      ä¸“ä¸º GCM æ¨¡å¼è®¾è®¡ï¼Œé€šå¸¸ä¸ AES-GCM ç»“åˆä½¿ç”¨ã€‚      æä¾›æ›´é«˜çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨ç¡¬ä»¶åŠ é€Ÿçš„åœºæ™¯ä¸­ã€‚      å…·ä½“æœºåˆ¶æœ¬æ–‡ä¸ç ”ç©¶ï¼Œæˆ‘çš„ç†è§£æ˜¯æ•°æ®å’Œ MAC ä¸€èµ·è¢«åŠ å¯†ä¼ è¾“ï¼Œå¯¹ç«¯è§£å¯†åï¼Œå†è®¡ç®—æ•°æ®çš„ MAC ä¸æ¥æ”¶åˆ°çš„ MAC å€¼å¯¹æ¯”ï¼Œä»è€Œæ¢çŸ¥æ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹ï¼Œæ­¤å³å®Œæ•´æ€§æ ¡éªŒã€‚è¯•è®¡ç®— Server Key Exchange ä¸­çš„ç­¾åå¹¶éªŒç­¾åœ¨ ECDHE æ¡æ‰‹-æ­¥éª¤ 2 ä¸­ï¼Œæˆ‘ä»¬æåˆ°ç­¾åæ˜¯å¯¹ Client Random, Server Random, Curve Info, Server DH Public Key çš„ç»„åˆè¿›è¡Œçš„ã€‚ä¿¡æ¯æ”¶é›†å¦‚ä¸‹ï¼š# client random\\x5b\\x70\\x1c\\x25\\x8a\\xf4\\x56\\x6a\\x81\\xa7\\xee\\xcf\\xa0\\x9f\\xbb\\xcb\\x35\\xfd\\x64\\xae\\xe5\\xb0\\x46\\x03\\xda\\x92\\x4e\\xa0\\x07\\x79\\x35\\x2a# server random\\xcc\\x26\\xf9\\x66\\x00\\x00\\x00\\x00\\x67\\x78\\x0a\\x00\\x00\\x00\\x00\\x00\\x3f\\x00\\x00\\x00\\x3f\\x00\\x00\\x00\\x3f\\x00\\x00\\x00\\x3f\\x00\\x00\\x00# curve info\\x03\\x00\\x17# server dh public key\\x41\\x04\\x39\\x3b\\x76\\x31\\x87\\x80\\xe0\\x0b\\x27\\xd4\\xe7\\xc4\\x95\\x27\\x9c\\x2f\\xeb\\x96\\xa6\\xe8\\xd9\\x87\\x42\\x2e\\xce\\xac\\x84\\xa2\\x68\\xda\\x6f\\x6f\\x08\\x05\\xaa\\xf9\\x5d\\x23\\xa0\\x24\\xd1\\x25\\x30\\x84\\x11\\x55\\xcb\\xe9\\x69\\xeb\\xfb\\xcf\\xa8\\xbd\\xf8\\x96\\x8a\\x0a\\x7e\\xad\\x1c\\xef\\x84\\xa8å°†è¿™äº›æ•°æ®åˆå¹¶åœ¨ä¸€èµ·ï¼š# compose the data togetherecho -n &quot;\\x5b\\x70\\x1c\\x25\\x8a\\xf4\\x56\\x6a\\x81\\xa7\\xee\\xcf\\xa0\\x9f\\xbb\\xcb\\x35\\xfd\\x64\\xae\\xe5\\xb0\\x46\\x03\\xda\\x92\\x4e\\xa0\\x07\\x79\\x35\\x2a\\xcc\\x26\\xf9\\x66\\x00\\x00\\x00\\x00\\x67\\x78\\x0a\\x00\\x00\\x00\\x00\\x00\\x3f\\x00\\x00\\x00\\x3f\\x00\\x00\\x00\\x3f\\x00\\x00\\x00\\x3f\\x00\\x00\\x00\\x03\\x00\\x17\\x41\\x04\\x39\\x3b\\x76\\x31\\x87\\x80\\xe0\\x0b\\x27\\xd4\\xe7\\xc4\\x95\\x27\\x9c\\x2f\\xeb\\x96\\xa6\\xe8\\xd9\\x87\\x42\\x2e\\xce\\xac\\x84\\xa2\\x68\\xda\\x6f\\x6f\\x08\\x05\\xaa\\xf9\\x5d\\x23\\xa0\\x24\\xd1\\x25\\x30\\x84\\x11\\x55\\xcb\\xe9\\x69\\xeb\\xfb\\xcf\\xa8\\xbd\\xf8\\x96\\x8a\\x0a\\x7e\\xad\\x1c\\xef\\x84\\xa8&quot; &amp;gt; dataæœåŠ¡å™¨æœ¬èº«çš„ç§é’¥ä¹Ÿè´´åœ¨æ­¤å¤„ï¼Œæ–‡ä»¶ä»¥ \\n ç»“å°¾ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäºæ›²çº¿ prime256v1(secp256r1) çš„ ECC ç§é’¥ã€‚# server private key-----BEGIN EC PARAMETERS-----BggqhkjOPQMBBw==-----END EC PARAMETERS----------BEGIN EC PRIVATE KEY-----MHcCAQEEIIshQQR4px7Ek+5jRugTnySv5cjqSs1PbDlnmR1SSC4joAoGCCqGSM49AwEHoUQDQgAE4Q+9ZBPkV4b2buqwPLB9EskoGByXTcPuF22znhtFG2R9gVlFyU4S3GyXx3QaFOfLLNdyl/puch+GlZAZZsYKPw==-----END EC PRIVATE KEY-----å…¶åå…­è¿›åˆ¶ä¸ºï¼š# server private key hexxxd -ps server-ecc-key.pem | tr -d &quot;\\n&quot; | sed &#39;s/\\(..\\)/\\\\x\\1/g&#39;\\x2d\\x2d\\x2d\\x2d\\x2d\\x42\\x45\\x47\\x49\\x4e\\x20\\x45\\x43\\x20\\x50\\x41\\x52\\x41\\x4d\\x45\\x54\\x45\\x52\\x53\\x2d\\x2d\\x2d\\x2d\\x2d\\x0a\\x42\\x67\\x67\\x71\\x68\\x6b\\x6a\\x4f\\x50\\x51\\x4d\\x42\\x42\\x77\\x3d\\x3d\\x0a\\x2d\\x2d\\x2d\\x2d\\x2d\\x45\\x4e\\x44\\x20\\x45\\x43\\x20\\x50\\x41\\x52\\x41\\x4d\\x45\\x54\\x45\\x52\\x53\\x2d\\x2d\\x2d\\x2d\\x2d\\x0a\\x2d\\x2d\\x2d\\x2d\\x2d\\x42\\x45\\x47\\x49\\x4e\\x20\\x45\\x43\\x20\\x50\\x52\\x49\\x56\\x41\\x54\\x45\\x20\\x4b\\x45\\x59\\x2d\\x2d\\x2d\\x2d\\x2d\\x0a\\x4d\\x48\\x63\\x43\\x41\\x51\\x45\\x45\\x49\\x49\\x73\\x68\\x51\\x51\\x52\\x34\\x70\\x78\\x37\\x45\\x6b\\x2b\\x35\\x6a\\x52\\x75\\x67\\x54\\x6e\\x79\\x53\\x76\\x35\\x63\\x6a\\x71\\x53\\x73\\x31\\x50\\x62\\x44\\x6c\\x6e\\x6d\\x52\\x31\\x53\\x53\\x43\\x34\\x6a\\x6f\\x41\\x6f\\x47\\x43\\x43\\x71\\x47\\x53\\x4d\\x34\\x39\\x0a\\x41\\x77\\x45\\x48\\x6f\\x55\\x51\\x44\\x51\\x67\\x41\\x45\\x34\\x51\\x2b\\x39\\x5a\\x42\\x50\\x6b\\x56\\x34\\x62\\x32\\x62\\x75\\x71\\x77\\x50\\x4c\\x42\\x39\\x45\\x73\\x6b\\x6f\\x47\\x42\\x79\\x58\\x54\\x63\\x50\\x75\\x46\\x32\\x32\\x7a\\x6e\\x68\\x74\\x46\\x47\\x32\\x52\\x39\\x67\\x56\\x6c\\x46\\x79\\x55\\x34\\x53\\x0a\\x33\\x47\\x79\\x58\\x78\\x33\\x51\\x61\\x46\\x4f\\x66\\x4c\\x4c\\x4e\\x64\\x79\\x6c\\x2f\\x70\\x75\\x63\\x68\\x2b\\x47\\x6c\\x5a\\x41\\x5a\\x5a\\x73\\x59\\x4b\\x50\\x77\\x3d\\x3d\\x0a\\x2d\\x2d\\x2d\\x2d\\x2d\\x45\\x4e\\x44\\x20\\x45\\x43\\x20\\x50\\x52\\x49\\x56\\x41\\x54\\x45\\x20\\x4b\\x45\\x59\\x2d\\x2d\\x2d\\x2d\\x2d\\x0aç°åœ¨ä½¿ç”¨ç§é’¥å¯¹æ•°æ®ç­¾åï¼Œopenssl ä¼šæ ¹æ®ç§é’¥ç±»å‹è‡ªåŠ¨é€‰æ‹©ç›¸åº”çš„ç­¾åç®—æ³•ï¼Œå¯¹äº ECC ç§é’¥ï¼Œä¼šé»˜è®¤é€‰æ‹© ECDSA ç®—æ³•ã€‚æŠ¥æ–‡ä¸­å®é™…ä½¿ç”¨çš„ç­¾åç®—æ³•ä¸º ecdsa_secp256r1_sha256ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ -sha256ï¼Œä½¿å“ˆå¸Œç®—æ³•ä¹Ÿä¿æŒä¸€è‡´ã€‚# sign the data with the server private keyopenssl dgst -sign server-ecc-key.pem -sha256 -out sig data# see the signaturexxd -ps sig# result:3044022020b6c7803f90785be49b6d70744f82bc7a421718da24e39abb743505fe23882b02203b56f27ca41156b86948f658e07eda922f06dc6c4284bbd179c6da108a48b4e5è‡³æ­¤æˆ‘ä»¬å¾—åˆ°äº†ç­¾åï¼Œä½†æ˜¯è¯¥ç­¾åä¸æŠ¥æ–‡ä¸­çš„å®é™…å€¼å¹¶ä¸ç›¸åŒã€‚ä¸ä»…å¦‚æ­¤ï¼Œä½ ä¼šå‘ç°æ¯æ¬¡ç­¾åå¾—åˆ°çš„ç»“æœéƒ½æ˜¯ä¸åŒçš„ã€‚è¿™æ˜¯å› ä¸º ECDSA ç­¾åç®—æ³•å†…éƒ¨æ··å…¥äº†éšæœºå€¼ï¼Œå³ä¾¿ä½¿ç”¨åŒä¸€ç§é’¥å¯¹åŒä¸€æ¶ˆæ¯è¿›è¡Œå¤šæ¬¡ç­¾åï¼Œç»“æœä¹Ÿä¼šä¸åŒã€‚  å¦‚æœæ˜¯ RSA ç§é’¥ï¼Œé‚£ä¹ˆè®¡ç®—å¾—åˆ°çš„ RSA ç­¾åæ˜¯å¯ä»¥ä¸æŠ¥æ–‡ä¸­çš„å®é™…å€¼å¯¹ä¸Šçš„ã€‚ä½¿ç”¨åŒä¸€ç§é’¥å¯¹åŒä¸€æ¶ˆæ¯è¿›è¡Œå¤šæ¬¡ç­¾åï¼Œç»“æœæ˜¯ç›¸åŒçš„ã€‚ä¸è¿‡è¿™å¹¶ä¸ä¼šå½±å“éªŒç­¾çš„ç»“æœã€‚ä¸‹é¢æˆ‘ä»¬è¿›è¡ŒéªŒç­¾ã€‚å®é™…éªŒç­¾æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šä»æœåŠ¡å™¨è¯ä¹¦ä¸­æå–å‡ºå…¬é’¥ã€‚å¦‚ä¸‹ï¼Œæ–‡ä»¶ä»¥ \\n ç»“å°¾ã€‚# extract the public key from the server certificateopenssl x509 -in server-ecc-cert.pem -pubkey -noout &amp;gt; server-ecc-pub.pem# server public key-----BEGIN PUBLIC KEY-----MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE4Q+9ZBPkV4b2buqwPLB9EskoGByXTcPuF22znhtFG2R9gVlFyU4S3GyXx3QaFOfLLNdyl/puch+GlZAZZsYKPw==-----END PUBLIC KEY-----# server public key hexxxd -ps server-ecc-pub.pem | tr -d &quot;\\n&quot; | sed &#39;s/\\(..\\)/\\\\x\\1/g&#39;\\x2d\\x2d\\x2d\\x2d\\x2d\\x42\\x45\\x47\\x49\\x4e\\x20\\x50\\x55\\x42\\x4c\\x49\\x43\\x20\\x4b\\x45\\x59\\x2d\\x2d\\x2d\\x2d\\x2d\\x0a\\x4d\\x46\\x6b\\x77\\x45\\x77\\x59\\x48\\x4b\\x6f\\x5a\\x49\\x7a\\x6a\\x30\\x43\\x41\\x51\\x59\\x49\\x4b\\x6f\\x5a\\x49\\x7a\\x6a\\x30\\x44\\x41\\x51\\x63\\x44\\x51\\x67\\x41\\x45\\x34\\x51\\x2b\\x39\\x5a\\x42\\x50\\x6b\\x56\\x34\\x62\\x32\\x62\\x75\\x71\\x77\\x50\\x4c\\x42\\x39\\x45\\x73\\x6b\\x6f\\x47\\x42\\x79\\x58\\x0a\\x54\\x63\\x50\\x75\\x46\\x32\\x32\\x7a\\x6e\\x68\\x74\\x46\\x47\\x32\\x52\\x39\\x67\\x56\\x6c\\x46\\x79\\x55\\x34\\x53\\x33\\x47\\x79\\x58\\x78\\x33\\x51\\x61\\x46\\x4f\\x66\\x4c\\x4c\\x4e\\x64\\x79\\x6c\\x2f\\x70\\x75\\x63\\x68\\x2b\\x47\\x6c\\x5a\\x41\\x5a\\x5a\\x73\\x59\\x4b\\x50\\x77\\x3d\\x3d\\x0a\\x2d\\x2d\\x2d\\x2d\\x2d\\x45\\x4e\\x44\\x20\\x50\\x55\\x42\\x4c\\x49\\x43\\x20\\x4b\\x45\\x59\\x2d\\x2d\\x2d\\x2d\\x2d\\x0aä½¿ç”¨å…¬é’¥éªŒç­¾ã€‚# verify the signatureopenssl dgst -verify server-ecc-pub.pem -signature sig -sha256 dataVerified OKéªŒè¯é€šè¿‡ã€‚ä¸ºä»€ä¹ˆéªŒç­¾è¦ä½¿ç”¨è¯ä¹¦è€Œä¸èƒ½ç›´æ¥ä½¿ç”¨å…¬é’¥ï¼Ÿç°æœ‰ä¸¤ä¸ªäºº A å’Œ Bï¼ŒB ç”¨è‡ªå·±çš„ç§é’¥ç­¾åäº†ä¸€æ®µä¿¡æ¯ï¼Œå‘ç»™ Aã€‚ç°åœ¨ A ç”¨ B çš„å…¬é’¥éªŒç­¾ï¼Œå‘ç°èƒ½å¤ŸæˆåŠŸè§£å¯†ï¼Œæ‰€ä»¥ä»¥æ­¤è®¤å®šä¿¡æ¯çš„å‘é€è€…æ˜¯ Bã€‚è¿™ä¼¼ä¹æ²¡æœ‰é—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦å…¬é’¥è¯ä¹¦å‘¢ï¼Ÿé—®é¢˜çš„å…³é”®åœ¨äºï¼ŒB çš„å…¬é’¥æ˜¯å¦å¯ä¿¡ï¼ŒB çš„å…¬é’¥æ˜¯å¦çœŸçš„æ˜¯ B çš„å…¬é’¥ã€‚å¦‚æœæœ‰ä¸­é—´äººæ”»å‡»ï¼Œæ”»å‡»è€… C æ‰åŒ…äº† B çš„å…¬é’¥ä¸ºè‡ªå·±çš„å…¬é’¥ï¼Œç„¶åè‡ªå·±ç­¾åå‘é€ä¸€æ®µä¿¡æ¯ç»™ Aï¼Œé‚£ä¹ˆ A å°±ä¼šè¯¯ä»¥ä¸ºä¿¡æ¯çš„å‘é€è€…æ˜¯ Bï¼Œè€Œå®é™…å‘é€è€…å´æ˜¯ Aã€‚æ‰€ä»¥ï¼Œæœ‰å¿…è¦ç¡®ä¿å…¬é’¥çš„ç¡®æ˜¯ B çš„ï¼Œè€Œè¯ä¹¦èƒ½å¤Ÿè¯æ˜è¿™ä¸€ç‚¹ã€‚è¯ä¹¦ç”±å¹¿å—ç¤¾ä¼šä¿¡ä»»çš„ CA ç­¾å‘ï¼Œå…¶ä¸­åŒ…å«äº†å…¬é’¥æœ¬èº«å’Œå…¬é’¥æ‰€ä»£è¡¨çš„èº«ä»½ä¿¡æ¯ã€‚A åœ¨æ”¶åˆ° B çš„è¯ä¹¦åï¼Œä½¿ç”¨ CA çš„è¯ä¹¦éªŒè¯ B çš„è¯ä¹¦ï¼ŒéªŒè¯é€šè¿‡å³ä»£è¡¨ B çš„è¯ä¹¦çš„ç¡®æ˜¯ç”± CA ç­¾å‘çš„ï¼ŒCA ä¿¡ä»» B çš„èº«ä»½ï¼Œè€Œ CA æ˜¯å¹¿å—ä¿¡ä»»çš„ï¼ŒA è‡ªç„¶ä¹Ÿä¿¡ä»» CAï¼Œäºæ˜¯ A å¯ä»¥ä¿¡ä»» B çš„èº«ä»½ï¼Œä¹Ÿå³ï¼šåªè¦éªŒè¿‡äº†è¯ä¹¦ï¼Œå°±å¯ä»¥ç›¸ä¿¡å…¬é’¥æ‰€ä»£è¡¨çš„èº«ä»½ï¼Œå°±è¯æ˜å…¬é’¥çš„ç¡®å±äºå®ƒæ‰€ä»£è¡¨çš„é‚£ä¸ªèº«ä»½æœºæ„ã€‚å³ä¾¿æ”»å‡»è€…æ‰åŒ… B çš„å…¬é’¥ï¼Œä»–ä¹Ÿæ— æ³•ä¼ªé€  CA çš„ç­¾åï¼Œæ‰€ä»¥æ”»å‡»è€…æ˜¯æ— æ³•ä¼ªé€ è¯ä¹¦çš„ã€‚è¯ä¹¦/ä¿¡ä»»é“¾æœºåˆ¶ä»¥ CA è¿™æ ·çš„ç¬¬ä¸‰æ–¹æƒå¨æœºæ„ä½œèƒŒä¹¦ï¼Œèƒ½å¤Ÿé˜²èŒƒä¸­é—´äººæ”»å‡»ï¼Œç¡®ä¿å…¬é’¥çš„çœŸå®æ€§ã€‚å¯¹äºä»¥ä¸‹æƒ…å†µï¼š  A å’Œ B æ˜¯å¥½å‹ï¼Œç°åœ¨å°±é¢å¯¹é¢ç«™ç€äº¤æ¥å…¬é’¥ã€‚  B ä»¥ç”¨æˆ·åå¯†ç çš„æ–¹å¼å·²ç»é€šè¿‡äº† A çš„èº«ä»½è®¤è¯ï¼Œå†äº¤æ¥å…¬é’¥ã€‚A èƒ½å¤Ÿç›´æ¥ä¿¡ä»» Bï¼Œç›´æ¥è®¤å¯å…¬é’¥çš„çœŸå®æ€§ï¼Œè¿™å°±ä¸éœ€è¦è¯ä¹¦äº†ã€‚A ä»¥åç›´æ¥ä½¿ç”¨å…¬é’¥éªŒç­¾å³å¯ã€‚ç„¶è€Œï¼Œåœ¨å¼€æ”¾çš„ç½‘ç»œé€šä¿¡ä¸­ï¼Œè¯ä¹¦/ä¿¡ä»»é“¾æœºåˆ¶ä¸å¯æˆ–ç¼ºã€‚TLS ç®—æ³•åç§°çš„å«ä¹‰åœ¨ç†Ÿæ‚‰äº†æ¡æ‰‹çš„çŸ¥è¯†ä»¥åï¼Œæˆ‘ä»¬å†æ¥ç†è§£ç®—æ³•åç§°çš„å«ä¹‰ã€‚è¿™å¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆç®€å•ï¼Œç”±äºç®—æ³•ç‰ˆæœ¬çš„æ›´è¿­ï¼Œç®—æ³•åç§°çš„å«ä¹‰ä¼šæœ‰ä¸€äº›å·®åˆ«ã€‚å…ˆè´´ä¸Šå‡ ä¸ªç®—æ³•åç§°çš„ä¾‹å­ï¼šTLS_RSA_WITH_AES_256_CBC_SHA256TLS_RSA_WITH_AES_128_GCM_SHA256TLS_RSA_WITH_AES_256_GCM_SHA384TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHATLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384TLS_ECDH_RSA_WITH_AES_256_CBC_SHATLS_ECDH_ECDSA_WITH_AES_256_CBC_SHASHA æ˜¯æŒ‡ HMAC è®¡ç®—ä»¥åŠ Finished æ ¡éªŒç­‰æµç¨‹æ‰€ä½¿ç”¨çš„å“ˆå¸Œç®—æ³•ï¼ŒCBC/GCM æ˜¯åˆ†ç»„å¯†ç å·¥ä½œæ¨¡å¼ï¼ŒAES_256 æ˜¯å…±äº«å¯†ç ç®—æ³•å’Œå…±äº«å¯†é’¥é•¿åº¦ã€‚ç´§è·Ÿåœ¨ TLS åé¢çš„ RSA/ECDHE/ECDH æ˜¯å¯†é’¥äº¤æ¢ç®—æ³•ï¼Œå…¶ä¸­ DHE å¯†é’¥äº¤æ¢è¿‡ç¨‹ä¸­ä¼šç”¨åˆ°ç­¾åï¼Œæ‰€ä»¥åé¢è¿˜è·Ÿäº†ä¸€ä¸ªç­¾åç®—æ³•â€”â€”ECDSA/RSAã€‚é—®é¢˜å‡ºç°äº†ï¼ŒECDH å¯†é’¥äº¤æ¢ä¸­ï¼ŒECDH å¯†é’¥å¯¹ä¸æ˜¯ä¸´æ—¶ç”Ÿæˆçš„ï¼ŒæœåŠ¡å™¨æ˜¯ç›´æ¥å°†è¯ä¹¦ä½œä¸º ECDH å…¬é’¥å‘ç»™å®¢æˆ·ç«¯çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æœåŠ¡å™¨ä¸éœ€è¦è¿›è¡Œé¢å¤–çš„ç­¾åï¼Œé‚£ä¸ºä»€ä¹ˆä¼šå­˜åœ¨ ECDH_RSA/ECDH_ECDSA è¿™æ ·çš„ç®—æ³•åç§°å‘¢ï¼Ÿè¿™æ¶‰åŠä¸€ä¸ªè¢«å¹¿æ³›è¯¯è§£çš„é—®é¢˜ï¼šç®—æ³•åç§°ä¸­çš„ç­¾åç®—æ³•åˆ°åº•æ˜¯æŒ‡è¯ä¹¦ä¸Šæ‰€ä½¿ç”¨çš„ç­¾åè¿˜æ˜¯æ¡æ‰‹è¿‡ç¨‹ä¸­æ‰€ä½¿ç”¨çš„ç­¾åï¼Ÿææ¸…è¿™ä¸ªé—®é¢˜å¤§æ¦‚æ²¡ä»€ä¹ˆå®ç”¨ä»·å€¼ï¼Œä½†ä¸ææ¸…å®åœ¨è®©æˆ‘ä¸èˆ’æœğŸ˜£ã€‚åœ¨ä¸€ä¼— RFC ä¸­ï¼Œæˆ‘é€æ¸æ‰¾åˆ°äº†ç­”æ¡ˆã€‚RFC4346  The Transport Layer Security (TLS) Protocol Version 1.1# 7.4.2  Server CertificateThe certificate type MUST be appropriate for the selected ciphersuite&#39;s key exchange algorithm, and is generally an X.509v3certificate.  It MUST contain a key that matches the key exchangemethod, as follows.  Unless otherwise specified, the signingalgorithm for the certificate MUST be the same as the algorithmfor the certificate key.  Unless otherwise specified, the publickey MAY be of any length.Key Exchange Algorithm  Certificate Key TypeRSA                     RSA public key; the certificate MUST                        allow the key to be used for encryption.DHE_DSS                 DSS public key.DHE_RSA                 RSA public key that can be used for                        signing.DH_DSS                  Diffie-Hellman key. The algorithm used                        to sign the certificate MUST be DSS.DH_RSA                  Diffie-Hellman key. The algorithm used                        to sign the certificate MUST be RSA.è¿™æ˜¯ TLS1.1 çš„ RFCã€‚ä¸Šé¢çš„æ„æ€æ˜¯ï¼šè¯ä¹¦çš„ç­¾åç®—æ³•å¿…é¡»ä¸ç¡®å®šå¯†é’¥å¯¹ç±»å‹çš„ç®—æ³•ä¿æŒä¸€è‡´ã€‚æ–‡ä¸­è¿˜ä¸¾äº†å‡ ä¸ªä¾‹å­ï¼š            å¯†é’¥äº¤æ¢ç®—æ³•      å¯†é’¥å¯¹ç±»å‹      æ¡æ‰‹ç­¾åç®—æ³•ï¼ˆæ¨ç†ï¼‰      è¯ä¹¦ç­¾åç®—æ³•ï¼ˆæ¨ç†ï¼‰                  RSA      RSA      /      RSA              DHE_DSS      DSS      DSS      DSS              DHE_RSA      RSA      RSA      RSA              DH_DSS      DH      /      DSS              DH_RSA      DH      /      RSA        æ³¨ï¼ˆAIï¼‰ï¼šDSS æ˜¯ä¸€ä¸ªæ•°å­—ç­¾åæ ‡å‡†ï¼ŒDSA ç®—æ³•æ˜¯å…¶æœ€åˆçš„æ ¸å¿ƒå®ç°ï¼Œéšç€ DSS æ ‡å‡†çš„ç‰ˆæœ¬æ›´æ–°ï¼ŒRSA å’Œ ECDSA ä¹Ÿè¢«çº³å…¥æ ‡å‡†ä¸­ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°ä¸Šè¡¨ä¸­çš„ä¸¤ä¸ª DH å¯†é’¥äº¤æ¢ç®—æ³•æ²¡æœ‰éµå®ˆâ€œè¯ä¹¦çš„ç­¾åç®—æ³•å¿…é¡»ä¸ç¡®å®šå¯†é’¥å¯¹ç±»å‹çš„ç®—æ³•ä¿æŒä¸€è‡´â€çš„è§„å®šï¼Œè¿™æ˜¯å› ä¸º DH ç®—æ³•åªèƒ½ç”¨ä½œå¯†é’¥äº¤æ¢ï¼Œä¸èƒ½ç”¨æ¥ç­¾åï¼Œè¿™æ‰é¢å¤–è¿½åŠ äº†ä¸€ä¸ªç®—æ³•åç§°ï¼Œç”¨äºæŒ‡å®šè¯ä¹¦çš„ç­¾åç®—æ³•ã€‚RFC4346  The Transport Layer Security (TLS) Protocol Version 1.1# F.1.1.3  Diffie-Hellman Key Exchange with AuthenticationWhen Diffie-Hellman key exchange is used, the server can eithersupply a certificate containing fixed Diffie-Hellman parameters oruse the server key exchange message to send a set of temporaryDiffie-Hellman parameters signed with a DSS or RSA certificate.Temporary parameters are hashed with the hello.random values beforesigning to ensure that attackers do not replay old parameters.  Ineither case, the client can verify the certificate or signature toensure that the parameters belong to the server.è¿™æ®µè¯´æ˜æœåŠ¡å™¨å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æä¾› DH å‚æ•°ï¼šä¸€ç§æ˜¯ç›´æ¥å‘é€ DH è¯ä¹¦ï¼Œå®¢æˆ·ç«¯é€šè¿‡éªŒè¯è¯ä¹¦è¯æ˜ DH å‚æ•°çš„ç¡®å±äºæœåŠ¡å™¨ï¼›ä¸€ç§æ˜¯å‘é€å¸¦ç­¾åçš„ä¸´æ—¶ç”Ÿæˆçš„ DHE å‚æ•°ï¼Œå®¢æˆ·ç«¯é€šè¿‡éªŒç­¾è¯æ˜ DHE å‚æ•°çš„ç¡®å±äºæœåŠ¡å™¨ã€‚è¿™æ®µè‡³å°‘å¯ä»¥ä½è¯æˆ‘å¯¹ DH å’Œ DHE çš„ç†è§£æ˜¯æ­£ç¡®çš„ã€‚RFC4492  Elliptic Curve Cryptography (ECC) Cipher Suites for Transport Layer Security (TLS)# 2.1  ECDH_ECDSAIn ECDH_ECDSA, the serverâ€™s certificate MUST contain an ECDH-capablepublic key and be signed with ECDSA.# 2.2  ECDHE_ECDSAIn ECDHE_ECDSA, the serverâ€™s certificate MUST contain an ECDSAcapable public key and be signed with ECDSA.# 2.3  ECDH_RSAThis key exchange algorithm is the same as ECDH_ECDSA except that theserverâ€™s certificate MUST be signed with RSA rather than ECDSA.# 2.4  ECDHE_RSAThis key exchange algorithm is the same as ECDHE_ECDSA except thatthe serverâ€™s certificate MUST contain an RSA public key authorizedfor signing, and that the signature in the ServerKeyExchange messagemust be computed with the corresponding RSA private key.  The servercertificate MUST be signed with RSA.è¿™æ˜¯ TLS1.1 ECC ç®—æ³•çš„ RFCã€‚æ‰€è¿°é€»è¾‘ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä¸ä¸Šé¢çš„è¯´æ³•éƒ½å¯¹å¾—ä¸Šã€‚é—®é¢˜æ€»ç»“ - TLS1.1ï¼š  è¯ä¹¦çš„ç­¾åç®—æ³•å¿…é¡»ä¸ç¡®å®šå¯†é’¥å¯¹ç±»å‹çš„ç®—æ³•ä¿æŒä¸€è‡´ã€‚  RSA å¯†é’¥äº¤æ¢ä¸­æ²¡æœ‰ç­¾åçš„è¿‡ç¨‹ï¼Œæ•…ç®—æ³•åç§°ä¸­æ²¡æœ‰ç­¾åç®—æ³•ã€‚è¯ä¹¦çš„ç­¾åç®—æ³•é¡»ä¸º RSAã€‚  DHE å¯†é’¥äº¤æ¢ä¸­æœ‰ç­¾åçš„è¿‡ç¨‹ï¼Œæ•…ç®—æ³•åç§°ä¸­æŒ‡å®šäº†ç­¾åç®—æ³•ï¼Œå¦‚ ECDHE_RSAã€‚è¯ä¹¦çš„ç­¾åç®—æ³•é¡»ä¸è¯¥ç­¾åç®—æ³•ä¸€è‡´ã€‚  DH å¯†é’¥äº¤æ¢ä¸­æ²¡æœ‰ç­¾åçš„è¿‡ç¨‹ï¼Œå…¶ç®—æ³•åç§°ä¸­æœ¬ä¸éœ€è¦æŒ‡å®šç­¾åç®—æ³•ï¼Œç„¶è¯ä¹¦çš„ç­¾åç®—æ³•é¡»ä¸ç¡®å®šå¯†é’¥å¯¹ç±»å‹çš„ç®—æ³•ï¼ˆDHï¼‰ä¿æŒä¸€è‡´ï¼Œè€Œ DH ç®—æ³•æ— æ³•ç”¨äºç­¾åï¼Œæ•…ç®—æ³•åç§°ä¸­é¢å¤–æŒ‡å®šäº†è¯ä¹¦çš„ç­¾åç®—æ³•ï¼Œå¦‚ ECDH_RSAã€‚RFC5246  The Transport Layer Security (TLS) Protocol Version 1.2# A.7  Changes to RFC 4492As described in Sections 7.4.2 and 7.4.6, the restrictions on thesignature algorithms used to sign certificates are no longer tied tothe cipher suite (when used by the server) or theClientCertificateType (when used by the client).  Thus, therestrictions on the algorithm used to sign certificates specified inSections 2 and 3 of RFC 4492 are also relaxed.# 7.4.2  Server CertificateIf the client provided a &quot;signature_algorithms&quot; extension, then allcertificates provided by the server MUST be signed by ahash/signature algorithm pair that appears in that extension.  Notethat this implies that a certificate containing a key for onesignature algorithm MAY be signed using a different signaturealgorithm (for instance, an RSA key signed with a DSA key).  This isa departure from TLS 1.1, which required that the algorithms be thesame.  Note that this also implies that the DH_DSS, DH_RSA,ECDH_ECDSA, and ECDH_RSA key exchange algorithms do not restrict thealgorithm used to sign the certificate.  Fixed DH certificates MAY besigned with any hash/signature algorithm pair appearing in theextension.  The names DH_DSS, DH_RSA, ECDH_ECDSA, and ECDH_RSA arehistorical.# 7.4.1.4.1  Signature AlgorithmsThe client uses the &quot;signature_algorithms&quot; extension to indicate tothe server which signature/hash algorithm pairs may be used indigital signatures.# 7.4.1.4.1  Signature AlgorithmsThe semantics of this extension are somewhat complicated because thecipher suite indicates permissible signature algorithms but not hashalgorithms.  Sections 7.4.2 and 7.4.3 describe the appropriate rules.# 7.4.3  Server Key Exchange MessageIf the client has offered the &quot;signature_algorithms&quot; extension, thesignature algorithm and hash algorithm MUST be a pair listed in thatextension.  Note that there is a possibility for inconsistencieshere.  For instance, the client might offer DHE_DSS key exchange butomit any DSA pairs from its &quot;signature_algorithms&quot; extension.  Inorder to negotiate correctly, the server MUST check any candidatecipher suites against the &quot;signature_algorithms&quot; extension beforeselecting them.  This is somewhat inelegant but is a compromisedesigned to minimize changes to the original cipher suite design.è¿™æ˜¯ TLS1.2 çš„ RFCã€‚æ–°å¢äº† signature_algorithms æ‰©å±•å­—æ®µï¼Œå®ƒä»£è¡¨äº†å®¢æˆ·ç«¯æ”¯æŒçš„ç­¾åç®—æ³•ã€‚å¯†é’¥äº¤æ¢è¿‡ç¨‹ä¸­å¯èƒ½ç”¨åˆ°çš„ç­¾åç®—æ³•ç”±æ­¤å­—æ®µåå•†è€Œæ¥ã€‚è¯ä¹¦çš„ç­¾åç®—æ³•ä¸å†å— TLS ç®—æ³•åç§°çº¦æŸï¼Œåªé¡»ä½åˆ— signature_algorithms æ‰€æ”¯æŒçš„ç®—æ³•åˆ—è¡¨ä¸­ã€‚å¯¹äºå¯†é’¥äº¤æ¢è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„ç­¾åè¿‡ç¨‹ï¼ŒTLS ç®—æ³•åç§°ä¸­åªæŒ‡å®šäº†ç­¾åç®—æ³•ï¼Œå´æ²¡æœ‰å“ˆå¸Œç®—æ³•ï¼ˆåç§°ä¸­çš„å“ˆå¸Œç®—æ³•ä¸º HMAC æˆ– Finished æŠ¥æ–‡æ‰€ç”¨ï¼‰ï¼Œé‚æœ‰ signature_algorithmsï¼Œå…¶ä¸­çš„åç§°åŒæ—¶åŒ…å«äº†ç­¾åå’Œå“ˆå¸Œç®—æ³•ã€‚å¦‚æ­¤ï¼ŒTLS ç®—æ³•åç§°å’Œæ‰©å±•å­—æ®µéƒ½ç»™å‡ºäº†ç­¾åç®—æ³•åç§°ï¼Œä¸ºåŒæ—¶æ»¡è¶³äºŒè€…çº¦æŸï¼ŒæœåŠ¡å™¨å¿…é¡»äºˆä»¥æ£€æŸ¥ï¼Œæœ€ç»ˆåå•†é€‰æ‹©å‡ºçš„ç­¾åç®—æ³•é¡»åŒæ—¶å…¼å®¹ TLS ç®—æ³•åç§°å’Œæ‰©å±•å­—æ®µã€‚ä¸¾ä¾‹ï¼Œè‹¥ TLS ç®—æ³•åç§°ä¸º ECDHE_ECDSAï¼Œæ‰©å±• signature_algorithms ä¸­å«æœ‰ ecdsa_secp256r1_sha256, rsa_pkcs1_sha256ï¼Œé‚£ä¹ˆæœåŠ¡å™¨åº”åå•†é€‰æ‹©å‡º ecdsa_secp256r1_sha256 ä½œä¸ºç­¾åç®—æ³•ã€‚æ—¢å¦‚æ­¤ï¼Œè¯ä¹¦åº”é€‰ç”¨ ECC è¯ä¹¦ï¼Œä½†è¯ä¹¦è‡ªå·±çš„ç­¾åå¯ä»¥æ˜¯ RSAã€‚å¦ï¼Œå¯¹äºé™æ€ DH å¯†é’¥äº¤æ¢ç®—æ³•å¦‚ ECDH_ECDSA, ECDH_RSAï¼Œå…¶åç§°ä¸­çš„ç­¾åç®—æ³•å·²ç»ä¸å«æœ‰ä»»ä½•å®é™…çº¦æŸæ„ä¹‰ï¼Œæ­¤ç±»è¿·æƒ‘æ€§åè¶³çš„åç§°ä¹‹å­˜åœ¨çš†ç³»å†å²åŸå› ã€‚RFC8422  Elliptic Curve Cryptography (ECC) Cipher Suites for Transport Layer Security (TLS) Versions 1.2 and Earlier# 2.1  ECDHE_ECDSAIn ECDHE_ECDSA, the serverâ€™s certificate MUST contain an ECDSA- orEdDSA-capable public key.# 2.2  ECDHE_RSAThis key exchange algorithm is the same as ECDHE_ECDSA except thatthe serverâ€™s certificate MUST contain an RSA public key authorizedfor signing and the signature in the ServerKeyExchange message mustbe computed with the corresponding RSA private key.è¿™æ˜¯ TLS1.2 å‡ºç°åï¼Œæœ‰å…³ ECC ç®—æ³•çš„ RFCã€‚ç›¸æ¯” RFC4492 çš„è¡¨è¿°ï¼Œè¯¥è¡¨è¿°æ²¡æœ‰å†ç‰¹åˆ«æåŠè¯ä¹¦æœ¬èº«çš„ç­¾ååº”ä¸ºä½•ç®—æ³•ï¼Œå› ä¸ºè¯ä¹¦çš„ç­¾åç®—æ³•å·²ä¸å†å— TLS ç®—æ³•åç§°çº¦æŸï¼Œåªè¦ä½åˆ— signature_algorithms çš„ç®—æ³•åˆ—è¡¨ï¼Œæ˜¯ä»€ä¹ˆç®—æ³•éƒ½æœ‰å¯èƒ½ã€‚é—®é¢˜æ€»ç»“ - TLS1.2ï¼š  å¯†é’¥äº¤æ¢è¿‡ç¨‹ä¸­å¯èƒ½ç”¨åˆ°çš„ç­¾åç®—æ³•æ ¹æ®å®¢æˆ·ç«¯æ”¯æŒçš„ TLS ç®—æ³•å’Œ signature_algorithms æ‰©å±•åå•†è€Œæ¥ã€‚  è¯ä¹¦çš„ç­¾åç®—æ³•ä¸å†å— TLS ç®—æ³•åç§°çº¦æŸï¼Œåªé¡»ä½åˆ— signature_algorithms æ‰€æ”¯æŒçš„ç®—æ³•åˆ—è¡¨ä¸­ã€‚  é™æ€ DH å¯†é’¥äº¤æ¢ç®—æ³•å¦‚ ECDH_ECDSA, ECDH_RSAï¼Œå…¶åç§°ä¸­çš„ç­¾åç®—æ³•ä¸å…·æœ‰ä»»ä½•å®é™…çº¦æŸæ„ä¹‰ï¼Œæ­¤ç±»åç§°ä¹‹å­˜åœ¨çš†ç³»å†å²åŸå› ã€‚é—®é¢˜ç»“è®ºï¼šTLS ç®—æ³•åç§°ä¸­çš„ç­¾åç®—æ³•åŸºæœ¬æŒ‡çš„æ˜¯æ¡æ‰‹è¿‡ç¨‹ä¸­æ‰€ä½¿ç”¨çš„ç­¾åï¼Œè€Œéç‰¹æŒ‡è¯ä¹¦æœ¬èº«çš„ç­¾åï¼Œä¸è¿‡äºŒè€…ä¹Ÿå¹¶éæ¯«æ— å…³è”ï¼Œå…·ä½“ç»†èŠ‚å‚è§ä¸Šé¢çš„åˆ†æå’Œæ€»ç»“ã€‚æ„å»ºè¯ä¹¦é“¾å°è¯•ä½¿ç”¨ openssl æ„å»ºå¦‚ä¸‹è¯ä¹¦é“¾ã€‚Root CA Cert -&amp;gt; Intermediate CA Cert -&amp;gt; End Entity Certæ ¹ CA ä½œä¸ºä¿¡ä»»é”šç‚¹ï¼Œå®ƒçš„è¯ä¹¦æ˜¯è‡ªç­¾åè¯ä¹¦ï¼›æ ¹ CA ç»™ä¸­çº§ CA é¢å‘ä¸­çº§è¯ä¹¦ï¼›ä¸­çº§ CA ç»™ç”¨æˆ·é¢å‘æœ«ç«¯è¯ä¹¦ã€‚# build the root cert# generate private key for the root caopenssl genrsa -out root-ca-key.pem 2048# generate cert sign request of the root ca# here the key content of the `openssl-ca.cnf` will show at the endopenssl req -new -key root-ca-key.pem -out root-ca-csr.pem -config openssl-ca.cnf# fill the prompted fields like followsCountry Name (2 letter code) [AU]:CNState or Province Name (full name) [Some-State]:ZhejiangLocality Name (eg, city) []:HangzhouOrganization Name (eg, company) [Internet Widgits Pty Ltd]:lcatmiaoOrganizational Unit Name (eg, section) []:lcatmiao-caCommon Name (e.g. server FQDN or YOUR name) []:lcatmiao-ca.comEmail Address []:lcatmiao@test.com# self-sign the public key retrived implicitly from the cert sign request # of the root ca with the private key of also the root ca then get the # root certopenssl x509 -req -days 3650 -sha256 -extfile openssl-ca.cnf -extensions v3_ca -in root-ca-csr.pem -signkey root-ca-key.pem -out root-ca-cert.pem# build the intermediate cert# generate private key for the intermediate caopenssl genrsa -out intermediate-ca-key.pem 2048# generate cert sign request of the intermediate caopenssl req -new -key intermediate-ca-key.pem -out intermediate-ca-csr.pem -config openssl-ca.cnf# fill the prompted fields like followsCountry Name (2 letter code) [AU]:CNState or Province Name (full name) [Some-State]:ZhejiangLocality Name (eg, city) []:HangzhouOrganization Name (eg, company) [Internet Widgits Pty Ltd]:lcatmiaoOrganizational Unit Name (eg, section) []:lcatmiao-caCommon Name (e.g. server FQDN or YOUR name) []:lcatmiao-ca.comEmail Address []:lcatmiao@test.com# sign the public key retrived implicitly from the cert sign request # of the intermediate ca with the private key of the root ca then # get the intermediate certopenssl x509 -req -days 3650 -sha256 -extfile openssl-ca.cnf -extensions v3_ca -in intermediate-ca-csr.pem -CA root-ca-cert.pem -CAkey root-ca-key.pem -CAcreateserial -out intermediate-ca-cert.pem# build the end entity cert# generate private key for the end entityopenssl genrsa -out end-entity-key.pem 2048# generate cert sign request of the end entity# here the key content of the `openssl-user.cnf` will show at the endopenssl req -new -key end-entity-key.pem -out end-entity-csr.pem -config openssl-user.cnf# fill the prompted fields like followsCountry Name (2 letter code) [AU]:CNState or Province Name (full name) [Some-State]:ZhejiangLocality Name (eg, city) []:HangzhouOrganization Name (eg, company) [Internet Widgits Pty Ltd]:lcatmiaoOrganizational Unit Name (eg, section) []:lcatmiao-userCommon Name (e.g. server FQDN or YOUR name) []:172.168.10.110Email Address []:lcatmiao@test.com# sign the public key retrived implicitly from the cert sign request # of the end entity with the private key of the intermediate ca then # get the end entity certopenssl x509 -req -days 3650 -sha256 -extfile openssl-user.cnf -extensions usr_cert -in end-entity-csr.pem -CA intermediate-ca-cert.pem -CAkey intermediate-ca-key.pem -CAcreateserial -out end-entity-cert.pem# After doing all the operations above, `ls` shows that # all the files we have are as follows.end-entity-cert.pemend-entity-csr.pemend-entity-key.pemintermediate-ca-cert.pemintermediate-ca-cert.srlintermediate-ca-csr.pemintermediate-ca-key.pemopenssl-ca.cnfopenssl-user.cnfroot-ca-cert.pemroot-ca-cert.srlroot-ca-csr.pemroot-ca-key.pem# we can see the cert info by using this cmdopenssl x509 -in end-entity-cert.pem -noout -text# key content of the openssl-ca.cnf# the following is just a test example that only lists the modified cfg items[ req ]req_extensions = v3_req # The extensions to add to a certificate request[ v3_req ]basicConstraints = CA:TRUE# keyUsage = nonRepudiation, digitalSignature, keyEnciphermentsubjectAltName = @alt_names[ v3_ca ]subjectAltName = @alt_names[ alt_names ]DNS.1 = lcatmiao-ca.com# key content of the openssl-user.cnf# the following is just a test example that only lists the modified cfg items[ req ]req_extensions = v3_req # The extensions to add to a certificate request[ usr_cert ]subjectAltName = @alt_names[ v3_req ]basicConstraints = CA:FALSE# keyUsage = nonRepudiation, digitalSignature, keyEnciphermentsubjectAltName = @alt_names[ alt_names ]IP.1 = 172.168.10.110IP.2 = 172.168.10.105IP.3 = 172.168.10.106IP.4 = 172.168.10.107IP.5 = 172.168.10.108è‡³æ­¤ï¼Œä¸€ä¸ªç®€å•çš„è¯ä¹¦é“¾å°±æ„å»ºå¥½äº†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹è¿™ä¸ªè¯ä¹¦é“¾ã€‚# verify the root cert which is a self-sign certopenssl verify -CAfile root-ca-cert.pem root-ca-cert.pem# output:root-ca-cert.pem: OK# verify the intermediate certopenssl verify -trusted root-ca-cert.pem intermediate-ca-cert.pem# output:intermediate-ca-cert.pem: OK# verify the end entity certopenssl verify -partial_chain -trusted intermediate-ca-cert.pem end-entity-cert.pem# output:end-entity-cert.pem: OK# directly verify the whole cert chain which has only three levelsopenssl verify -CAfile root-ca-cert.pem -untrusted intermediate-ca-cert.pem end-entity-cert.pem# output:end-entity-cert.pem: OKæœ¬åœ°ä½¿ç”¨å‘½ä»¤è¡Œéƒ½èƒ½éªŒè¿‡ï¼Œä¸ä»£è¡¨ç½‘ç»œé€šä¿¡æ—¶ä¹Ÿèƒ½éªŒè¿‡ã€‚å®é™…é€šä¿¡çš„è¡Œä¸ºå—å„ç§é…ç½®çš„å½±å“ ï¼Œæ¯”å¦‚å®æµ‹å‘ç°æœ«ç«¯è¯ä¹¦ä¸­é…ç½®çš„ IP åœ°å€æˆ–è€…åŸŸåè¦ä¸æœåŠ¡å™¨ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¸é€šã€‚é¡ºå¸¦ä¸€æï¼Œå®é™…æŠ¥æ–‡ä¸­ï¼Œè¯ä¹¦é“¾çš„é¡ºåºï¼šæœ«ç«¯è¯ä¹¦åœ¨å‰ï¼Œä¸­çº§è¯ä¹¦æŒ‰å±‚çº§é¡ºåºä¾æ¬¡è·Ÿéšï¼Œæ ¹è¯ä¹¦ä¸€èˆ¬ä¸åŒ…å«åœ¨é“¾ä¸­ã€‚RFC5246  The Transport Layer Security (TLS) Protocol Version 1.2# 7.4.2  Server Certificatecertificate_list   This is a sequence (chain) of certificates.  The sender&#39;s   certificate MUST come first in the list.  Each following   certificate MUST directly certify the one preceding it.  Because   certificate validation requires that root keys be distributed   independently, the self-signed certificate that specifies the root   certificate authority MAY be omitted from the chain, under the   assumption that the remote end must already possess it in order to   validate it in any case.æ¶ˆé™¤æµè§ˆå™¨å®‰å…¨è­¦å‘Šå½“å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æ²¡èƒ½éªŒè¿‡æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦æ—¶ï¼Œå°±ä¼šæ˜¾ç¤ºå¦‚ä¸‹çš„å®‰å…¨è­¦å‘Šé¡µé¢ï¼Œå¹¶ä¸” URI æ ä¼šæœ‰â€œä¸å®‰å…¨â€çš„æç¤ºã€‚å¦‚æœæœåŠ¡å™¨çš„è¯ä¹¦æ˜¯æˆ‘ä»¬è‡ªå·±ç­¾å‘çš„ï¼Œè‡ªç„¶æ— æ³•è¢«æµè§ˆå™¨å†…ç½®çš„ CA è¯ä¹¦éªŒè¿‡ï¼Œæˆ‘ä»¬éœ€è¦å°†è‡ªå·±ç”Ÿæˆçš„æ ¹è¯ä¹¦å¯¼å…¥æµè§ˆå™¨æ‰è¡Œã€‚å°†è‡ªå·±ç”Ÿæˆçš„æ ¹è¯ä¹¦å¯¼å…¥æµè§ˆå™¨ï¼Œä½œä¸ºå—ä¿¡ä»»çš„é¢å‘æœºæ„ã€‚æ­¤åå†è®¿é—®æœåŠ¡å™¨ï¼Œå°±æ˜¯æ­£å¸¸çš„ https è®¿é—®äº†ã€‚  å¦‚æœæœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦ä¸æ­¢ä¸€ä¸ªï¼Œè€Œæ˜¯å¤šçº§è¯ä¹¦ï¼Œå³è¯ä¹¦é“¾çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆç†è®ºä¸Šå¯¼å…¥æµè§ˆå™¨çš„è¯ä¹¦åº”è¯¥æ˜¯è¯ä¹¦é“¾çš„å¦ä¸€éƒ¨åˆ†ï¼ŒäºŒè€…åˆä¸€è¦èƒ½æ„æˆå®Œæ•´çš„è¯ä¹¦é“¾æ‰è¡Œã€‚å‚è€ƒèµ„æ–™  ã€Šå›¾è§£HTTPã€‹  Keyless SSL: The Nitty Gritty Technical Details  The Illustrated TLS Connection: Every Byte Explained  RFC4346  The Transport Layer Security (TLS) Protocol Version 1.1  RFC4492  Elliptic Curve Cryptography (ECC) Cipher Suites for Transport Layer Security (TLS)  RFC5246  The Transport Layer Security (TLS) Protocol Version 1.2  RFC8422  Elliptic Curve Cryptography (ECC) Cipher Suites for Transport Layer Security (TLS) Versions 1.2 and Earlier  RFC7919  Negotiated Finite Field Diffie-Hellman Ephemeral Parameters for Transport Layer Security (TLS)è„šæ³¨            ä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†åçš„ Client Finished æŠ¥æ–‡ã€‚Â &amp;#8617;Â &amp;#8617;2              ä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†åçš„ Server Finished æŠ¥æ–‡ã€‚Â &amp;#8617;Â &amp;#8617;2              ä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†åçš„ Close Notify æŠ¥æ–‡ã€‚Â &amp;#8617;      "
  },
  
  {
    "title": "çœŸå€¼ä¸å†…å­˜çš„ç›¸äº’è½¬æ¢",
    "url": "/posts/%E7%9C%9F%E5%80%BC%E4%B8%8E%E5%86%85%E5%AD%98%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2/",
    "categories": "Tech, Misc",
    "tags": "",
    "date": "2024-03-30 17:58:00 +0800",
    





    "snippet": "æ€»è§ˆä¸€äº›è‡ªåˆ›çš„åè¯å®šä¹‰ï¼š      åœ¨å†…å­˜ä¸­å®é™…å­˜å‚¨çš„å€¼ç§°ä¸ºå†…å­˜å€¼ã€‚        å†…å­˜å€¼ç»è¿‡å­—èŠ‚åºè½¬æ¢åï¼Œä»¥æ— ç¬¦å·å½¢å¼å†™æˆçš„æ•°å€¼ï¼Œç§°ä¸ºå†…å­˜æ•°å€¼ã€‚å†…å­˜æ•°å€¼ç”¨æ¥ç›´è§‚çº¯ç²¹åœ°åæ˜ å†…å­˜å€¼çš„æ ·è²Œã€‚    ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºçš„å†…å­˜æ•°å€¼ç§°ä¸ºå†…å­˜äºŒè¿›åˆ¶ã€‚    ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºçš„å†…å­˜æ•°å€¼ç§°ä¸ºå†…å­˜åå…­è¿›åˆ¶ã€‚    ç”¨å…«è¿›åˆ¶è¡¨ç¤ºçš„å†…å­˜æ•°å€¼ç§°ä¸ºå†…å­˜å…«è¿›åˆ¶ã€‚    ç”¨æ— ç¬¦å·åè¿›åˆ¶è¡¨ç¤ºçš„å†…å­˜æ•°å€¼ç§°ä¸ºå†…å­˜åè¿›åˆ¶ã€‚        å¹³æ—¶ç›´æ¥çœ‹åˆ°çš„æ•°å€¼ï¼Œä»£ç é‡Œç›´æ¥ä¹¦å†™çš„æ•°å€¼ç­‰ï¼Œç§°ä¸ºçœŸå€¼ã€‚  è½¬æ¢è¿‡ç¨‹ä¸€å¼ å›¾ï¼šä¸€äº›è¯´æ˜ï¼š      ä¸å¦¨è®¤ä¸ºçœŸå€¼è¿™ä¸ªæ¦‚å¿µè¿˜åœ¨æ•°å­¦èŒƒç•´ï¼Œæœ‰æ­£ã€è´Ÿã€é›¶çš„æ¦‚å¿µï¼Œè¿˜æ²¡æœ‰è®¡ç®—æœºç§‘å­¦èŒƒç•´ä¸­æœ‰ç¬¦å·ã€æ— ç¬¦å·çš„æ¦‚å¿µã€‚æ¥ä¸‹æ¥ï¼Œè¿›å…¥è®¡ç®—æœºç§‘å­¦èŒƒç•´ï¼Œä½ å¯ä»¥è§†ä¹‹ä¸ºæœ‰ç¬¦å·æ•°æˆ–è€…æ— ç¬¦å·æ•°ã€‚        è´ŸçœŸå€¼åªèƒ½è§†ä½œæœ‰ç¬¦å·æ•°ï¼›éè´ŸçœŸå€¼æ—¢å¯ä»¥è§†ä½œæœ‰ç¬¦å·æ•°ï¼Œåˆå¯ä»¥è§†ä½œæ— ç¬¦å·æ•°ã€‚        å†…å­˜æ•°å€¼ç”¨æ¥ç›´è§‚çº¯ç²¹åœ°åæ˜ å†…å­˜å€¼çš„æ ·è²Œï¼Œæ‰€ä»¥å®ƒæœ¬èº«æ˜¯å®Œå…¨æ— è§†ç¬¦å·ä½çš„ï¼Œå³å°†å®ƒè§†ä½œæ— ç¬¦å·æ•°ã€‚å½“æˆ‘ä»¬çš„ç›®çš„ä¸æ˜¯æƒ³è¦åæ˜ å†…å­˜å€¼æ ·è²Œçš„æ—¶å€™ï¼Œå¯å°†å†…å­˜æ•°å€¼è§†ä½œæœ‰ç¬¦å·æ•°æˆ–è€…æ— ç¬¦å·æ•°ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„è½¬æ¢å¾—åˆ°å¯¹åº”çš„çœŸå€¼ã€‚        ç”¨ä¸åŒè¿›åˆ¶è¡¨ç¤ºä¸€ä¸ªæ•°æ—¶ï¼Œåå…­è¿›åˆ¶ã€å…«è¿›åˆ¶ã€äºŒè¿›åˆ¶å½¢å¼éƒ½æ˜¯å°†æ•°è§†ä½œæ— ç¬¦å·å½¢å¼ï¼Œå°†ç¬¦å·ä½è§†ä½œä¸€ä¸ªæ™®é€šçš„æ•°å€¼ä½åŒ…å«åœ¨å†…è¿›è¡Œè½¬æ¢çš„ï¼Œæ•…è½¬æ¢æˆçš„åå…­è¿›åˆ¶ã€å…«è¿›åˆ¶ã€äºŒè¿›åˆ¶å½¢å¼éƒ½æ˜¯æ— ç¬¦å·å½¢å¼ä¸”åªæœ‰æ— ç¬¦å·å½¢å¼ã€‚å°†ä¸€ä¸ªæ•°è½¬æ¢ä¸ºåè¿›åˆ¶æ—¶åˆ™ä¸åŒï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å°†æ•°è§†ä½œæ— ç¬¦å·å½¢å¼è¿›è¡Œè½¬æ¢ï¼Œä¹Ÿå¯ä»¥å°†æ•°è§†ä½œæœ‰ç¬¦å·å½¢å¼è¿›è¡Œè½¬æ¢ã€‚è‹¥å°†æ•°è§†ä½œæ— ç¬¦å·å½¢å¼ï¼Œåˆ™å°†ç¬¦å·ä½è§†ä½œä¸€ä¸ªæ™®é€šçš„æ•°å€¼ä½åŒ…å«åœ¨å†…è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆçš„åè¿›åˆ¶å½¢å¼æ˜¯æ— ç¬¦å·å½¢å¼ï¼›è‹¥å°†æ•°è§†ä½œæœ‰ç¬¦å·å½¢å¼ï¼Œåˆ™ç¬¦å·ä½ä¼šè¢«çœŸçš„è§†ä½œç¬¦å·ä½è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆçš„åè¿›åˆ¶å½¢å¼æ˜¯æœ‰ç¬¦å·å½¢å¼ã€‚    å³ï¼Œåªå­˜åœ¨ä»¥ä¸‹è¯´æ³•ï¼š    ä»¥æ— ç¬¦å·åå…­è¿›åˆ¶å½¢å¼æ‰“å°å†…å­˜æ•°å€¼ã€‚ï¼ˆæ‰“å°å†…å­˜åå…­è¿›åˆ¶ï¼‰    ä»¥æ— ç¬¦å·å…«è¿›åˆ¶å½¢å¼æ‰“å°å†…å­˜æ•°å€¼ã€‚ï¼ˆæ‰“å°å†…å­˜å…«è¿›åˆ¶ï¼‰    ä»¥æ— ç¬¦å·äºŒè¿›åˆ¶å½¢å¼æ‰“å°å†…å­˜æ•°å€¼ã€‚ï¼ˆæ‰“å°å†…å­˜äºŒè¿›åˆ¶ï¼‰    ä»¥æ— ç¬¦å·åè¿›åˆ¶å½¢å¼æ‰“å°å†…å­˜æ•°å€¼ã€‚ï¼ˆæ‰“å°å†…å­˜åè¿›åˆ¶ï¼‰    ä»¥æœ‰ç¬¦å·åè¿›åˆ¶å½¢å¼æ‰“å°å†…å­˜æ•°å€¼ã€‚  ä»çœŸå€¼åˆ°å†…å­˜ï¼ˆå†™ï¼‰&amp;gt; çœŸå€¼ä¸€çœŸå€¼ï¼š+1Â» æœ‰ç¬¦å·åŸç ï¼š0,000 0000 0000 0000 0000 0000 0000 0001åç ï¼š0,000 0000 0000 0000 0000 0000 0000 0001è¡¥ç ï¼š0,000 0000 0000 0000 0000 0000 0000 0001å†…å­˜äºŒè¿›åˆ¶ï¼š0000 0000 0000 0000 0000 0000 0000 0001å†…å­˜åå…­è¿›åˆ¶ï¼š0x00 00 00 01Â» æ— ç¬¦å·å†…å­˜äºŒè¿›åˆ¶ï¼š0000 0000 0000 0000 0000 0000 0000 0001å†…å­˜åå…­è¿›åˆ¶ï¼š0x00 00 00 01&amp;gt; çœŸå€¼äºŒçœŸå€¼ï¼š-1Â» æœ‰ç¬¦å·åŸç ï¼š1,000 0000 0000 0000 0000 0000 0000 0001åç ï¼š1,111 1111 1111 1111 1111 1111 1111 1110è¡¥ç ï¼š1,111 1111 1111 1111 1111 1111 1111 1111å†…å­˜äºŒè¿›åˆ¶ï¼š1111 1111 1111 1111 1111 1111 1111 1111å†…å­˜åå…­è¿›åˆ¶ï¼š0xff ff ff ffÂ» æ— ç¬¦å·çœŸå€¼ -1 æ— æ³•çœ‹æˆæ— ç¬¦å·æ•°ã€‚ä½†æ˜¯ä¸¾ä¸€ä¸ªç”¨æ— ç¬¦å·æ•°å­˜å‚¨ -1 çš„ä¾‹å­å¦‚ä¸‹ï¼šunsigned a = -1;printf(&quot;a: %u\\n&quot;, a);  // 4294967295ï¼Œå³ 2^32 - 1ã€‚å¯ä»¥è¿™æ ·ç†è§£ï¼šÂ»&amp;gt; å†™-1 æœ¬èº«åªèƒ½çœ‹æˆæœ‰ç¬¦å·æ•°ï¼Œæ­¤å¤„ä½œä¸º int ç±»å‹çš„å¸¸é‡å­˜å‚¨ã€‚å†…å­˜äºŒè¿›åˆ¶ï¼š1111 1111 1111 1111 1111 1111 1111 1111å­˜å…¥å†…å­˜ã€‚Â»&amp;gt; èµ‹å€¼ä¸Šè¿°å†…å­˜äºŒè¿›åˆ¶è¢«èµ‹å€¼ç»™å˜é‡ aã€‚Â»&amp;gt; è¯»å˜é‡ a æ˜¯æ— ç¬¦å·æ•°ï¼Œæ‰€ä»¥å…¶å†…å­˜äºŒè¿›åˆ¶è¢«è§£é‡Šæˆæ— ç¬¦å·æ•°ï¼Œç›´æ¥è½¬æ¢ä¸ºçœŸå€¼ï¼Œå³ $2^{32}-1$ã€‚ä»å†…å­˜åˆ°çœŸå€¼ï¼ˆè¯»ï¼‰&amp;gt; å†…å­˜å€¼ä¸€å†…å­˜äºŒè¿›åˆ¶ï¼š0000 0000 0000 0000 0000 0000 0000 0001Â» æœ‰ç¬¦å·è¡¥ç ï¼š0,000 0000 0000 0000 0000 0000 0000 0001åç ï¼š0,000 0000 0000 0000 0000 0000 0000 0001åŸç ï¼š0,000 0000 0000 0000 0000 0000 0000 0001çœŸå€¼ï¼š+1Â» æ— ç¬¦å·çœŸå€¼ï¼š+1&amp;gt; å†…å­˜å€¼äºŒå†…å­˜äºŒè¿›åˆ¶ï¼š1111 1111 1111 1111 1111 1111 1111 1111Â» æœ‰ç¬¦å·è¡¥ç ï¼š1,111 1111 1111 1111 1111 1111 1111 1111åç ï¼š1,000 0000 0000 0000 0000 0000 0000 0000åŸç ï¼š1,000 0000 0000 0000 0000 0000 0000 0001çœŸå€¼ï¼š-1Â» æ— ç¬¦å·çœŸå€¼ï¼š4294967295ï¼Œå³ $2^{32}-1$ã€‚"
  },
  
  {
    "title": "Cè¯­è¨€æ ‡å‡†å‘å±•å†å²",
    "url": "/posts/C%E8%AF%AD%E8%A8%80%E6%A0%87%E5%87%86%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2/",
    "categories": "Tech, C",
    "tags": "c",
    "date": "2024-02-24 16:53:37 +0800",
    





    "snippet": "å¯¹å„ç§ C æ ‡å‡†è¿›è¡Œç®€è¿°ã€‚å‚è€ƒèµ„æ–™ï¼šStandards (Using the GNU Compiler Collection (GCC))ANSI Cï¼ŒISO C89/90ANSI C æ˜¯æœ€åˆçš„ C è¯­è¨€æ ‡å‡†ï¼Œåœ¨ 1989 å¹´è·å¾—æ‰¹å‡†ï¼Œ1990 å¹´å‘å¸ƒã€‚1990 å¹´æ™šäº›æ—¶å€™ï¼Œè¯¥æ ‡å‡†æˆä¸ºäº† ISO C89/90 æ ‡å‡†ã€‚è¿™ä¸¤ä¸ªæ ‡å‡†ä¹‹é—´æ²¡æœ‰æŠ€æœ¯ä¸Šçš„å·®å¼‚ï¼Œå¯ä»¥å½“ä½œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†ã€‚C94/95 æ˜¯è¿™ä¸€æ ‡å‡†çš„ä¿®è®¢ç‰ˆæœ¬ã€‚ISO C991999 å¹´ï¼ŒISO å‘å¸ƒäº†æ–°çš„ C æ ‡å‡†ï¼Œå³ ISO C99ã€‚ISO C11ï¼ŒISO C172011 å¹´ï¼ŒISO å‘å¸ƒäº†æ–°çš„ C æ ‡å‡†ï¼Œå³ ISO C11ã€‚2017 å¹´ï¼ŒISO ç¼–åˆ¶äº†ä¸€ä¸ªä¿®æ­£ç‰ˆæœ¬ï¼Œå¹¶äº 2018 å¹´å‘å¸ƒï¼Œè¯¥ç‰ˆæœ¬æˆä¸ºäº†æ–°çš„ C æ ‡å‡†ï¼Œå³ ISO C17ã€‚åœ¨ gcc ä¸­ï¼Œå¯é€šè¿‡ -std=c11 æˆ– -std=iso9899:2011 æŒ‡å®š C11 æ ‡å‡†ï¼›é€šè¿‡ -std=c17 æˆ– -std=iso9899:2017 æŒ‡å®š C17 æ ‡å‡†ã€‚è‹¥é€šè¿‡ -std=c11 æŒ‡å®š C11 æ ‡å‡†ï¼Œä¹Ÿä¼šåº”ç”¨ C17 ä¸­çš„ä¿®æ­£ï¼Œåªä¸è¿‡ __STDC_VERSION__ çš„å€¼ä¸º C11 å¯¹åº”çš„å€¼ï¼Œé™¤æ­¤ä»¥å¤–å’Œ C17 æ²¡æœ‰åŒºåˆ«ã€‚GNU Extensionsæ ‡å‡†æ˜¯æ ‡å‡†ï¼Œå®ç°æ˜¯å®ç°ã€‚gcc åœ¨å®ç°ä¸Šè¿°æ ‡å‡†çš„åŒæ—¶ä¹Ÿæ·»åŠ äº†ä¸€äº›è‡ªå·±çš„æ‰©å±•åŠŸèƒ½ã€‚æŠŠå¸¦ GNU æ‰©å±•çš„ C æ ‡å‡†ç›´æ¥å½“ä½œ GNU C æ ‡å‡†ï¼Œé—®é¢˜ä¹Ÿä¸å¤§ã€‚ä¾‹å¦‚å¯ä»¥æŒ‡å®š -std=gnu90 (for C90 with GNU extensions)ã€-std=gnu99 (for C99 with GNU extensions)ã€-std=gnu11 (for C11 with GNU extensions)ã€‚gcc å°†ä¸€äº› C99 ä¸­çš„ç‰¹æ€§ä½œä¸º C90 æ¨¡å¼çš„æ‰©å±•ï¼Œå°†ä¸€äº› C11 ä¸­çš„ç‰¹æ€§ä½œä¸º C90 å’Œ C99 æ¨¡å¼çš„æ‰©å±•ã€‚è¿™ä¸ªæŒ‰æˆ‘çš„ç†è§£ï¼Œå¤§æ¦‚å¯ä»¥è¿™ä¹ˆçœ‹ï¼šåªæœ‰ç»è¿‡äº†å¹¿æ³›çš„å®è·µå’Œæ—¶é—´æ£€éªŒçš„ç‰¹æ€§æ‰èƒ½è¢«å†™å…¥æ ‡å‡†ã€‚gcc æ‰©å±•å°±åƒæ˜¯å…ˆè¡Œè€…ï¼Œåœ¨ç»è¿‡å¹¿æ³›æ£€éªŒåï¼Œè¢«æ¥å—ä¸ºæ–°æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚"
  },
  
  {
    "title": "å‡½æ•°ä¼ å‚",
    "url": "/posts/%E5%87%BD%E6%95%B0%E4%BC%A0%E5%8F%82/",
    "categories": "Tech, C",
    "tags": "c",
    "date": "2022-11-27 23:30:00 +0800",
    





    "snippet": "ä¼ å‚åˆ†ç±»ä»ä¼ å‚ç±»å‹ä¸Šçœ‹ä¼ å‚åˆ†ä¸ºä¼ å€¼å’Œä¼ æŒ‡é’ˆã€‚  ä¼ æŒ‡é’ˆæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¼ å€¼ï¼Œåªä¸è¿‡ä¼ çš„æ˜¯æŒ‡é’ˆå€¼ã€‚ç”±äºä¼ ä¸€èˆ¬å€¼å’Œä¼ æŒ‡é’ˆå€¼è¿˜æ˜¯æœ‰ç‚¹åŒºåˆ«ï¼Œæ‰€ä»¥åˆ†æˆä¸¤ç§è¯´æ³•ã€‚ä¼ å€¼ä¸€èˆ¬å°±æŒ‡ä¼ ä¸€èˆ¬å€¼ï¼Œä¼ æŒ‡é’ˆä¸“é—¨ç”¨äºæè¿°ä¼ æŒ‡é’ˆå€¼ã€‚ä»ä¼ å‚è¡Œä¸ºä¸Šçœ‹ä¼ å‚åˆ†ä¸ºå€¼å¤åˆ¶å’Œä¼ è‡ªå·±ã€‚  ä¼ è‡ªå·±æœ¬è´¨ä¸Šä¹Ÿæ˜¯å€¼å¤åˆ¶ï¼Œåªä¸è¿‡æ˜¯å–åœ°å€ä¼ æ— åæŒ‡é’ˆï¼Œå½¢å‚ç›´æ¥æ¥ä¸Šï¼›è€Œä¸æ˜¯ç›´æ¥ä¼ æœ‰åæŒ‡é’ˆã€‚ä¾‹å¦‚ï¼š// å‡½æ•°è°ƒç”¨func1(id, index, flag, &amp;amp;count);func2(arr);// å‡½æ•°å®šä¹‰å¤´func1(int id, int index, int flag, int *p_count)func2(int *arr)å…¶ä¸­ï¼Œidï¼Œindexï¼Œflag æ˜¯å€¼å¤åˆ¶ï¼Œè¿™æ¯«æ— ç–‘ä¹‰ã€‚arr æ˜¯æ•°ç»„åï¼Œè¿™é‡Œé€€åŒ–ä¸ºæŒ‡é’ˆï¼Œç›´æ¥è¿›è¡Œäº†ä¼ å‚ï¼Œä¹Ÿå°±æ˜¯æˆ‘è¯´çš„â€œç›´æ¥ä¼ æœ‰åæŒ‡é’ˆâ€ï¼Œæ‰€ä»¥æˆ‘å°†å…¶å½’ä¸ºå€¼å¤åˆ¶ã€‚&amp;amp;count æ˜¯å–åœ°å€ä¼ æ— åæŒ‡é’ˆï¼Œç„¶åå½¢å‚ç›´æ¥æ¥ä¸Šï¼Œæ˜¯ä¼ è‡ªå·±ã€‚ä¼ å‚åˆ†æä¼ å€¼æ˜¯å€¼å¤åˆ¶ã€‚ä¼ æŒ‡é’ˆæœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æ˜¯å€¼å¤åˆ¶ï¼Œç¬¬äºŒç§æ˜¯ä¼ è‡ªå·±ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç»éªŒï¼Œä¸ä¸€å®šæ­£ç¡®ï¼Œåªèƒ½è¯´è¿™äº›åœºæ™¯é‡åˆ°çš„æ¯”è¾ƒå¤šï¼Œçœ‹ä¸ªçœ¼ç†Ÿå°±æˆã€‚  å€¼å¤åˆ¶å€¾å‘äºä½¿ç”¨ï¼Œä¼ è‡ªå·±å€¾å‘äºèµ‹å€¼ã€‚  ä¸€èˆ¬è€Œè¨€ï¼Œå®å‚ç›´æ¥ä¼ ä¸ºå€¼å¤åˆ¶ï¼Œå®å‚å–åœ°å€ä¸ºä¼ è‡ªå·±ã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œå®å‚å–åœ°å€å¯ä»¥ç†è§£ä¸ºèµ‹å€¼ã€‚  å½¢å‚ä¸­çš„å€¼å˜é‡å±äºå€¼å¤åˆ¶ï¼Œå½¢å‚ä¸­çš„æŒ‡é’ˆå˜é‡æœ‰ä¸Šå›¾ä¸¤ç§æƒ…å†µã€‚ï¼ˆå…¶å®å°±æ˜¯ä¼ å‚åˆ†æçš„ä¸¤æ¡ï¼Œè¿™é‡Œç€çœ¼äºå½¢å‚ã€‚è¯¥ç»éªŒä¸€å®šæ­£ç¡®ã€‚ï¼‰  æ— è®ºæ˜¯ä¸ºäº†ä½¿ç”¨è¿˜æ˜¯èµ‹å€¼ï¼Œä¼ æ•°ç»„ä¸€èˆ¬ç›´æ¥ä¼ æ•°ç»„åã€‚  ä»¥ char ä¸ºä¾‹ã€‚å‡½æ•°å½¢å‚ä¸­ï¼Œç»å¸¸èƒ½çœ‹è§ const char * å’Œ char * çš„ä½¿ç”¨ã€‚const char * æ˜¾ç„¶ä¸ä¼šæ›´æ”¹æŒ‡é’ˆæ‰€æŒ‡å‘å†…å­˜çš„å†…å®¹ï¼Œä½†æ˜¯ char * å°±å¯èƒ½æ›´æ”¹æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å®¹ï¼Œè¿™ä¸€ç‚¹åœ¨å®è·µä¸­å€¼å¾—æ³¨æ„ï¼Œå³æˆ‘ä»¬çš„å†…å­˜ä¼ é€’ç»™ char * åæœ‰å¯èƒ½ä¼šè¢«æ›´æ”¹ã€‚è¿™é‡Œå¯¹ç»éªŒ4å¤šè¯´å‡ å¥ã€‚æˆ‘æ›¾ç»ä»¥ä¸ºï¼Œè‹¥æ˜¯ä¸ºäº†ç»™æ•°ç»„èµ‹å€¼ï¼Œåº”è¯¥å¯¹æ•°ç»„åå–åœ°å€ä¼ å‚ã€‚ä¸€æ˜¯å› ä¸ºè¾“å‡ºå‚æ•°ä¸€èˆ¬éƒ½åŠ &amp;amp;ï¼Œå†™æˆç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºå“ªäº›æ˜¯å‡ºå‚ï¼Œå¯è¯»æ€§é«˜ã€‚äºŒæ˜¯è§‰å¾—å¹³æ—¶æ•°ç»„æŒ‡é’ˆçš„æ¦‚å¿µéƒ½æ²¡æ€ä¹ˆç”¨è¿‡ï¼Œåœ¨è¿™é‡Œæ­£å¥½ç”¨èµ·æ¥ï¼Œå²‚ä¸ç¾å“‰ã€‚// è¿™æ˜¯é—®é¢˜å†™æ³•#include &amp;lt;stdio.h&amp;gt;void func(int, int (*)[], int *);int main(){    int i = 0;    int arr[10] = {0};    int count = 5;    int sum = 0;    func(count, &amp;amp;arr, &amp;amp;sum);    for (i = 0; i &amp;lt; count; i++)    {        printf(&quot;%d\\n&quot;, arr[i]);    }    printf(&quot;sum = %d\\n&quot;, sum);        return 0;}void func(int count, int (*parr)[10], int *p_sum){    int i = 0;    int sum = 0;    for (i = 0; i &amp;lt; count; i++)    {        (*parr)[i] = i;        // parr[0][i] = i;        sum += i;    }    *p_sum = sum;}ç„¶è€Œåæ¥æˆ‘å‘ç°äº†è‡ªå·±çš„é”™è¯¯ï¼Œä¸è¦è¿™æ ·ä¼ å‚ã€‚  åŸå› ä¸€ï¼šæ²¡äººè¿™ä¹ˆç”¨ã€‚  åŸå› äºŒï¼šmemcpy()ï¼Œsnprintf() è¿™ç§åº“å‡½æ•°ï¼Œå¹³æ—¶ä½¿ç”¨çš„æ—¶å€™éƒ½æ˜¯ç›´æ¥ä¼ æ•°ç»„åçš„ã€‚  åŸå› ä¸‰ï¼šå¯è¯»æ€§æœªå¿…å¥½ã€‚å‡ºå‚éƒ½åŠ äº†&amp;amp;ï¼Œç®—æ˜¯æ»¡è¶³äº†å¼ºè¿«ç—‡ï¼Œä½†æ˜¯å‡½æ•°å®šä¹‰é‡Œé¢å°±è¦å†™æˆ (*parr)[i] = i æˆ–è€… parr[0][i] = i ï¼Œè¿™æ˜¾å¾—å¤æ‚ã€‚  åŸå› å››ï¼šæ€§èƒ½ä¸ä½³ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œ(*parr)[i] = i æˆ–è€… parr[0][i] = i è¦å–å€¼ä¸¤æ¬¡ã€‚  åŸå› äº”ï¼šæ•°ç»„æŒ‡é’ˆæœ‰ç”¨ï¼Œä½†å‹æ ¹ä¸æ˜¯è¿™ä¹ˆç”¨çš„ã€‚ç›´æ¥ä¼ äºŒç»´æ•°ç»„åçš„æ—¶å€™ï¼Œå½¢å‚å°±å¾—å®šä¹‰æ•°ç»„æŒ‡é’ˆï¼Œè¿™æ‰æ˜¯æ•°ç»„æŒ‡é’ˆæ­£å¸¸çš„ç”¨æ³•ã€‚æ‰€ä»¥ç»™æ•°ç»„åå–åœ°å€ä¼ å‚æ˜¯å¤šæ­¤ä¸€ä¸¾ã€‚ä¸Šè¿°ä¾‹å­çš„æ­£ç¡®å†™æ³•åº”ä¸ºï¼š// è¿™æ˜¯æ­£å¸¸å†™æ³•#include &amp;lt;stdio.h&amp;gt;void func(int, int *, int *);int main(){    int i = 0;    int arr[10] = {0};    int count = 5;    int sum = 0;    func(count, arr, &amp;amp;sum);    for (i = 0; i &amp;lt; count; i++)    {        printf(&quot;%d\\n&quot;, arr[i]);    }    printf(&quot;sum = %d\\n&quot;, sum);        return 0;}void func(int count, int *p, int *p_sum){    int i = 0;    int sum = 0;    for (i = 0; i &amp;lt; count; i++)    {        p[i] = i;        sum += i;    }    *p_sum = sum;}"
  },
  
  {
    "title": "è®°ä¸€æ¬¡æŒ‡é’ˆå¼ºè½¬å¯¼è‡´è„æ•°æ®å†™å…¥é—®é¢˜",
    "url": "/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%8C%87%E9%92%88%E5%BC%BA%E8%BD%AC%E5%AF%BC%E8%87%B4%E8%84%8F%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5%E9%97%AE%E9%A2%98/",
    "categories": "Tech, C",
    "tags": "c",
    "date": "2022-11-26 11:40:00 +0800",
    





    "snippet": "äº¤æ¥é¡¹ç›®çš„æ—¶å€™é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œæ¶‰åŠæŒ‡é’ˆã€å­—èŠ‚åºã€ç»“æ„ä½“å†…å­˜å¯¹é½ç›¸å…³çŸ¥è¯†ï¼Œä¸‰å¤§çŸ¥è¯†åŒ…å«è§„åˆ™çš„å…±åŒä½œç”¨å¯¼è‡´äº†è¿™ä¸€é—®é¢˜ã€‚é—®é¢˜æè¿°æ—¶é—´æœ‰äº›ä¹…è¿œäº†ï¼Œç»“åˆä¸‹å›¾æ¥è®²ï¼Œæ€»ä¹‹ï¼Œå°±æ˜¯å˜é‡ vsys_id è«åå…¶å¦™åœ°è¢«æ›´æ”¹äº†ã€‚å½“æ—¶æ£€æŸ¥äº†å¯èƒ½å‡ºç°é—®é¢˜çš„ç›¸å…³å‡½æ•°ï¼Œä»¥åŠå‡½æ•°ä¼ å‚è¿‡ç¨‹ï¼Œå‡æ²¡æœ‰å‘ç°é—®é¢˜æ‰€åœ¨ï¼Œç”šè‡³åœ¨è¿™äº›åœ°æ–¹è¿ vsys_id å˜é‡åéƒ½æ²¡æœ‰å‡ºç°ï¼Œä»¥è‡³äºä¸€ç›´æ²¡èƒ½å®šä½é—®é¢˜ã€‚æœ€åå‘ç° vsys_id è¢«è„æ•°æ®å†™å…¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ›´æ”¹å˜é‡ policy_id çš„åŒæ—¶æŠŠ vsys_id ä¹Ÿç»™æ”¹äº†ï¼Œä»è€Œå¯¼è‡´äº†é—®é¢˜ã€‚é—®é¢˜åˆ†ææ ¹æ®ç»“æ„ä½“å†…å­˜å¯¹é½ç”»å‡ºç»“æ„ï¼Œå¯ä»¥å‘ç° vsys_id å’Œ policy_id æ˜¯ç´§æŒ¨ç€çš„ã€‚åŸå…ˆæŒ‡å‘ policy_id çš„æŒ‡é’ˆæ˜¯ u16 * ï¼ŒåŸä»£ç å¯¹å…¶è¿›è¡Œäº†ä¸€ä¸ªå¼ºè½¬æˆ u32 * çš„æ“ä½œï¼Œè¿™æ ·ä¸€æ¥ï¼Œè¿™ä¸ªæŒ‡é’ˆå°±æŒ‡å‘äº† policy_id åŠ  vsys_id çš„4ä¸ªå­—èŠ‚ï¼Œç„¶ååŸä»£ç å¯¹è¯¥æŒ‡é’ˆå–å€¼èµ‹å€¼1ï¼Œç›¸å½“äºæŠŠè¿™4ä¸ªå­—èŠ‚å½“æˆä¸€ä¸ªå˜é‡èµ‹å€¼äº†ã€‚è¿™é‡Œä¼¼ä¹æ˜¯ç”±äºä¼ å‚çš„æ—¶å€™ç±»å‹ä¸åŒ¹é…ï¼Œäºæ˜¯ä½¿ç”¨äº†å¼ºè½¬ï¼Œå…·ä½“ä¸ºä»€ä¹ˆè¦å¼ºè½¬ä¹Ÿè®°ä¸å¤ªæ¸…äº†ã€‚æ€»ä¹‹æŒ‰ç…§æ­£å¸¸çš„é€»è¾‘ï¼Œä»£ç å…¶å®æ˜¯è¦å¯¹ policy_id èµ‹å€¼æˆ1ã€‚å¼ºè½¬åèµ‹å€¼çš„æƒ…å†µå¦‚å›¾æ‰€ç¤ºï¼Œåœ¨X86æ¶æ„ä¸‹ï¼Œçš„ç¡®åªæ˜¯å¯¹ policy_id èµ‹å€¼æˆ1ï¼Œæ²¡ä»€ä¹ˆä¸å¯¹çš„ï¼Œæ‰€ä»¥æµ‹è¯•çš„æ—¶å€™X86æ¶æ„æ²¡å•¥é—®é¢˜ï¼›åœ¨MIPSæ¶æ„ä¸‹ï¼Œç”±äºå­—èŠ‚åºç›¸åï¼Œ1åè€Œæ˜¯å†™ç»™äº† vsys_id ï¼Œä»è€Œå¼•å‘äº†é—®é¢˜ã€‚  ç»“æ„ä½“å†…å­˜å¯¹é½è¿™é‡Œä¸èµ˜è¿°ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼š  æˆå‘˜çš„åç§»é‡è¦æ˜¯è‡ªèº«å¤§å°çš„æ•´æ•°å€ï¼Œ  ç»“æ„ä½“æ€»å¤§å°è¦æ˜¯æœ€å¤§æˆå‘˜å¤§å°çš„æ•´æ•°å€ã€‚    è‡³äºå­—èŠ‚åºï¼Œå›¾ä¸­æè¿°å·²ç»å¾ˆæ¸…æ¥šã€‚æœ¬æ¥æ˜¯ç»™ policy_id èµ‹å€¼ï¼Œå´åŒæ—¶æ”¹æ‰äº†ç›¸é‚»çš„ vsys_id çš„å€¼ï¼Œä¹Ÿéš¾æ€ªä¹ä¸€çœ‹å®šä½ä¸äº†é—®é¢˜ã€‚æœ€åç†è§£äº†é—®é¢˜æˆå› ï¼Œä¹Ÿå°±é¡ºåˆ©è§£å†³äº†ã€‚æœ¬æ–‡å¯¹å¯¼è‡´è¯¥é—®é¢˜çš„åŸå› åšä¸€ä¸ªè®°å½•ã€‚"
  },
  
  {
    "title": "C-Cppä¸­çš„constå…³é”®å­—",
    "url": "/posts/C-Cpp%E4%B8%AD%E7%9A%84const%E5%85%B3%E9%94%AE%E5%AD%97/",
    "categories": "Tech, C",
    "tags": "c",
    "date": "2022-05-08 21:30:00 +0800",
    





    "snippet": "è®°å½•ä¸€æ³¢ const å…³é”®å­—çš„çŸ¥è¯†ç‚¹ã€‚æ¦‚è¿°const æ„ä¸ºä¸å¯ä¿®æ”¹ã€‚const ä¿®é¥°çš„å˜é‡ä¸å¯è¢«ä¿®æ”¹ï¼Œ æ˜¯åªè¯»å˜é‡ï¼Œä¹Ÿç§°è¿™æ ·çš„å˜é‡ä¸ºå¸¸é‡ã€‚const ä¿®é¥°çš„å˜é‡ä¸å¯ä¿®æ”¹è¿™ä¸€ç‚¹æ˜¯è¯­æ³•å±‚é¢çš„é™åˆ¶ï¼Œé€šè¿‡ä¸€äº›åˆ»æ„æ„é€ çš„æ“ä½œä»ç„¶å¯ä»¥ä¿®æ”¹å˜é‡çš„å€¼ï¼Œåªæ˜¯ä¸€èˆ¬ä¸ä¼šè¿™æ ·åšã€‚const ä¹Ÿå¯ä»¥ä¿®é¥°æŒ‡é’ˆï¼Œæ—¢å¯ä»¥é™åˆ¶æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ï¼Œåˆå¯ä»¥é™åˆ¶æŒ‡é’ˆæœ¬èº«ã€‚const ä¿®é¥°å˜é‡const int VexNum = 20;int const VexNum = 20;ä¸Šè¿°ä¸¤ç§å†™æ³•çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ç¬¬ä¸€ç§ã€‚const ä¿®é¥°å˜é‡ï¼Œå³å®šä¹‰äº†å¸¸é‡ VexNumã€‚  const å®šä¹‰çš„å¸¸é‡ä¸€èˆ¬å•è¯é¦–å­—æ¯å¤§å†™ã€‚è¿™ä¸ªæ—¶å€™ä¼å›¾ä¿®æ”¹å¸¸é‡æ˜¯ä¸è¡Œçš„ã€‚VexNum = 30; // error: assignment of read-only variable &#39;VexNum&#39;ç”±äºå¸¸é‡åœ¨åæœŸä¸èƒ½è¢«æ›´æ”¹ï¼Œæ‰€ä»¥å®šä¹‰å¸¸é‡æ—¶å¿…é¡»åˆå§‹åŒ–ã€‚const ä¿®é¥°æŒ‡é’ˆconst int *p;int const *p;    int * const p = &amp;amp;m;ç¬¬ä¸€ã€äºŒç§å†™æ³•ç­‰æ•ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ä¸å¯ä¿®æ”¹ï¼Œå®šä¹‰äº†å¸¸é‡æŒ‡é’ˆï¼›ç¬¬ä¸‰ç§å†™æ³•æ˜¯æŒ‡é’ˆæœ¬èº«ä¸å¯ä¿®æ”¹ï¼Œå®šä¹‰äº†æŒ‡é’ˆå¸¸é‡ã€‚  å¯ä»¥è¿™æ ·è®°å¿†ï¼šconst ç¦»æŒ‡é’ˆè¿‘ï¼ŒæŒ‡é’ˆæœ¬èº«ä¸å¯ä¿®æ”¹ï¼Œæ˜¯æŒ‡é’ˆå¸¸é‡ï¼›const ç¦»æŒ‡é’ˆè¿œï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ä¸å¯ä¿®æ”¹ï¼Œæ˜¯å¸¸é‡æŒ‡é’ˆã€‚ç¬¬ä¸€ã€äºŒç§å†™æ³•å®šä¹‰å¸¸é‡æŒ‡é’ˆï¼Œå®šä¹‰æ—¶å¯ä»¥ä¸åˆå§‹åŒ–ï¼›ç¬¬ä¸‰ç§å†™æ³•å®šä¹‰æŒ‡é’ˆå¸¸é‡ï¼Œç”±äºæŒ‡é’ˆå¸¸é‡åœ¨åæœŸä¸èƒ½è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥å®šä¹‰æŒ‡é’ˆå¸¸é‡æ—¶å¿…é¡»åˆå§‹åŒ–ã€‚ä¸Šè¿°å†™æ³•æœ¬è´¨ä¸Šæ˜¯ä¸¤ç§å†™æ³•ï¼Œè¿™ä¸¤ç§å†™æ³•ä¹Ÿå¯ä»¥åˆåˆ°ä¸€èµ·ï¼Œå¦‚ä¸‹ï¼šconst int * const p = &amp;amp;m;int const * const p = &amp;amp;m;è¿™ç§å†™æ³•å®šä¹‰çš„æŒ‡é’ˆï¼Œæ—¢æ˜¯å¸¸é‡æŒ‡é’ˆï¼Œåˆæ˜¯æŒ‡é’ˆå¸¸é‡ã€‚æŒ‡é’ˆæœ¬èº«ä¸èƒ½è¢«ä¿®æ”¹ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚const å’Œé const æŒ‡é’ˆä¹‹é—´çš„èµ‹å€¼å°† const æŒ‡é’ˆèµ‹å€¼ç»™é const æŒ‡é’ˆï¼Œä¸å¯ä»¥ã€‚å°†é const æŒ‡é’ˆèµ‹å€¼ç»™ const æŒ‡é’ˆï¼Œå¯ä»¥ã€‚  æ–¹ä¾¿è®°å¿†ï¼šå»é™åˆ¶ä¸è¡Œï¼ŒåŠ é™åˆ¶è¡Œã€‚const ä¸å­—ç¬¦ä¸²å†™è¿™ä¸€å—çš„åŸå› æ˜¯æˆ‘å‘ç°å­—ç¬¦ä¸²å¸¸é‡é€šå¸¸éƒ½ç”¨ const char * æ¥ï¼Œä½†åæ¥å‘ç°ç›´æ¥ç”¨ char * æ¥ç¼–è¯‘ä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œä¸€æ—¶é—´äº§ç”Ÿäº†è¯¸å¤šç–‘æƒ‘ï¼Œç°å°†ç ”ç©¶ç»“æœå‘ˆç°å¦‚ä¸‹ã€‚å…ˆè¯´ä¸€ä¸‹å­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²æœ¬è´¨ä¸Šå°±æ˜¯å­—ç¬¦æ•°ç»„ã€‚è¿™é‡Œæˆ‘å°†å­—ç¬¦ä¸²åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å†…å­˜åªè¯»çš„å­—ç¬¦æ•°ç»„ï¼Œä¸€ç±»æ˜¯å†…å­˜å¯è¯»å¯å†™çš„å­—ç¬¦æ•°ç»„ï¼Œå‰è€…å°±æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œåè€…å¯ä»¥ç†è§£ä¸ºâ€œå­—ç¬¦ä¸²å˜é‡â€ã€‚  Cè¯­è¨€ä¸­å¹¶æ²¡æœ‰â€œå­—ç¬¦ä¸²å˜é‡â€çš„è¯´æ³•ï¼Œå¹³æ—¶å¤§éƒ½ç›´æ¥ç”¨å­—ç¬¦æ•°ç»„æ¥ç§°å‘¼â€œå­—ç¬¦ä¸²å˜é‡â€ï¼Œä½†å…¶å®æ— è®ºæ˜¯å­—ç¬¦ä¸²å¸¸é‡è¿˜æ˜¯â€œå­—ç¬¦ä¸²å˜é‡â€ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å­—ç¬¦æ•°ç»„ã€‚ç”±äºæˆ‘ä¸å–œæ¬¢ç”¨å­—ç¬¦æ•°ç»„æ¥ç§°å‘¼â€œå­—ç¬¦ä¸²å˜é‡â€ï¼Œæ‰€ä»¥è¿˜æ˜¯å¿ä¸ä½ç›´æ¥ä½¿ç”¨äº†â€œå­—ç¬¦ä¸²å˜é‡â€çš„è¯´æ³•ï¼Œè¯»è€…åªè¦æ¸…æ¥šè¿™é‡Œçš„â€œå­—ç¬¦ä¸²å˜é‡â€æ˜¯æŒ‡å†…å­˜å¯è¯»å¯å†™çš„å­—ç¬¦æ•°ç»„å°±è¡Œã€‚æˆ‘ä»¬åœ¨ä»£ç ä¸­ç›´æ¥ä¹¦å†™çš„ç±»ä¼¼ &quot;abc&quot;ï¼Œ&quot;This is a string.&quot;ï¼Œ&quot;Fail to open db.&quot; å°±æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œé™¤æ­¤ä»¥å¤–éƒ½æ˜¯â€œå­—ç¬¦ä¸²å˜é‡â€ã€‚æ—¢ç„¶å­—ç¬¦ä¸²æ˜¯å­—ç¬¦æ•°ç»„ï¼Œé‚£ä¹ˆæŒ‡å‘é¦–å…ƒç´ çš„æŒ‡é’ˆå°±æ˜¯ char *ï¼Œç”¨ char * æ¥å­—ç¬¦ä¸²å¸¸é‡è‡ªç„¶èƒ½è¿‡ç¼–è¯‘ã€‚// èƒ½è¿‡ç¼–è¯‘char *str = &quot;abc&quot;;ä½†æ˜¯å¦‚æœä¼å›¾æ›´æ”¹å®ƒçš„å€¼ï¼Œé‚£å°±è¦å‡ºé—®é¢˜äº†ã€‚// èƒ½è¿‡ç¼–è¯‘ï¼Œä½†è¿è¡Œæ—¶ä¼šå‡ºé”™#include &amp;lt;stdio.h&amp;gt;int main(){    char *str = &quot;abc&quot;;    *str = &#39;A&#39;;    printf(&quot;%s\\n&quot;, str);        return 0;}å­—ç¬¦ä¸²å¸¸é‡æ˜¯å†…å­˜åªè¯»çš„å­—ç¬¦æ•°ç»„ï¼Œå¼ºè¡Œæ”¹å€¼è‡ªç„¶è¦å‡ºé—®é¢˜ã€‚æ­£å› å¦‚æ­¤ï¼Œé€šå¸¸ä¼šä½¿ç”¨ const å…³é”®å­—åŠ ä»¥ç¼–è¯‘å±‚é¢çš„æ£€æŸ¥ï¼Œé˜²æ­¢å¼€å‘è€…æ— æ„é—´åšå‡ºæ›´æ”¹åªè¯»å†…å­˜çš„æ“ä½œã€‚const char *str = &quot;abc&quot;;const åœ¨ C å’Œ C++ ä¸­çš„åŒºåˆ«ç¼–è¯‘æœŸæ›¿æ¢#include &amp;lt;stdio.h&amp;gt;int main(){    const int m = 20;    int *p = (int *)&amp;amp;m;    *p = 40;    printf(&quot;%d\\n&quot;, m);    printf(&quot;%d\\n&quot;, *p);    return 0;}ä¸Šè¿°ä»£ç ä¸­ï¼Œm æ˜¯å¸¸é‡ï¼Œä½†æˆ‘ä»¬é€šè¿‡æŒ‡é’ˆä»ç„¶æ›´æ”¹äº†å®ƒçš„å€¼ã€‚&amp;amp;m å¾—åˆ°çš„æ˜¯ const int * ç±»å‹ï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼ç»™ int *ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å¼ºè½¬ã€‚æœ€ç»ˆæˆ‘ä»¬æ›´æ”¹äº† m å¸¸é‡åœ¨å†…å­˜ä¸­çš„å€¼ã€‚å¯è§ï¼Œconst çš„é™åˆ¶å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œé€šè¿‡ä¸€äº›åˆ»æ„çš„æ“ä½œä»ç„¶å¯ä»¥ä¿®æ”¹ï¼Œåªæ˜¯ä¸€èˆ¬ä¸ä¼šè¿™æ ·åšã€‚ä¸‹é¢è¯´ä¸€ä¸‹ const åœ¨ C å’Œ C++ ä¸­çš„åŒºåˆ«ã€‚ä¸Šè¿°ä»£ç åœ¨Cä¸­è¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š4040å°†åŒæ ·çš„ä»£ç æ”¾åˆ°C++ä¸­è¿è¡Œï¼š#include &amp;lt;iostream&amp;gt;using namespace std;int main(){    const int m = 20;    int *p = (int *)&amp;amp;m;    *p = 40;    cout &amp;lt;&amp;lt; m &amp;lt;&amp;lt; endl;    cout &amp;lt;&amp;lt; *p &amp;lt;&amp;lt; endl;    return 0;}ç»“æœä¸ºï¼š2040åŸå› åœ¨äºï¼šC++ä¸­çš„ `const` ä¼šè¿›è¡Œç¼–è¯‘æœŸæ›¿æ¢ï¼Œæœ‰ç‚¹ç±»ä¼¼ #defineï¼Œä½† #define æ˜¯åœ¨é¢„å¤„ç†é˜¶æ®µã€‚æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼ŒC++çš„ä»£ç ï¼Œåœ¨ç»è¿‡ç¼–è¯‘åï¼Œå˜æˆäº†å¦‚ä¸‹ï¼š#include &amp;lt;iostream&amp;gt;using namespace std;int main(){    const int m = 20;    int *p = (int *)&amp;amp;m;    *p = 40;    cout &amp;lt;&amp;lt; 20 &amp;lt;&amp;lt; endl;    cout &amp;lt;&amp;lt; *p &amp;lt;&amp;lt; endl;    return 0;}å®é™…ä¸Š m åœ¨å†…å­˜ä¸­çš„å€¼çš„ç¡®è¢«æ”¹ä¸ºäº† 40ï¼Œåªä¸è¿‡ç”±äºç¼–è¯‘æœŸæ›¿æ¢ï¼Œæˆ‘ä»¬ cout &amp;lt;&amp;lt; m ç›´æ¥å˜æˆäº† cout &amp;lt;&amp;lt; 20ï¼Œè‡ªç„¶å°±è¾“å‡ºäº† 20ã€‚è€Œåœ¨Cä¸­è¿è¡Œæ—¶ï¼Œå°±æ˜¯æ­£å¸¸æ‰§è¡Œï¼Œprintf(&quot;%d\\n&quot;, m) ä¸­ m è¿˜æ˜¯å˜é‡ mï¼Œç¨‹åºè¯»å–å˜é‡ m çš„å€¼ï¼Œå‘ç°æ˜¯ 40ï¼Œå°±è¾“å‡º 40ã€‚C++å°‘äº†è¯»å–å˜é‡å†…å­˜çš„è¿‡ç¨‹ï¼Œæé«˜äº†æ‰§è¡Œæ•ˆç‡ï¼Œä½†ä¸èƒ½åŠæ—¶ååº”å˜é‡çš„ä¿®æ”¹ï¼›ç„¶è€Œï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šä¿®æ”¹ const å˜é‡ã€‚å¯è§èŒƒå›´åœ¨Cè¯­è¨€ä¸­ï¼Œconst å…¨å±€å˜é‡å’Œæ™®é€šå…¨å±€å˜é‡ä¸€æ ·ï¼Œä½œç”¨åŸŸæ˜¯æ•´ä¸ªå·¥ç¨‹ï¼Œåªä¸è¿‡éœ€è¦ç”¨ extern å£°æ˜ä¸€ä¸‹æ‰èƒ½åœ¨å…¶å®ƒæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚è§å¦‚ä¸‹ä»£ç ï¼štest1.c#include &amp;lt;stdio.h&amp;gt;extern const int m;int main(){    printf(&quot;%d\\n&quot;, m);    return 0;}test2.cconst int m = 20;ç¼–è¯‘å‘½ä»¤ï¼šgcc test1.c test2.c -o testè¿è¡Œç»“æœï¼š20æˆ‘ä»¬åœ¨ test2.c ä¸­å®šä¹‰äº† const å…¨å±€å˜é‡ï¼Œåœ¨ test1.c ä¸­é€šè¿‡ extern å£°æ˜ä¹‹ï¼Œä¾¿å¯ä»¥ä½¿ç”¨äº†ã€‚å…¶å®è¿™é‡Œä½¿ç”¨ extern int m; å£°æ˜ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†è¿˜æ˜¯å»ºè®®ä½¿ç”¨ extern const int m; å£°æ˜ï¼Œå› ä¸ºä½¿ç”¨åè€…èƒ½å¤Ÿå¯ç”¨ç›¸å…³çš„ä»£ç æ£€æŸ¥ï¼Œå…·ä½“è¯´æ˜å¦‚ä¸‹ï¼šä¿®æ”¹ test1.c å¦‚ä¸‹ï¼š#include &amp;lt;stdio.h&amp;gt;extern const int m;int main(){    // è¿™é‡Œå°è¯•å¯¹constå˜é‡è¿›è¡Œä¿®æ”¹ï¼Œæ— è®ºæ˜¯VSCode Lintingè¿˜æ˜¯gccéƒ½ä¼šæŠ¥é”™ï¼Œè¿™å¾ˆæ­£å¸¸ã€‚    m = 40;     printf(&quot;%d\\n&quot;, m);    return 0;}ä½†è‹¥ä¿®æ”¹ test1.c å¦‚ä¸‹ï¼š#include &amp;lt;stdio.h&amp;gt;extern int m;int main(){    // è¿™é‡Œå°è¯•å¯¹constå˜é‡è¿›è¡Œä¿®æ”¹ï¼Œä½†æ— è®ºæ˜¯VSCode Lintingè¿˜æ˜¯gccéƒ½æ²¡æœ‰æŠ¥é”™ï¼Œ    // ä½†æ˜¯ç”Ÿæˆçš„exeæ— æ³•æ­£å¸¸è¿è¡Œã€‚    m = 40;     printf(&quot;%d\\n&quot;, m);    return 0;}ç»¼ä¸Šæ‰€è¿°ï¼Œæ¨èä½¿ç”¨ extern const int m; è¿›è¡Œå£°æ˜ï¼Œè¿™æ ·å¯ä»¥ä½¿ç›¸å…³ä»£ç æ£€æŸ¥èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œè€Œä¸”ä»£ç çœ‹ä¸Šå»æ›´æ¸…æ¥šï¼Œå¯è¯»æ€§æ›´é«˜ã€‚ç¨å¾®æ‰¯è¿œäº†ç‚¹ï¼Œç°åœ¨æˆ‘ä»¬å›æ¥ï¼Œæ€»ä¹‹ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œconst å…¨å±€å˜é‡å’Œæ™®é€šå…¨å±€å˜é‡ä¸€æ ·ï¼Œä½œç”¨åŸŸéƒ½æ˜¯æ•´ä¸ªå·¥ç¨‹ï¼Œåªä¸è¿‡éœ€è¦ç”¨ extern å£°æ˜ä¸€ä¸‹æ‰èƒ½åœ¨å…¶å®ƒæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚åœ¨C++ä¸­ï¼Œ`const` å…¨å±€å˜é‡çš„ä½œç”¨åŸŸä»…æ˜¯å•ä¸ªæ–‡ä»¶ã€‚ è§å¦‚ä¸‹ä»£ç ï¼štest1.cpp#include &amp;lt;iostream&amp;gt;using namespace std;extern const int m;int main(){    cout &amp;lt;&amp;lt; m &amp;lt;&amp;lt; endl;    return 0;}test2.cppconst int m = 20;ç¼–è¯‘å‘½ä»¤ï¼šg++ test1.cpp test2.cpp -o testæ­¤æ—¶ç¼–è¯‘é“¾æ¥ä¼šå‡ºç°é”™è¯¯ï¼šundefined reference to `m&#39;collect2.exe: error: ld returned 1 exit statuså› ä¸ºC++ä¸­ const å…¨å±€å˜é‡çš„ä½œç”¨åŸŸä»…æ˜¯å•ä¸ªæ–‡ä»¶ï¼Œç”¨ extern ä¹Ÿæ²¡ç”¨ã€‚æ‰€ä»¥åœ¨C++ä¸­ï¼Œä¸‹è¿°ä»£ç æ˜¯æˆç«‹çš„ï¼štest1.cpp#include &amp;lt;iostream&amp;gt;using namespace std;const int m = 20;void func();int main(){    cout &amp;lt;&amp;lt; m &amp;lt;&amp;lt; endl;    func();    return 0;}test2.cpp#include &amp;lt;iostream&amp;gt;using namespace std;const int m = 40;void func(){    cout &amp;lt;&amp;lt; m &amp;lt;&amp;lt; endl;}è¿è¡Œç»“æœï¼š2040ä¸Šé¢ä¸¤ä¸ªå…¨å±€å˜é‡ m äº’ä¸å½±å“ï¼Œè¿›è¡Œç¼–è¯‘æœŸæ›¿æ¢ï¼Œè‡ªç„¶å°±èƒ½å¾—åˆ°ä¸Šè¿°ç»“æœã€‚è‡³äºå†…å­˜ï¼Œæˆ‘è®¤ä¸ºå…¨å±€åŒºåŒæ—¶å­˜åœ¨ä¸¤ä¸ª mï¼Œç¼–è¯‘å™¨åº”è¯¥é€šè¿‡æŸç§æ–¹å¼åŒºåˆ†äº†å®ƒä»¬ã€‚åœ¨ VSCode è°ƒè¯•ä¸­ï¼Œæˆ‘ä¹Ÿèƒ½çœ‹åˆ° m çš„å€¼æ—¢å¯ä»¥æ˜¯ 20ï¼Œä¹Ÿå¯ä»¥æ˜¯ 40ã€‚å¦‚ä¸‹å›¾ï¼šå½“æˆ‘åœ¨ main() ä¸­æ—¶ï¼Œåªèƒ½çœ‹è§ test1.cpp ä¸­å®šä¹‰çš„ mï¼Œä»å…¨å±€åŒºè¯»å–äº† test1.cpp ä¸­å®šä¹‰çš„ m ä¸º 20ã€‚å½“æˆ‘åœ¨ func() ä¸­æ—¶ï¼Œåªèƒ½çœ‹è§ test2.cpp ä¸­å®šä¹‰çš„ mï¼Œä»å…¨å±€åŒºè¯»å–äº† test2.cpp ä¸­å®šä¹‰çš„ m ä¸º 40ã€‚æ€»ä¹‹ï¼Œè¿™æ ·çš„ä»£ç åœ¨Cä¸­å°±ä¸èƒ½æˆç«‹ï¼Œä¼šå‡ºç°é‡å¤å®šä¹‰å…¨å±€å˜é‡çš„é”™è¯¯ã€‚C++ä¸­ï¼Œåœ¨å®šä¹‰ `const` å…¨å±€å˜é‡æ—¶åŠ ä¸Š `extern` å…³é”®å­—å¯ä»¥å°†ä½œç”¨åŸŸä»å•ä¸ªæ–‡ä»¶æ‰©å±•åˆ°æ•´ä¸ªå·¥ç¨‹ï¼Œæ­¤æ–¹æ³•ä»… `g++` æ”¯æŒã€‚ è§å¦‚ä¸‹ä»£ç ï¼štest1.cpp#include &amp;lt;iostream&amp;gt;using namespace std;extern const int m;int main(){    cout &amp;lt;&amp;lt; m &amp;lt;&amp;lt; endl;    return 0;}test2.cppextern const int m = 20;è¿è¡Œç»“æœï¼š20åœ¨ test2.cpp ä¸­ï¼Œä½¿ç”¨ extern å®šä¹‰äº† const å…¨å±€å˜é‡ï¼Œä½œç”¨åŸŸæ˜¯æ•´ä¸ªå·¥ç¨‹ï¼Œåœ¨ test1.cpp ä¸­ä½¿ç”¨ extern å£°æ˜ä¸€ä¸‹åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚const or #defineå¦‚æœåªæ˜¯ä¸ºäº†åƒ const int a = 10;ï¼Œ#define MAX 20 è¿™æ ·å®šä¹‰ä¸€ä¸ªå¸¸é‡ï¼Œé‚£ä¹ˆ const å’Œ #define éƒ½å¯ä»¥ç”¨æ¥å®šä¹‰ã€‚æœ‰çš„èµ„æ–™ä¸­è¯´ä½¿ç”¨ const å®šä¹‰å¸¸é‡æ—¶å¸¦äº†ç±»å‹ï¼Œç¼–è¯‘æ—¶ä¼šæœ‰ç±»å‹æ£€æŸ¥ï¼›#define åœ¨é¢„ç¼–è¯‘é˜¶æ®µåªæ˜¯æ›¿æ¢ï¼Œæ²¡æœ‰ç±»å‹æ£€æŸ¥ä¸€è¯´ã€‚è¿™ç‚¹å¿ƒé‡Œæœ‰æ•°å°±è¡Œã€‚çº¯ç²¹åªæ˜¯å®šä¹‰ä¸€ä¸ªå¸¸é‡çš„è¯ï¼ŒCè¯­è¨€çš„é£æ ¼æ›´å¤šä½¿ç”¨ #defineï¼›C++ä¸¤è€…éƒ½ä¼šç”¨ï¼Œconst å¾ˆå¸¸è§ã€‚"
  },
  
  {
    "title": "MySQLæ•°æ®ç±»å‹è½¬æ¢",
    "url": "/posts/MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/",
    "categories": "Tech, SQL",
    "tags": "sql",
    "date": "2022-02-11 21:35:00 +0800",
    





    "snippet": "å…³äºMySQLçš„æ•°æ®ç±»å‹è½¬æ¢é—®é¢˜å¤§æ¦‚ä¸¤å¹´å‰å°±ç ”ç©¶è¿‡äº†ï¼Œåªæ˜¯é‚£æ—¶å€™æ²¡æœ‰å‘åšå®¢çš„ä¹ æƒ¯ï¼Œç¬”è®°è®°å¾—ä¹Ÿå¾ˆç®€å•ã€‚æœ€è¿‘åˆé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰“å¼€ä»¥å¾€çš„ç¬”è®°å‘ç°è®°å¾—å¤ªç®€å•äº†ï¼Œè‡ªå·±çœ‹å®Œäº†è¿˜æ˜¯æœ‰å¥½å¤šç–‘é—®ğŸ˜­ï¼Œæ•…æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚  å‚è€ƒèµ„æ–™ï¼š  MySQL :: MySQL 8.0 Reference Manual :: 12.11 Cast Functions and Operators  MySQL :: MySQL 8.0 Reference Manual :: 12.3 Type Conversion in Expression Evaluation  mysql ç±»å‹è‡ªåŠ¨åŒ–è½¬æ¢é—®é¢˜ - whendream - åšå®¢å›­  è°ˆè°ˆMySQLéšå¼ç±»å‹è½¬æ¢ - çŸ¥ä¹  æµ‹è¯•ç‰ˆæœ¬ï¼š  MySQL 8.0.18æ˜¾å¼è½¬æ¢cast()CAST(expr AS type [ARRAY])ä½¿ç”¨è¯¥å‡½æ•°å¯ä»¥è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚typeï¼š  signedï¼šsigned bigintç±»å‹  charï¼švarcharç±»å‹  float  double# å°†53.4è½¬æ¢ä¸ºæ•´æ•°mysql&amp;gt; select cast(53.4 as signed);+----------------------+| cast(53.4 as signed) |+----------------------+|                   53 |+----------------------+1 row in set (0.00 sec)# å°†53.6è½¬æ¢ä¸ºæ•´æ•°mysql&amp;gt; select cast(53.6 as signed);+----------------------+| cast(53.6 as signed) |+----------------------+|                   54 |+----------------------+1 row in set (0.00 sec)# å°†-53.4è½¬æ¢ä¸ºæ•´æ•°mysql&amp;gt; select cast(-53.4 as signed);+-----------------------+| cast(-53.4 as signed) |+-----------------------+|                   -53 |+-----------------------+1 row in set (0.00 sec)# å°†-53.6è½¬æ¢ä¸ºæ•´æ•°mysql&amp;gt; select cast(-53.6 as signed);+-----------------------+| cast(-53.6 as signed) |+-----------------------+|                   -54 |+-----------------------+1 row in set (0.00 sec)# å°†53.4è½¬æ¢ä¸ºå­—ç¬¦ä¸²mysql&amp;gt; select cast(53.4 as char);+--------------------+| cast(53.4 as char) |+--------------------+| 53.4               |+--------------------+1 row in set (0.00 sec)å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„è§„åˆ™      ä¸ä»¥æ•°å­—å¼€å¤´çš„å­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢ä¸º0        ä»¥æ•°å­—å¼€å¤´çš„å­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢æˆå¼€å¤´çš„é‚£äº›æ•°å­—  æ­¤è§„åˆ™ä¹Ÿé€‚ç”¨äºéšå¼è½¬æ¢ã€‚# å°†å­—ç¬¦ä¸²qwe456è½¬æ¢ä¸ºæ•´æ•°mysql&amp;gt; select cast(&#39;qwe456&#39; as signed);+--------------------------+| cast(&#39;qwe456&#39; as signed) |+--------------------------+|                        0 |+--------------------------+1 row in set, 1 warning (0.00 sec)# å°†å­—ç¬¦ä¸²123qwe456è½¬æ¢ä¸ºæ•´æ•°mysql&amp;gt; select cast(&#39;123qwe456&#39; as signed);+-----------------------------+| cast(&#39;123qwe456&#39; as signed) |+-----------------------------+|                         123 |+-----------------------------+1 row in set, 1 warning (0.00 sec)# å°†å­—ç¬¦ä¸²123.66qwe456è½¬æ¢ä¸ºæ•´æ•°mysql&amp;gt; select cast(&#39;123.66qwe456&#39; as signed);+--------------------------------+| cast(&#39;123.66qwe456&#39; as signed) |+--------------------------------+|                            123 |+--------------------------------+1 row in set, 1 warning (0.00 sec)# å°†å­—ç¬¦ä¸²123.66qwe456è½¬æ¢ä¸ºæµ®ç‚¹æ•°mysql&amp;gt; select cast(&#39;123.66qwe456&#39; as float);+-------------------------------+| cast(&#39;123.66qwe456&#39; as float) |+-------------------------------+|                        123.66 |+-------------------------------+1 row in set, 1 warning (0.00 sec)éšå¼è½¬æ¢æ•°å­—ä¸å­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢MySQLä¼šåœ¨å¿…è¦çš„æ—¶å€™å°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæˆ–å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ã€‚# æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²mysql&amp;gt; select concat(2, &#39;test&#39;);+-------------------+| concat(2, &#39;test&#39;) |+-------------------+| 2test             |+-------------------+1 row in set (0.00 sec)# å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—mysql&amp;gt; select 1 + &#39;1&#39;;+---------+| 1 + &#39;1&#39; |+---------+|       2 |+---------+1 row in set (0.00 sec)# å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—mysql&amp;gt; select 6 &amp;gt; &#39;3qwe&#39;;+------------+| 6 &amp;gt; &#39;3qwe&#39; |+------------+|          1 |+------------+1 row in set, 1 warning (0.00 sec)# å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—mysql&amp;gt; select 0 = &#39;qwe345&#39;;+--------------+| 0 = &#39;qwe345&#39; |+--------------+|            1 |+--------------+1 row in set, 1 warning (0.00 sec)ç¬¬ä¸€ä¾‹ï¼Œconcat() éœ€è¦çš„å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œå…ˆå°†æ•°å­— 2 è½¬æ¢ä¸ºå­—ç¬¦ä¸² &#39;2&#39; ï¼Œå†å°† &#39;2&#39; ä¸ &#39;test&#39; è¿›è¡Œæ‹¼æ¥å¾—åˆ° &#39;2test&#39; ã€‚ç¬¬äºŒä¾‹ï¼ŒåŠ æ³•è¿ç®—ï¼Œå…ˆå°†å­—ç¬¦ä¸² &#39;1&#39; è½¬æ¢ä¸ºæ•°å­— 1 ï¼Œå†åšåŠ æ³•å¾—åˆ° 2 ã€‚ç¬¬ä¸‰ä¾‹ï¼Œæ¯”è¾ƒè¿ç®—ï¼Œå…ˆå°† &#39;3qwe&#39; è½¬æ¢ä¸ºæ•°å­— 3 ï¼Œç„¶å 6 &amp;gt; 3 ä¸ºçœŸï¼Œè¿”å›1ã€‚ç¬¬å››ä¾‹ï¼Œæ¯”è¾ƒè¿ç®—ï¼Œå…ˆå°† &#39;qwe345&#39; è½¬æ¢ä¸ºæ•°å­— 0 ï¼Œç„¶å 0 = 0 ä¸ºçœŸï¼Œè¿”å›1ã€‚ä¸‹é¢æ˜¯ç¬¬äº”ä¾‹çš„æƒ…æ™¯ï¼š# æœ‰è¡¨å¦‚ä¸‹mysql&amp;gt; select * from test1;+-------+-------+-------+| no    | name  | grade |+-------+-------+-------+| 23    | admin |    50 || 24    | admin |    43 || 25    | qwe   |    54 || 25asd | qwe   |    54 |+-------+-------+-------+4 rows in set (0.00 sec)# è¡¨ç»“æ„å¦‚ä¸‹mysql&amp;gt; desc test1;+-------+-------------+------+-----+---------+-------+| Field | Type        | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| no    | varchar(50) | NO   | PRI | NULL    |       || name  | varchar(50) | YES  |     | NULL    |       || grade | smallint(6) | YES  |     | NULL    |       |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec)# æ‰§è¡ŒæŸ¥è¯¢å¦‚ä¸‹mysql&amp;gt; select * from test1 where no = 25;+-------+------+-------+| no    | name | grade |+-------+------+-------+| 25    | qwe  |    54 || 25asd | qwe  |    54 |+-------+------+-------+2 rows in set, 1 warning (0.00 sec)ä¸Šé¢çš„æƒ…æ™¯ä¸­ï¼Œæ‰§è¡Œ where no = 25 æ—¶ï¼Œå…ˆçœ‹ç¬¬ä¸€è¡Œï¼Œå°†å­—ç¬¦ä¸² &#39;23&#39; è½¬æ¢ä¸ºæ•°å­— 23 ï¼Œ 23 = 25 ä¸ºå‡ï¼Œä¸é€‰è¯¥è¡Œï¼›ç„¶åä¸€æ ·ï¼Œ 24 = 25 ä¸ºå‡ï¼Œä¸é€‰è¯¥è¡Œï¼›ç¬¬ä¸‰è¡Œï¼Œå°†å­—ç¬¦ä¸² &#39;25&#39; è½¬æ¢ä¸ºæ•°å­— 25 ï¼Œ 25 = 25 ä¸ºçœŸï¼Œé€‰ä¸­è¯¥è¡Œï¼›ç¬¬å››è¡Œï¼Œå°†å­—ç¬¦ä¸² 25asd è½¬æ¢ä¸ºæ•°å­— 25 ï¼Œ 25 = 25 ä¸ºçœŸï¼Œé€‰ä¸­è¯¥è¡Œï¼›æœ€åå¾—åˆ°ä¸Šé¢çš„æŸ¥è¯¢ç»“æœã€‚æ€»è½¬æ¢è§„åˆ™ä¸‹é¢çš„è§„åˆ™æ›´è¯¦ç»†ç²¾ç¡®ï¼Œæ˜¯æ¥è‡ªå®˜æ–¹æ–‡æ¡£çš„æè¿°ã€‚The following rules describe how conversion occurs for comparison operations:      If one or both arguments are NULL, the result of the comparison is NULL, except for the NULL-safe &amp;lt;=&amp;gt; equality comparison operator. For NULL &amp;lt;=&amp;gt; NULL, the result is true. No conversion is needed.        If both arguments in a comparison operation are strings, they are compared as strings.        If both arguments are integers, they are compared as integers.        Hexadecimal values are treated as binary strings if not compared to a number.        If one of the arguments is a TIMESTAMP or DATETIME column and the other argument is a constant, the constant is converted to a timestamp before the comparison is performed. This is done to be more ODBC-friendly. This is not done for the arguments to IN(). To be safe, always use complete datetime, date, or time strings when doing comparisons. For example, to achieve best results when using BETWEEN with date or time values, use CAST() to explicitly convert the values to the desired data type.    A single-row subquery from a table or tables is not considered a constant. For example, if a subquery returns an integer to be compared to a DATETIME value, the comparison is done as two integers. The integer is not converted to a temporal value. To compare the operands as DATETIME values, use CAST() to explicitly convert the subquery value to DATETIME.        If one of the arguments is a decimal value, comparison depends on the other argument. The arguments are compared as decimal values if the other argument is a decimal or integer value, or as floating-point values if the other argument is a floating-point value.        In all other cases, the arguments are compared as floating-point (double-precision) numbers. For example, a comparison of string and numeric operands takes place as a comparison of floating-point numbers.  å¤åˆ¶è‡ª mysql ç±»å‹è‡ªåŠ¨åŒ–è½¬æ¢é—®é¢˜ - whendream - åšå®¢å›­ çš„ç¿»è¯‘ï¼šæ¯”è¾ƒè¿ç®—æ—¶çš„ç±»å‹è½¬æ¢è§„åˆ™ï¼š  å¦‚æœä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯NULLï¼Œæ¯”è¾ƒçš„ç»“æœæ˜¯NULLï¼Œé™¤äº†NULLå®‰å…¨çš„&amp;lt;=&amp;gt;ç›¸ç­‰æ¯”è¾ƒè¿ç®—ç¬¦ã€‚å¯¹äºNULL &amp;lt;=&amp;gt; NULLï¼Œç»“æœä¸ºtrueã€‚ä¸éœ€è¦è½¬æ¢ã€‚  å¦‚æœæ¯”è¾ƒæ“ä½œä¸­çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™å°†å®ƒä»¬ä½œä¸ºå­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒã€‚  å¦‚æœä¸¤ä¸ªå‚æ•°éƒ½æ˜¯æ•´æ•°ï¼Œåˆ™å°†å®ƒä»¬ä½œä¸ºæ•´æ•°è¿›è¡Œæ¯”è¾ƒã€‚  å¦‚æœä¸ä¸æ•°å­—è¿›è¡Œæ¯”è¾ƒï¼Œåˆ™å°†åå…­è¿›åˆ¶å€¼è§†ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚  å¦‚æœå…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯åè¿›åˆ¶å€¼ï¼Œåˆ™æ¯”è¾ƒå–å†³äºå¦ä¸€ä¸ªå‚æ•°ã€‚ å¦‚æœå¦ä¸€ä¸ªå‚æ•°æ˜¯åè¿›åˆ¶æˆ–æ•´æ•°å€¼ï¼Œåˆ™å°†å‚æ•°ä¸åè¿›åˆ¶å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå¦ä¸€ä¸ªå‚æ•°æ˜¯æµ®ç‚¹å€¼ï¼Œåˆ™å°†å‚æ•°ä¸æµ®ç‚¹å€¼è¿›è¡Œæ¯”è¾ƒã€‚  å¦‚æœå…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯TIMESTAMPæˆ–DATETIMEåˆ—ï¼Œå¦ä¸€ä¸ªå‚æ•°æ˜¯å¸¸é‡ï¼Œåˆ™åœ¨æ‰§è¡Œæ¯”è¾ƒä¹‹å‰å°†å¸¸é‡è½¬æ¢ä¸ºæ—¶é—´æˆ³ã€‚  æˆ‘çš„ç¿»è¯‘ï¼šåœ¨æ‰€æœ‰å…¶å®ƒæƒ…å†µä¸‹ï¼Œå‚æ•°ä½œä¸ºæµ®ç‚¹æ•°ï¼ˆåŒç²¾åº¦ï¼‰è¿›è¡Œæ¯”è¾ƒã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²å’Œæ•°å­—çš„æ¯”è¾ƒå°±ä½œä¸ºæµ®ç‚¹æ•°è¿›è¡Œæ¯”è¾ƒã€‚"
  },
  
  {
    "title": "jekyll-chirpy-theme-githubæ­å»ºä¸ªäººåšå®¢",
    "url": "/posts/jekyll-chirpy-theme-github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/",
    "categories": "Tech, Misc",
    "tags": "",
    "date": "2022-02-05 14:43:00 +0800",
    





    "snippet": "æœ¬åœ°å†™äº†ä¸å°‘markdownç¬”è®°ï¼Œä¸€ç›´æƒ³è‡ªå·±å»ºä¸€ä¸ªç½‘ç«™ã€‚æœ€åˆçš„æƒ³æ³•æ˜¯å®Œå®Œå…¨å…¨è‡ªå·±å†™ä¸€ä¸ªä¸ªäººç½‘ç«™ï¼Œå…¨éƒ¨è‡ªå®šä¹‰ï¼Œä¸ä»…å¯ä»¥æœ‰æŠ€æœ¯ç¬”è®°æ ç›®è¿˜å¯ä»¥æœ‰å…¶å®ƒè®°å½•æ„Ÿæƒ³ï¼Œå‘è¡¨è§‚ç‚¹ï¼Œå‘å¸ƒå·¥å…·çš„æ ç›®ã€‚ç„¶è€Œæ—¶é—´å¹¶ä¸æ€»æ˜¯èƒ½è‡ªå®šä¹‰ï¼Œæ€»æœ‰äº›æ›´ä¼˜å…ˆçš„äº‹é¡¹æ’åœ¨å‰é¢ï¼ŒåŠ ä¹‹è‡ªå·±æŠ€æœ¯æ°´å¹³è¿˜æ²¡æˆé•¿åˆ°è¿™ä¸ªç¨‹åº¦ï¼Œäºæ˜¯é€€è€Œæ±‚å…¶æ¬¡ï¼Œé€‰æ‹©å·²æœ‰æ¡†æ¶æ­å»ºä¸€ä¸ªä¸ªäººåšå®¢ï¼Œå…ˆç”¨ä¹‹ï¼Œæ¯•ç«Ÿéƒ½è¦æ¯•ä¸šäº†ï¼Œè¿ä¸ªåƒæ ·çš„åšå®¢éƒ½æ²¡æœ‰ï¼Œå®åœ¨è¯´ä¸è¿‡å»ã€‚æˆ‘å¹¶æœªæ”¾å¼ƒå»ºç«™çš„æƒ³æ³•ï¼Œè¯´ä¸å®šä»¥åå°±æœ‰äº†ã€‚å®‰è£…åšå®¢ç”Ÿæˆå™¨ç”±äºkaliç¯å¢ƒé½å…¨ï¼Œæ‰€ä»¥ç›´æ¥åœ¨kaliä¸‹å®‰è£…æœ¬åœ°åšå®¢# å®‰è£…jekyllsudo gem install jekyll# å®‰è£…chirpyä¸»é¢˜git clone git@github.com:cotes2020/jekyll-theme-chirpy.git# åœ¨jekyll-theme-chirpyç›®å½•ä¸‹å®‰è£…ä¾èµ–# ä¸éœ€è¦sudoï¼Œå‘½ä»¤ä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨è°ƒç”¨sudobundle installjekyll-theme-chirpyæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªåšå®¢ç”Ÿæˆå™¨ï¼Œæ¥ä¸‹æ¥ç”Ÿæˆæœ¬åœ°åˆå§‹åšå®¢ã€‚ç”Ÿæˆåˆå§‹åšå®¢ç”Ÿæˆåšå®¢# åœ¨jekyll-theme-chirpyç›®å½•ä¸‹ç”Ÿæˆåšå®¢ï¼Œç«™ç‚¹å–åä¸ºlcatmiao.github.ioï¼Œè¿™é‡Œæˆ‘å–çš„åä¸åé¢è¦åˆ›å»ºçš„# è¿œç¨‹åº“çš„åå­—ä¸€è‡´ï¼Œå…¶å®ä¹Ÿå¯ä»¥ä¸ä¸€è‡´ã€‚# jekyll serveå‘½ä»¤è‡ªåŠ¨ç”Ÿæˆåä¸º_siteçš„ç«™ç‚¹ã€‚-dæŒ‡å®šç”Ÿæˆè·¯å¾„ï¼ŒåŒæ—¶å¯ä»¥é‡å‘½åç«™ç‚¹æ–‡ä»¶å¤¹åå­—ã€‚sudo jekyll serve -d lcatmiao.github.io# ç„¶åCtrl + Cå…³é—­æœåŠ¡å¯ä»¥çœ‹åˆ°å·²ç»ç”Ÿæˆäº†åˆå§‹åšå®¢lcatmiao.github.io# å†æ¬¡æ‰§è¡Œjekyll serveå‘½ä»¤ï¼Œè¿™æ¬¡æˆ‘ä»¬çœ‹ä¸€ä¸‹åˆå§‹åšå®¢çš„æ ·å­å†å…³é—­æœåŠ¡ã€‚# ä¸‹é¢çš„å‘½ä»¤ä¼šå†ä¸€æ¬¡ç”Ÿæˆlcatmiao.github.ioæ–‡ä»¶å¤¹ï¼Œè¦†ç›–ç°æœ‰çš„ï¼Œåæ­£æˆ‘ä»¬æ²¡åšä»€ä¹ˆæ›´æ”¹ï¼Œè¦†ç›–# å°±è¦†ç›–ï¼Œæ— å¦¨ã€‚# é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰æœ¬æœºæ‰èƒ½è®¿é—®jekyllæœåŠ¡ï¼ŒåŒä¸€å±€åŸŸç½‘ä¸‹çš„å…¶å®ƒä¸»æœºè®¿é—®ä¸äº†ã€‚# åŠ ä¸Š--host 0.0.0.0ååŒä¸€å±€åŸŸç½‘ä¸‹çš„å…¶å®ƒä¸»æœºå°±å¯ä»¥è®¿é—®æœåŠ¡äº†ã€‚è¿™é‡Œæˆ‘çš„kaliæ˜¯è™šæ‹Ÿæœºï¼Œ# ä¸æœ¬æœºä¹‹é—´æ˜¯NATæ¨¡å¼ã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åï¼Œå¯ä»¥åœ¨æœ¬æœºçš„æµè§ˆå™¨ä¸­è®¿é—®kaliçš„ç½‘é¡µã€‚sudo jekyll serve -d lcatmiao.github.io --host 0.0.0.0æœ¬æœºæµè§ˆå™¨ä¸­è¾“å…¥è™šæ‹ŸæœºIPï¼Œç«¯å£å·4000ï¼Œå¯ä»¥æµè§ˆåˆ°åˆå§‹åšå®¢çš„æ ·å­ã€‚å…³é—­æœåŠ¡ã€‚åˆ›å»ºè¿œç¨‹åº“å…³äºgithubä¸å¤šèµ˜è¿°ã€‚ç™»å½•githubï¼Œåˆ›å»ºç©ºä»“åº“ï¼Œä¸ºå…¬å¼€åº“ï¼Œåå­—å¿…é¡»ä¸ºusername.github.ioï¼Œusernameä¸ºgithubçš„ç”¨æˆ·åã€‚æ¨é€åˆå§‹åšå®¢# è¿›å…¥æœ¬åœ°lcatmiao.github.ioç›®å½•# åˆå§‹åŒ–æœ¬åœ°åº“sudo git init# æ·»åŠ æš‚å­˜åŒºsudo git add .# æäº¤æœ¬åœ°åº“sudo git commit -m &quot;Initialize the blog&quot; .# æ·»åŠ è¿œç¨‹åº“sudo git remote add lcatmiao.github.io åº“é“¾æ¥# è¯¦ç»†æŸ¥çœ‹è¿œç¨‹åº“sudo git remote -v# æ¨é€è¿œç¨‹åº“sudo git push lcatmiao.github.io masteråˆ·æ–°è¿œç¨‹åº“ï¼Œå¯ä»¥çœ‹è§åˆå§‹åšå®¢å·²ç»è¢«æ¨é€ä¸Šæ¥ï¼Œè®¿é—®username.github.ioå°±èƒ½è®¿é—®åˆ°è‡ªå·±çš„åˆå§‹åšå®¢é¡µé¢ã€‚ä¿®æ”¹é…ç½®æ”¹_config.ymlåœ¨jekyll-theme-chirpyç›®å½•ä¸‹ä¿®æ”¹_config.ymlã€‚è¯¥æ–‡ä»¶ä¸­çš„æ³¨é‡Šæè¿°å¾ˆæ¸…æ¥šï¼Œè‡ªå·±çœ‹ç€æ”¹ã€‚é…åˆ jekyll serve å‘½ä»¤åœ¨æœ¬åœ°æŸ¥çœ‹ä¿®æ”¹åé¡µé¢çš„æ•ˆæœã€‚æ”¹faviconfaviconè·¯å¾„ï¼šjekyll-theme-chirpy/assets/img/favicons/å‡†å¤‡å¥½å›¾ç‰‡ï¼Œç„¶ååœ¨https://realfavicongenerator.net/ç”Ÿæˆï¼Œä¸‹è½½åè§£å‹ï¼Œåœ¨è§£å‹åçš„æ–‡ä»¶å¤¹ä¸­åˆ é™¤browserconfig.xmlå’Œsite.webmanifestï¼Œç„¶åå°†å‰©ä¸‹çš„ä¸œè¥¿å¤åˆ¶åˆ°jekyll-theme-chirpy/assets/img/favicons/åˆ é™¤æœ€è¿‘æ›´æ–°æ æœ€è¿‘æ›´æ–°æ ä¼¼ä¹æ²¡æœ‰æ­£å¸¸å·¥ä½œï¼ŒæŸ¥äº†å¾ˆå¤šèµ„æ–™ä¹Ÿæµ‹è¯•äº†å¾ˆä¹…ï¼Œä¸çŸ¥é“é—®é¢˜å‡ºå“ªäº†ï¼Œæˆ‘å†³å®šåˆ é™¤å®ƒã€‚åœ¨jekyll-theme-chirpy/_layouts/page.htmlä¸­  &amp;lt;!-- pannel --&amp;gt;  &amp;lt;div id=&quot;panel-wrapper&quot; class=&quot;col-xl-3 pl-2 text-muted&quot;&amp;gt;    &amp;lt;div class=&quot;access&quot;&amp;gt;      {% include update-list.html %}      {% include trending-tags.html %}    &amp;lt;/div&amp;gt;    {% for _include in layout.pannel_includes %}      {% assign _include_path = _include | append: &#39;.html&#39; %}      {% include {{ _include_path }} %}    {% endfor %}  &amp;lt;/div&amp;gt;åˆ é™¤{% include update-list.html %}æ¨é€è¿œç¨‹åº“# åœ¨lcatmiao.github.ioç›®å½•ä¸‹sudo git add .sudo git commit -m &quot;Personalize some configs&quot; .sudo git push lcatmiao.github.io masterè®¿é—®username.github.ioæŸ¥çœ‹é¡µé¢ã€‚æ”¾ä¸Šå†…å®¹æ”¾å…¥è‡ªå·±çš„æ–‡ç« jekyll-theme-chirpy/_postså°±æ˜¯æˆ‘ä»¬æ”¾ç½®mdæ–‡ä»¶çš„ä½ç½®ã€‚è¯¥ç›®å½•ä¸‹å·²æœ‰ä¸€äº›æ–‡ç« ï¼Œè¿™äº›æ˜¯åšå®¢ä¸»é¢˜è‡ªå¸¦çš„æ•™ç¨‹ï¼Œæˆ‘ä»¬ä¸åˆ é™¤ï¼Œå°†å®ƒä»¬é‡å‘½åï¼Œåœ¨æ¯ä¸€ä¸ªæ–‡ä»¶åå‰åŠ ä¸€ä¸ª # ï¼Œè¿™æ ·æ—¢å¯ä»¥ä¿ç•™è¿™äº›æ–‡ä»¶ï¼Œåˆå¯ä»¥é¿å…åœ¨åšå®¢ä¸­å‘ˆç°å®ƒä»¬ã€‚ä¸‹é¢å°±å¯ä»¥æŠŠæˆ‘ä»¬è‡ªå·±çš„mdæ–‡ä»¶æ”¾è¿›å»ï¼Œmdæ–‡ä»¶å¯ä»¥åŠ ä¸Šä¸€ä¸ª yamlå¤´ ï¼Œä»¥å¯ç”¨æ›´å¤šåŠŸèƒ½ã€‚å…³äº yamlå¤´ï¼Œç›´æ¥æ‰“å¼€è¿™å‡ ä¸ªä¸»é¢˜è‡ªå¸¦çš„mdæ–‡ä»¶çœ‹çœ‹æ€ä¹ˆå†™å°±è¡Œã€‚æ”¾å…¥è‡ªå·±çš„mdåï¼ŒæŒ‰ç…§ä¸»é¢˜è‡ªå¸¦mdæ–‡ä»¶çš„å‘½åæ ¼å¼å‘½åã€‚# é‡æ–°ç”Ÿæˆåšå®¢ç«™ç‚¹ï¼Œæ‰“å¼€æœåŠ¡# åœ¨jekyll-theme-chirpyä¸‹sudo jekyll serve -d lcatmiao.github.io --host 0.0.0.0æœ¬åœ°æµè§ˆæ–°ç”Ÿæˆçš„é¡µé¢ã€‚æ¨é€è¿œç¨‹åº“# åœ¨lcatmiao.github.ioä¸‹sudo git add .sudo git commit .# commit msgAdd gitå¦‚ä½•åˆå¹¶åˆ†æ”¯.mdRename the theme&#39;s own md files so that I can keep them and avoid presenting them inthe blog. Besides, add my own md file, gitå¦‚ä½•åˆå¹¶åˆ†æ”¯.md.# æ¨é€è¿œç¨‹åº“sudo git push lcatmiao.github.io masterwindowså¤‡ä»½å› ä¸ºåšå®¢ç”Ÿæˆå™¨å’Œåšå®¢ç«™ç‚¹éƒ½æ”¾åœ¨è™šæ‹Ÿæœºkaliä¸­ï¼Œè€Œè™šæ‹Ÿæœºç»å¸¸è¦å›æ»šï¼Œæ‰€ä»¥æˆ‘å°†æ•´ä¸ªjekyll-theme-chirpyç›®å½•åœ¨æœ¬æœºwindowsä¸­å¤‡ä»½ä¸€ä»½ã€‚é™„jekyllå‘½ä»¤# æ‰“å¼€æœåŠ¡ï¼Œåªæœ‰æœ¬æœºèƒ½å¤Ÿè®¿é—®ç½‘ç«™# ä¼šç”Ÿæˆ_siteç›®å½•# è‡ªåŠ¨ç›‘æµ‹å˜åŒ–jekyll serve# æŒ‡å®šç”Ÿæˆè·¯å¾„å’Œç›®å½•åjekyll serve -d ~/myblog# å±€åŸŸç½‘å†…å…¶å®ƒä¸»æœºå¯è®¿é—®ç½‘ç«™jekyll serve --host 0.0.0.0# æŒ‡å®šç«¯å£jekyll serve --port 4001# åå°è¿è¡Œ# ä¸èƒ½ç›‘æµ‹å˜åŒ–jekyll serve --detach"
  },
  
  {
    "title": "å…³äºåŸŸåçš„å„ç§åè¯å«æ³•",
    "url": "/posts/%E5%85%B3%E4%BA%8E%E5%9F%9F%E5%90%8D%E7%9A%84%E5%90%84%E7%A7%8D%E5%90%8D%E8%AF%8D%E5%8F%AB%E6%B3%95/",
    "categories": "Tech, Misc",
    "tags": "",
    "date": "2022-01-29 17:31:10 +0800",
    





    "snippet": "å…³äºåŸŸåæœ‰ä¸€äº›åè¯ï¼Œæ¯”å¦‚åŸŸåã€é¡¶çº§åŸŸåã€äºŒçº§åŸŸåã€ä¸‰çº§åŸŸåã€å­åŸŸåã€ä¸»æœºåç­‰ã€‚è‡ªå·±æ€»æ˜¯æä¸æ¸…è¿™äº›åè¯å…·ä½“æŒ‡ä»£ä»€ä¹ˆï¼Œå› ä¸ºç½‘ä¸Šçš„èµ„æ–™æ€»æ˜¯æœ‰å„ç§å·®åˆ«ï¼ŒåŒä¸€ä¸ªåè¯åœ¨ä¸åŒçš„èµ„æ–™é‡Œæœ‰ä¸åŒçš„è§£é‡Šï¼Œå±å®æ˜¯è¿·æƒ‘ã€‚åœ¨æŸ¥é˜…äº†å¾ˆå¤šèµ„æ–™åï¼Œå†³å®šåšä¸€ä¸ªæ€»ç»“ï¼Œå°½å¯èƒ½æ¶µç›–å„ç§è¯´æ³•ï¼Œåšä¸€ä¸ªè‡ªå·±ç†è§£çš„æ ‡å‡†ï¼Œä»¥æœŸåœ¨é‡åˆ°è¿™äº›è¯´æ³•æ—¶å¿ƒé‡Œæœ‰åº•ã€‚èµ„æ–™åŸºæœ¬æ¦‚å¿µ (aliyun.com)Domain name - WikipediaWhatâ€™s in a Domain Name? All About Domain Levels - Hover Blogä¸‹é¢è´´ä¸¤æ®µæˆ‘è®¤ä¸ºæœ‰å¸®åŠ©çš„æè¿°é˜¿é‡Œäº‘äº§å“æ–‡æ¡£åŸºæœ¬æ¦‚å¿µ (aliyun.com)äº’è”ç½‘åç§°ä¸æ•°å­—åœ°å€åˆ†é…æœºæ„ï¼ˆICANNï¼‰è´Ÿè´£ç®¡ç†å’Œåè°ƒå›½é™…äº’è”ç½‘ç»œåŸŸåç³»ç»Ÿã€‚æ ¹æ®ICANNçš„å®šä¹‰ï¼Œä¸€ä¸ªå®Œæ•´çš„åŸŸåè‡³å°‘æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå„éƒ¨åˆ†ä¹‹é—´ç”¨â€œ.â€æ¥åˆ†éš”ï¼Œæœ€åä¸€ä¸ªâ€œ.â€çš„å³è¾¹éƒ¨åˆ†ç§°ä¸ºé¡¶çº§åŸŸåï¼Œä¹Ÿç§°ä¸ºä¸€çº§åŸŸåï¼›æœ€åä¸€ä¸ªâ€œ.â€çš„å·¦è¾¹éƒ¨åˆ†ç§°ä¸ºäºŒçº§åŸŸåï¼›äºŒçº§åŸŸåçš„å·¦è¾¹éƒ¨åˆ†ç§°ä¸ºä¸‰çº§åŸŸåï¼Œä»¥æ­¤ç±»æ¨ï¼Œæ¯ä¸€çº§çš„åŸŸåæ§åˆ¶å®ƒä¸‹ä¸€çº§åŸŸåçš„åˆ†é…ã€‚ä¸‹å›¾ä»¥www.example.com.cnä¸ºä¾‹ï¼Œä¸ºæ‚¨ä»‹ç»åŸŸåçš„çº§åˆ«ã€‚æ³¨å†ŒåŸŸåè¿‡ç¨‹ä¸­ï¼Œå¯è‡ªå®šä¹‰çš„å†…å®¹åœ¨åŸŸååç¼€çš„å·¦ä¾§éƒ¨åˆ†ã€‚æ ¹æ®æ³¨å†Œå±€è§„åˆ™ï¼Œå¯ä¾›ç”¨æˆ·é€‰æ‹©çš„åç¼€ï¼Œå¯èƒ½æ˜¯é¡¶çº§åŸŸåï¼ˆå¦‚â€œ.cnâ€ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯äºŒçº§åŸŸåï¼ˆå¦‚â€œ.com.cn/.net.cn/.org.cnâ€ï¼‰ã€‚åŸŸåè§£æè®¾ç½®æ˜¯é’ˆå¯¹å·²ç»å®Œæˆæ³¨å†Œçš„åŸŸåæˆ–å·²æ³¨å†ŒåŸŸåçš„å·¦ä¾§éƒ¨åˆ†ï¼ˆå³åŸŸååç¼€å·¦ä¾§çš„å·¦ä¾§ï¼‰è¿›è¡Œè§£æè®¾ç½®ã€‚ æ‰€ä»¥åœ¨è§£æåœºæ™¯ä¸‹ï¼Œå¯¹ç”¨æˆ·è§£æå†…å®¹è®¾ç½®çš„åˆ°åº•æ˜¯ç¬¬å‡ ä¸ªå·¦ä¾§çš„è§£é‡Šä¼šå­˜åœ¨å›°éš¾ã€‚å› æ­¤ï¼Œè§£æåœºæ™¯é‡Œï¼Œç”¨æˆ·æ³¨å†Œçš„å®Œæ•´åŸŸåè¢«å®šä¹‰ä¸ºâ€œä¸€çº§åŸŸåâ€ï¼ˆä¸æ˜¯é¡¶çº§åŸŸåï¼‰ï¼Œå®Œæ•´åŸŸåçš„å·¦ä¾§ç¬¬ä¸€ä¸ªï¼ˆå³ä¸€çº§åŸŸåçš„å­åŸŸåï¼‰æ˜¯äºŒçº§åŸŸåï¼Œä»¥æ­¤ç±»æ¨ã€‚ä»¥æ³¨å†Œä¸€ä¸ªåç¼€ä¸ºâ€œ.org.cnâ€ã€å®Œæ•´åŸŸåä¸ºâ€œsample.org.cnâ€çš„åŸŸåä¸ºä¾‹ï¼Œå¯¹å„å®šä¹‰è¿›è¡Œå¦‚ä¸‹è¯´æ˜ã€‚  åŸŸååç¼€ï¼šâ€œ.org.cnâ€ä¸ºæ³¨å†Œå±€æä¾›çš„å¯æ³¨å†Œçš„åŸŸååç¼€ã€‚  ä¸€çº§åŸŸåï¼šâ€œsample.org.cnâ€ä¸ºç”¨æˆ·æ³¨å†Œçš„å®Œæ•´åŸŸåï¼Œå³è§£æåœºæ™¯ä¸‹çš„ä¸€çº§åŸŸåã€‚  äºŒçº§åŸŸåï¼šâ€œabc.sample.org.cnâ€ä¸ºâ€œsample.org.cnâ€çš„å­åŸŸåï¼Œå³è§£æåœºæ™¯ä¸‹çš„äºŒçº§åŸŸåã€‚ç»´åŸºç™¾ç§‘Domain name - Wikipediaåœ¨Purposeçš„ç¬¬ä¸€æ®µæœ‰ï¼šIndividual Internet host computers use domain names as host identifiers, also called hostnames. The term hostname is also used for the leaf labels in the domain name system, usually without further subordinate domain name space. Hostnames appear as a component in Uniform Resource Locators (URLs) for Internet resources such as websites (e.g., en.wikipedia.org).åœ¨Second-level and lower level domainsçš„ç¬¬ä¸‰æ®µæœ‰ï¼šSecond-level (or lower-level, depending on the established parent hierarchy) domain names are often created based on the name of a company (e.g., bbc.co.uk), product or service (e.g. hotmail.com). Below these levels, the next domain name component has been used to designate a particular host server. Therefore, ftp.example.com might be an FTP server, www.example.com would be a World Wide Web server, and mail.example.com could be an email server, each intended to perform only the implied function.æ€»ç»“https://www.example.com.cn/detail/index.html?id=6ä»¥ä¸Šé¢è¿™ä¸ªé“¾æ¥ä¸ºä¾‹ï¼Œhttpsæ˜¯åè®® ï¼Œ/detail/index.htmlæ˜¯è·¯å¾„ï¼Œid=6æ˜¯å‚æ•°ã€‚www.example.com.cnè¿™ä¸€æ•´ä¸ªæ˜¯åŸŸåï¼Œä¹Ÿæ˜¯ä¸»æœºåï¼›cnæ˜¯é¡¶çº§åŸŸåï¼ˆä¸€çº§åŸŸåï¼‰ï¼›comæ˜¯äºŒçº§åŸŸåï¼Œä¹Ÿå¯ä»¥è¯´com.cnæ˜¯äºŒçº§åŸŸåï¼›exampleæ˜¯ä¸‰çº§åŸŸåï¼Œä¹Ÿå¯ä»¥è¯´example.com.cnæ˜¯ä¸‰çº§åŸŸåï¼›wwwæ˜¯å››çº§åŸŸåï¼Œä¹Ÿå¯ä»¥è¯´www.example.com.cnæ˜¯å››çº§åŸŸåã€‚comæ˜¯cnçš„å­åŸŸåï¼Œexampleæ˜¯comçš„å­åŸŸåï¼Œexampleæ˜¯com.cnçš„å­åŸŸåï¼Œwwwæ˜¯example.com.cnçš„å­åŸŸåï¼Œwww.example.com.cnæ˜¯example.com.cnçš„å­åŸŸåï¼Œè¿™é‡Œè¯´æ³•æ¯”è¾ƒéšæ„ï¼Œå­åŸŸåæ˜¯ä¸€ä¸ªç›¸å¯¹æ¦‚å¿µï¼Œæƒ³è±¡ä¸€ä¸‹æ ‘ç»“æ„å°±è¡Œã€‚example.com.cnæ˜¯èŠ±é’±ä¹°çš„éƒ¨åˆ†ï¼Œæ˜¯ç”¨æˆ·æ³¨å†Œçš„éƒ¨åˆ†ï¼Œä¹°æ¥ä»¥åå¯ä»¥è®¾ç½®å­åŸŸåï¼Œæ¯”å¦‚wwwã€‚wwwæ˜¯è‡ªå®šä¹‰çš„åå­—ï¼Œæ˜¯æœåŠ¡åï¼Œå¯ç”¨äºæŒ‡æ˜æœåŠ¡å™¨æä¾›çš„æœåŠ¡ï¼Œä¾‹å¦‚wwwã€ftpã€mailï¼›è¿˜å¯ä»¥å«å®ƒä¸»æœºåï¼Œä¸è¿‡è¿™ä¸ªå«æ³•ä¸ä¸Šé¢æåˆ°çš„â€œæ•´ä¸ªåŸŸåä¹Ÿæ˜¯ä¸»æœºåâ€æ˜¯ä¸¤å›äº‹ã€‚æœ¬ä¾‹ä¸­ï¼Œwwwä¹Ÿæ˜¯å››çº§åŸŸåã€‚æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°çš„åŸŸåå¤§éƒ½ä»¥comã€cnã€orgå•ä¸ªç»“å°¾ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼šwww.baidu.comwww.360.cnwww.kali.orgä½†ä¹Ÿæœ‰ä»¥com.cnã€net.cnã€org.cnä¸¤ä¸ªç»“å°¾çš„ï¼Œå¦‚ï¼šyz.chsi.com.cnwww.yto.net.cnwww.cnvd.org.cnæœ¬ä¾‹www.example.com.cnä¾¿æ˜¯ä»¥com.cnä¸¤ä¸ªç»“å°¾çš„ã€‚com.cnã€net.cnã€org.cnè¿™ç§çœ‹ä½œäºŒçº§åŸŸåï¼Œè€Œä¸æ˜¯ä½œä¸ºæ•´ä½“çœ‹ä½œé¡¶çº§åŸŸåï¼ˆä¸€çº§åŸŸåï¼‰ã€‚åŸŸååç¼€å¯ä»¥æ˜¯é¡¶çº§åŸŸåï¼ˆä¸€çº§åŸŸåï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯äºŒçº§åŸŸåï¼Œå‰ä¸‰ä¸ªä¾‹å­ä¸­ï¼Œcomã€cnã€orgæ˜¯åŸŸååç¼€ï¼Œåä¸‰ä¸ªä¾‹å­ä¸­ï¼Œcom.cnã€net.cnã€org.cnæ˜¯åŸŸååç¼€ã€‚æœ¬ä¾‹www.example.com.cnä¸­com.cnæ˜¯åŸŸååç¼€ã€‚å…³äºä¸€çº§åŸŸåã€äºŒçº§åŸŸåç­‰è¿˜æœ‰å¦ä¸€ç§è¯´æ³•ã€‚ä»¥www.example.com.cnä¸ºä¾‹ã€‚å°†ç”¨æˆ·æ³¨å†Œçš„å®Œæ•´åŸŸåå«åšä¸€çº§åŸŸåï¼ˆä¸èƒ½å«é¡¶çº§åŸŸåï¼‰ï¼Œéšåé€çº§ä¸‹é™ã€‚example.com.cnæ˜¯ä¸€çº§åŸŸåï¼›wwwæ˜¯äºŒçº§åŸŸåï¼Œä¹Ÿå¯ä»¥è¯´www.example.com.cnæ˜¯äºŒçº§åŸŸåã€‚"
  },
  
  {
    "title": "gitå¦‚ä½•åˆå¹¶åˆ†æ”¯",
    "url": "/posts/git%E5%A6%82%E4%BD%95%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF/",
    "categories": "Tech, Git",
    "tags": "git",
    "date": "2022-01-26 13:49:37 +0800",
    





    "snippet": "å¤åˆ¶äº†å®˜ç½‘æ–‡æ¡£ä¸­å¯¹gitåˆå¹¶è¿‡ç¨‹çš„æè¿°ï¼Œæå–äº†æœ‰å¿…è¦è®°å½•çš„éƒ¨åˆ†ï¼›è‡ªå·±æµ‹è¯•äº†ä¸€äº›å…³äºåˆå¹¶å†²çªçš„ä¾‹å­ï¼Œåšä¸€ä¸ªç®€è¦æ€»ç»“ã€‚  å‚è€ƒèµ„æ–™ï¼šGit åˆ†æ”¯ - åˆ†æ”¯çš„æ–°å»ºä¸åˆå¹¶åˆå¹¶è¿‡ç¨‹å¿«è¿›(fast-forward)ç°åœ¨è¦å°†hotfixåˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯ã€‚$ git checkout master$ git merge hotfixUpdating f42c576..3a0874cFast-forward index.html | 2 ++ 1 file changed, 2 insertions(+)åˆå¹¶åå¦‚ä¸‹å›¾ï¼šå½“ä½ è¯•å›¾åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯æ—¶ï¼Œ å¦‚æœé¡ºç€ä¸€ä¸ªåˆ†æ”¯èµ°ä¸‹å»èƒ½å¤Ÿåˆ°è¾¾å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆ Git åœ¨åˆå¹¶ä¸¤è€…çš„æ—¶å€™ï¼Œ åªä¼šç®€å•çš„å°†æŒ‡é’ˆå‘å‰æ¨è¿›ï¼ˆæŒ‡é’ˆå³ç§»ï¼‰ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹çš„åˆå¹¶æ“ä½œæ²¡æœ‰éœ€è¦è§£å†³çš„åˆ†æ­§â€”â€”è¿™å°±å«åš â€œå¿«è¿›ï¼ˆfast-forwardï¼‰â€ã€‚éšåå¯ä»¥åˆ é™¤hotfixåˆ†æ”¯ã€‚$ git branch -d hotfixä¸‰æ–¹åˆå¹¶ç°åœ¨è¦å°†iss53åˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯ã€‚$ git checkout masterSwitched to branch &#39;master&#39;$ git merge iss53Merge made by the &#39;recursive&#39; strategy.index.html |    1 +1 file changed, 1 insertion(+)åˆå¹¶åå¦‚ä¸‹å›¾ï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ çš„å¼€å‘å†å²ä»ä¸€ä¸ªæ›´æ—©çš„åœ°æ–¹å¼€å§‹åˆ†å‰å¼€æ¥ï¼ˆdivergedï¼‰ã€‚ å› ä¸ºï¼Œmaster åˆ†æ”¯æ‰€åœ¨æäº¤å¹¶ä¸æ˜¯ iss53 åˆ†æ”¯æ‰€åœ¨æäº¤çš„ç›´æ¥ç¥–å…ˆï¼ŒGit ä¸å¾—ä¸åšä¸€äº›é¢å¤–çš„å·¥ä½œã€‚ å‡ºç°è¿™ç§æƒ…å†µçš„æ—¶å€™ï¼ŒGit ä¼šä½¿ç”¨ä¸¤ä¸ªåˆ†æ”¯çš„æœ«ç«¯æ‰€æŒ‡çš„å¿«ç…§ï¼ˆC4 å’Œ C5ï¼‰ä»¥åŠè¿™ä¸¤ä¸ªåˆ†æ”¯çš„å…¬å…±ç¥–å…ˆï¼ˆC2ï¼‰ï¼Œåšä¸€ä¸ªç®€å•çš„ä¸‰æ–¹åˆå¹¶ã€‚Git å°†æ­¤æ¬¡ä¸‰æ–¹åˆå¹¶çš„ç»“æœåšäº†ä¸€ä¸ªæ–°çš„å¿«ç…§å¹¶ä¸”è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æŒ‡å‘å®ƒã€‚ è¿™ä¸ªè¢«ç§°ä½œä¸€æ¬¡åˆå¹¶æäº¤ï¼Œå®ƒçš„ç‰¹åˆ«ä¹‹å¤„åœ¨äºä»–æœ‰ä¸æ­¢ä¸€ä¸ªçˆ¶æäº¤ã€‚éšåå¯ä»¥åˆ é™¤iss53åˆ†æ”¯ã€‚$ git branch -d iss53åˆå¹¶å†²çªå¦‚æœä½ åœ¨ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯ä¸­ï¼Œå¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€ä¸ªéƒ¨åˆ†è¿›è¡Œäº†ä¸åŒçš„ä¿®æ”¹ï¼ŒGit å°±æ²¡æ³•å¹²å‡€çš„åˆå¹¶å®ƒä»¬ï¼Œå³ä¼šäº§ç”Ÿåˆå¹¶å†²çªã€‚  fast-forward ä¸€å®šä¸ä¼šäº§ç”Ÿåˆå¹¶å†²çªã€‚  ä¸‰æ–¹åˆå¹¶å¯èƒ½äº§ç”Ÿåˆå¹¶å†²çªã€‚åˆå¹¶å†²çªçš„å‘ç”Ÿæœ‰ç‚¹ç„å­¦ï¼Œä¸å¿…è¿‡äºçº ç»“ï¼ŒæŒ‰ç…§ç¬¬ä¸€æ®µè¯ç†è§£å³å¯ã€‚å…·ä½“ä¼šä¸ä¼šå‘ç”Ÿå†²çªï¼Œè€è€å®å®å¬gitçš„å°±è¡Œï¼Œå®ƒè¯´å†²çªé‚£å°±æ˜¯å†²çªäº†ã€‚é™„ä¸Šä¸€äº›å®æµ‹ä¾‹å­ï¼š  gitç‰ˆæœ¬ï¼šgit version 2.34.1.windows.1ä¾‹ä¸€ç›´æ¥fast-forwardä¾‹äºŒPS E:\\2.å­¦ä¹ \\test&amp;gt; git merge hotfixAuto-merging merge.txtMerge made by the &#39;ort&#39; strategy. merge.txt | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-)æˆ‘çš„ç†è§£ï¼šmasterå¯¹ç¬¬ä¸€è¡Œåšäº†ä¿®æ”¹ï¼Œä½†hotfixæ²¡æœ‰å¯¹ç¬¬ä¸€è¡Œåšä¿®æ”¹ï¼Œæ— å†²çªï¼›ä¸¤åˆ†æ”¯éƒ½æ²¡æœ‰å¯¹ç¬¬äºŒè¡Œåšä¿®æ”¹ï¼Œæ— å†²çªï¼›masteræ²¡æœ‰å¯¹ç¬¬ä¸‰è¡Œåšä¿®æ”¹ï¼Œä½†hotfixå¯¹ç¬¬ä¸‰è¡Œåšäº†ä¿®æ”¹ï¼Œæ— å†²çªã€‚æœ€ååˆå¹¶æˆåŠŸï¼Œæ²¡æœ‰å†²çªã€‚ä¾‹ä¸‰PS E:\\2.å­¦ä¹ \\test&amp;gt; git merge hotfixAuto-merging merge.txtCONFLICT (content): Merge conflict in merge.txtAutomatic merge failed; fix conflicts and then commit the result.&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEADqwe222qwe=======qweqwe444&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; hotfixqweæˆ‘çš„ç†è§£ï¼šè¿™ä¸ªå±…ç„¶ä¼šå‘ç”Ÿå†²çªï¼Œæˆ‘æ˜¯æ²¡æœ‰æƒ³åˆ°çš„ã€‚åŸæœ¬åº”è¯¥åƒä¾‹äºŒä¸€æ ·ç†è§£ï¼Œç¬¬ä¸€è¡Œåªæœ‰masteræ”¹äº†ï¼Œç¬¬äºŒè¡Œåªæœ‰hotfixæ”¹äº†ï¼Œç¬¬ä¸‰è¡Œä¸¤ä¸ªåˆ†æ”¯éƒ½æ²¡æ”¹ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°å†²çªã€‚ç„¶è€Œå´å‡ºç°äº†å†²çªï¼Œè¯´æ˜å†²çªçš„åˆ¤å®šæ²¡æœ‰æƒ³è±¡å¾—é‚£ä¹ˆç®€å•ï¼Œä¸gitçš„å…·ä½“å®ç°æœ‰å…³ã€‚è¿™é‡Œè´´å‡ºäº†gitæ’å…¥çš„å†²çªæ ‡è®°ã€‚æŒ‰æˆ‘çš„ç†è§£ï¼Œæ ¹æ®å†²çªæ ‡è®°ï¼Œgitè®¤ä¸ºä¸¤ä¸ªåˆ†æ”¯å¯¹merge.txtçš„çº¢æ¡†å¤„åšäº†ä¸åŒä¿®æ”¹ï¼Œäº§ç”Ÿäº†å†²çªï¼›è“æ¡†å¤„ä¸¤è€…éƒ½æ²¡æœ‰ä¿®æ”¹ï¼Œæ— å†²çªï¼›æ‰€ä»¥æœ€ç»ˆå‘ç”Ÿäº†åˆå¹¶å†²çªã€‚ä¾‹å››PS E:\\2.å­¦ä¹ \\test&amp;gt; git merge hotfixAuto-merging merge.txtCONFLICT (content): Merge conflict in merge.txtAutomatic merge failed; fix conflicts and then commit the result.qwe&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEADqwe222qwe=======qweqwe444&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; hotfixåŒä¾‹ä¸‰ã€‚ä¾‹äº”PS E:\\2.å­¦ä¹ \\test&amp;gt; git merge hotfixAuto-merging merge.txtCONFLICT (content): Merge conflict in merge.txtAutomatic merge failed; fix conflicts and then commit the result.&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEADqwe666=======qwe444&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; hotfixqwe333qwe555æˆ‘çš„ç†è§£ï¼šè¿™ä¸ªå¥½ç†è§£ã€‚ä¸¤ä¸ªåˆ†æ”¯å¯¹ç¬¬äºŒè¡Œã€ç¬¬ä¸‰è¡Œåšäº†ç›¸åŒçš„ä¿®æ”¹ï¼Œæ²¡æœ‰å†²çªï¼›ä¸¤ä¸ªåˆ†æ”¯åˆ†åˆ«å¯¹ç¬¬ä¸€è¡Œåšäº†ä¸åŒçš„ä¿®æ”¹ï¼Œæœ‰å†²çªï¼›æœ€ç»ˆå‘ç”Ÿåˆå¹¶å†²çªã€‚ä¾‹å…­PS E:\\2.å­¦ä¹ \\test&amp;gt; git merge hotfixAuto-merging merge.txtCONFLICT (content): Merge conflict in merge.txtAutomatic merge failed; fix conflicts and then commit the result.qwe444qwe333&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEADqwe=======qwe555&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; hotfixæˆ‘çš„ç†è§£ï¼šæˆ‘è¿·æƒ‘äº†ã€‚ã€‚ã€‚æŒ‰ç…§ä¹‹å‰çš„ç†è§£ï¼Œä¸¤åˆ†æ”¯å¯¹ç¬¬ä¸€è¡Œã€ç¬¬äºŒè¡Œåšäº†ç›¸åŒçš„ä¿®æ”¹ï¼Œä¸å†²çªï¼›masteråˆ†æ”¯æ²¡æœ‰å¯¹ç¬¬ä¸‰è¡Œåšå‡ºä¿®æ”¹ï¼Œhotfixåˆ†æ”¯å¯¹ç¬¬ä¸‰è¡Œåšäº†ä¿®æ”¹ï¼Œä¸å†²çªï¼›æœ€ç»ˆåº”è¯¥ä¸å†²çªæ‰æ˜¯ã€‚å‡å¦‚å°†è¿™é‡Œmasteråˆ†æ”¯å¯¹ç¬¬ä¸‰è¡Œçš„ä¿®æ”¹çœ‹æˆæ˜¯â€œä¸å˜çš„ä¿®æ”¹â€ï¼Œé‚£ä¹ˆç¡®å®å¯ä»¥è¯´ä¸¤ä¸ªåˆ†æ”¯å¯¹ç¬¬ä¸‰è¡Œåšäº†ä¸åŒçš„ä¿®æ”¹ï¼Œè¿›è€Œå‘ç”Ÿå†²çªã€‚ä½†æ˜¯è¿™æ ·çš„è¯´æ³•åœ¨ä¾‹äºŒä¸­å°±ç«™ä¸ä½è„šï¼ŒæŒ‰ç…§è¿™ä¸ªâ€œä¸å˜çš„ä¿®æ”¹â€çš„å‡è®¾ï¼Œä¾‹äºŒåº”è¯¥å‘ç”Ÿå†²çªæ‰æ˜¯ã€‚æƒ³æƒ³ä¹Ÿæ˜¯ï¼Œè¿™ä¸ªæƒ³æ³•æ˜¯æˆ‘å‡­ç©ºæƒ³è±¡å‡ºæ¥çš„ï¼Œå¤šåŠä¸å¯èƒ½ã€‚æ€»ç»“å…³äºåˆå¹¶å†²çªçš„åˆ¤å®šæ²¡æœ‰ææ‡‚ï¼Œä¸è¿‡æˆ‘è®¤ä¸ºç»§ç»­çº ç»“è¿™ä¸ªé—®é¢˜æ²¡æœ‰æ›´å¤šçš„æ„ä¹‰äº†ï¼Œé™¤éé˜…è¯»gitå®ç°çš„æºç ã€‚æ€»è€Œè¨€ä¹‹ï¼Œgitå®˜æ–¹æ–‡æ¡£çš„bookä¸­æœ‰å¦‚ä¸‹æè¿°ï¼šGit åˆ†æ”¯ - åˆ†æ”¯çš„æ–°å»ºä¸åˆå¹¶å¦‚æœä½ åœ¨ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯ä¸­ï¼Œå¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€ä¸ªéƒ¨åˆ†è¿›è¡Œäº†ä¸åŒçš„ä¿®æ”¹ï¼ŒGit å°±æ²¡æ³•å¹²å‡€çš„åˆå¹¶å®ƒä»¬ã€‚ä»¥è¿™å¥è¯ä¸ºæ ‡å‡†å³å¯ï¼Œå…·ä½“çœ‹gitçš„åˆå¹¶ç»“æœå°±è¡Œã€‚"
  },
  
  {
    "title": "åŸç -åç -è¡¥ç èŒƒå›´åŠç‰¹æ®Šæƒ…å†µ",
    "url": "/posts/%E5%8E%9F%E7%A0%81-%E5%8F%8D%E7%A0%81-%E8%A1%A5%E7%A0%81%E8%8C%83%E5%9B%B4%E5%8F%8A%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5/",
    "categories": "Tech, Misc",
    "tags": "",
    "date": "2021-08-24 15:40:00 +0800",
    





    "snippet": "è¿™ç¯‡ç®€å•çš„ç¬”è®°æ˜¯è€ƒç ”å¤ä¹ æœŸé—´å†™çš„ã€‚å°½ç®¡è€ƒä¸ä¸Šäº†ï¼Œè¿™ç¯‡ç¬”è®°è¿˜æ˜¯æœ‰ç‚¹ä»·å€¼ï¼Œè®°å½•äº†å‡ ä¸ªç‰¹æ®Šæƒ…å†µå’Œä¸€äº›ä¸ªæ€§åŒ–çš„ç†è§£ã€‚ç½‘ä¸Šèµ„æ–™è¾ƒä¸ºé›¶æ•£ï¼Œè¿™é‡ŒæŠŠå®ƒä»¬é›†ä¸­è¯´äº†ä¸€ä¸‹ï¼Œä¸è¿‡æ ¼å¼æ¯”è¾ƒéšæ„ï¼Œä¸€äº›æ¨å¯¼æ–¹å¼å¹¶ä¸æ­£ç¡®ä½†æ˜¯èƒ½å¸®åŠ©ç†è§£è®°å¿†ã€‚ä¸€ä¸ªå­—èŠ‚ï¼šåŸç ï¼š$-127 \\sim -0, +0 \\sim +127$$-\\frac{127}{128} \\sim -\\frac{0}{128}, +\\frac{0}{128} \\sim +\\frac{127}{128}$$-(1 - 2^{-7}) \\sim -0.000, +0.000 \\sim +(1 - 2^{-7})$$-0.127 \\sim -0.000, +0.000 \\sim +0.127$åç ï¼š$-127 \\sim -0, +0 \\sim +127$$-\\frac{127}{128} \\sim -\\frac{0}{128}, +\\frac{0}{128} \\sim +\\frac{127}{128}$$-(1 - 2^{-7}) \\sim -0.000, +0.000 \\sim +(1 - 2^{-7})$$-0.127 \\sim -0.000, +0.000 \\sim +0.127$è¡¥ç ï¼š$-128 \\sim 0 \\sim +127$$-1.0 \\sim 0.000 \\sim +\\frac{127}{128}$$-1.0 \\sim 0.000 \\sim +(1 - 2^{-7})$$-0.128 \\sim 0 \\sim +0.127$åŸç åç åŒºåˆ†Â±0ï¼ŒÂ±0.0$[+0]_è¡¥=[-0]_è¡¥=0,000\\ 0000$$[+0.0]_è¡¥=[-0.0]_è¡¥=0.000\\ 0000$$[-128]_è¡¥=1,000\\ 0000$$[-1.0]_è¡¥=1.000\\ 0000$      $[+0]_è¡¥ \\ \\&amp;amp;\\  [-0]_è¡¥$    $[+0]_åŸ=0,000\\ 0000$    $[+0]_è¡¥=0,000\\ 0000$    $[-0]_åŸ=1,000\\ 0000$    $[-0]_å=1,111\\ 1111$    $[-0]_è¡¥=10,000\\ 0000 \\xlongequal{æº¢å‡ºä¸¢å¼ƒ}0,000\\ 0000$    $[+0]_è¡¥=[-0]_è¡¥=0,000\\ 0000$        $[+0.0]_è¡¥ \\ \\&amp;amp;\\ [-0.0]_è¡¥$    $[+0.0]_åŸ=0.000\\ 0000$    $[+0.0]_è¡¥=0.000\\ 0000$    $[-0.0]_åŸ=1.000\\ 0000$    $[-0.0]_å=1.111\\ 1111$    $[-0.0]_è¡¥=10.000\\ 0000 \\xlongequal{æº¢å‡ºä¸¢å¼ƒ}0.000\\ 0000$    $[+0.0]_è¡¥=[-0.0]_è¡¥=0.000\\ 0000$        $[-128]_è¡¥$    $[-128]_{ä¼ªåŸ}=1,1000\\ 0000$    $[-128]_{ä¼ªå}=1,0111\\ 1111$    $[-128]_è¡¥=1,1000\\ 0000 \\xlongequal{æº¢å‡ºä¸¢å¼ƒ}1,000\\ 0000$        $[-1.0]_è¡¥$    $-1.0\\rightarrow-0.128$    $[-1.0]_{ä¼ªåŸ}=1.1000\\ 0000$    $[-1.0]_{ä¼ªå}=1.0111\\ 1111$    $[-1.0]_è¡¥=1.1000\\ 0000 \\xlongequal{æº¢å‡ºä¸¢å¼ƒ}1.000\\ 0000$  "
  },
  
  {
    "title": "æ‰‹åŠ¨æ­å»ºWebæœåŠ¡å™¨ç¯å¢ƒ",
    "url": "/posts/%E6%89%8B%E5%8A%A8%E6%90%AD%E5%BB%BAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83/",
    "categories": "Tech, Misc",
    "tags": "",
    "date": "2020-07-25 16:30:00 +0800",
    





    "snippet": "çœ‹ç½‘ä¸Šçš„æ•™ç¨‹å¤§éƒ½æ˜¯ä½¿ç”¨PHPStudyç­‰é›†æˆåŒ…ä¸€é”®æ­å»ºçš„Webç¯å¢ƒï¼Œä½¿ç”¨é›†æˆåŒ…æ­å»ºæ˜¯èƒ½çœä¸å°‘äº‹ï¼Œä½†æ˜¯ä¹Ÿå°‘çœ‹è§äº†å¾ˆå¤šä¸œè¥¿ï¼Œè¿™æ ·å°±ä¸èƒ½è‡ªå·±å®‰æ’ï¼Œä¸å–œæ¬¢è¿™ç§æ„Ÿè§‰ã€‚æˆ‘è¿™é‡Œæ˜¯åœ¨VMè™šæ‹Ÿæœºçš„Win7ä¸‹è¿›è¡Œçš„ï¼Œå…¶å®ƒWindowsç³»ç»Ÿå¤§åŒå°å¼‚ï¼Œå…¶å®åœ¨Windows Serverä¹‹ç±»çš„ç³»ç»Ÿä¸Šæ­å»ºåº”è¯¥æ›´å¥½ã€‚  æœ¬æ–‡é‡‡ç”¨Apache+PHP+MySQLè¿›è¡Œé…ç½®ï¼Œç‰ˆæœ¬å¦‚ä¸‹ï¼š  Apache 2.4.43  PHP 7.4.8 Thread Safe  MySQL 8.0.21  é…ç½®æœŸé—´è‹¥å‡ºç°â€œç¼ºå°‘VCç¯å¢ƒâ€æˆ–â€œç¼ºå°‘.NET Frameworkâ€ï¼Œè‡ªè¡Œç™¾åº¦ï¼Œå¾®è½¯å®˜ç½‘å®‰è£…Apacheé…ç½®é¦–å…ˆä¸‹è½½å®‰è£…åŒ…https://www.apachelounge.com/download/ï¼Œæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾ç½®WebæœåŠ¡ç¯å¢ƒèµ„æºï¼Œæˆ‘è¿™é‡Œæ˜¯D:\\Serveréšåè§£å‹åˆ°Serveræ–‡ä»¶å¤¹ä¸‹ï¼Œè¿™é‡Œè§£å‹åæ–‡ä»¶å¤¹çš„åå­—å«åšApache24é™„ä¸€å¼ å…¨éƒ¨æ­å»ºå®Œåçš„Serveræ–‡ä»¶å¤¹çš„å›¾ï¼Œå…¶ä¸­çš„PHPï¼ŒMySQLï¼Œwwwæ–‡ä»¶å¤¹ä¼šåœ¨åé¢åˆ›å»ºã€‚å¼€å§‹é…ç½®ç”¨è®°äº‹æœ¬æ‰“å¼€D:\\Server\\Apache24\\conf\\httpd.confï¼Œè¿™æ˜¯Apacheçš„é…ç½®æ–‡ä»¶ã€‚ä¿®æ”¹ä»¥ä¸‹æ¡ç›®ï¼Œå¯æŒ‰Ctrl+FæŸ¥æ‰¾ServerRootï¼ˆApacheçš„æ ¹ç›®å½•ï¼‰ï¼šd:/Server/Apache24ï¼Œè¿™é‡Œæ›´æ”¹SRVROOTå˜é‡å³å¯Define SRVROOT &quot;c:/Apache24&quot;ServerRoot &quot;${SRVROOT}&quot;æ”¹ä¸ºDefine SRVROOT &quot;d:/Server/Apache24&quot;ServerRoot &quot;${SRVROOT}&quot;ServerNameï¼ˆä¸»æœºåï¼‰ï¼šlocalhost:80ï¼Œå»æ‰#æ‰èƒ½è®©è®¾ç½®ç”Ÿæ•ˆ# If your host doesn&#39;t have a registered DNS name, enter its IP address here.##ServerName www.example.com:80æ”¹ä¸º# If your host doesn&#39;t have a registered DNS name, enter its IP address here.#ServerName localhost:80DocumentRootï¼ˆApacheé»˜è®¤çš„ç½‘é¡µç›®å½•ï¼‰ï¼šd:/Server/wwwåŸå…ˆé»˜è®¤çš„ç½‘é¡µç›®å½•æ˜¯d:\\Server\\Apache24\\htdocsï¼Œæˆ‘è¿™é‡Œæ›´æ”¹äº†ï¼Œæ–°å»ºäº†d:\\Server\\wwwæ–‡ä»¶å¤¹ä»¥å­˜æ”¾ç½‘é¡µï¼Œæ‰€ä»¥è¦æ›´æ”¹DocumentRootæŠŠd:\\Server\\Apache24\\htdocsä¸‹çš„index.htmlå¤åˆ¶åˆ°d:\\Server\\wwwä¸‹ï¼Œä»¥å¤‡åç»­æµ‹è¯•# DocumentRoot: The directory out of which you will serve your# documents. By default, all requests are taken from this directory, but# symbolic links and aliases may be used to point to other locations.#DocumentRoot &quot;${SRVROOT}/htdocs&quot;&amp;lt;Directory &quot;${SRVROOT}/htdocs&quot;&amp;gt;æ”¹ä¸º# DocumentRoot: The directory out of which you will serve your# documents. By default, all requests are taken from this directory, but# symbolic links and aliases may be used to point to other locations.#DocumentRoot &quot;d:/Server/www&quot;&amp;lt;Directory &quot;d:/Server/www&quot;&amp;gt;DirectoryIndexï¼ˆApacheé»˜è®¤çš„å…¥å£ç½‘é¡µï¼‰ï¼šè¿™é‡Œæ²¡åšæ›´æ”¹ï¼Œå°±ç”¨çš„é»˜è®¤çš„index.htmlæ²¡åšæ›´æ”¹&amp;lt;IfModule dir_module&amp;gt;    DirectoryIndex index.html&amp;lt;/IfModule&amp;gt;å¦‚æœè¦æ›´æ”¹ï¼Œå¯ä»¥æ”¹ä¸º&amp;lt;IfModule dir_module&amp;gt; DirectoryIndex index.php index.html index.htm&amp;lt;/IfModule&amp;gt;index.php index.html index.htmä¸‰ä¸ªæ–‡ä»¶æ˜¯æœ‰ä¼˜å…ˆå…³ç³»çš„ï¼Œä¾‹ï¼šè‹¥åŒæ—¶æœ‰index.php index.htmlï¼Œåˆ™é»˜è®¤è®¿é—®index.phpè‹¥åªæœ‰index.htmlï¼Œåˆ™é»˜è®¤è®¿é—®index.htmlScriptAliasï¼ˆæ²¡ç ”ç©¶è¿‡ï¼Œåæ­£æ˜¯ä¸ªè·¯å¾„ï¼‰ï¼šè¿™é‡Œæ²¡åšæ›´æ”¹ä¹‹å‰è®¾ç½®ServerRootçš„æ—¶å€™ï¼Œæ›´æ”¹è¿‡SRVROOTå˜é‡ä¸ºd:/Server/Apache24ï¼Œè€Œcgi-binæ˜¯Apache24ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™é‡Œåªè¦ç¬¦åˆcgi-binçš„è·¯å¾„å³å¯ã€‚æˆ‘å·²ç»ç¬¦åˆï¼Œæ•…ä¸ä¿®æ”¹ã€‚æ²¡åšæ›´æ”¹ScriptAlias /cgi-bin/ &quot;${SRVROOT}/cgi-bin/&quot;å¾€ä¸‹å‡ è¡Œè¿˜æœ‰è¿™ä¸ªï¼Œä¹Ÿæ²¡æ”¹&amp;lt;Directory &quot;${SRVROOT}/cgi-bin&quot;&amp;gt;    AllowOverride None    Options None    Require all granted&amp;lt;/Directory&amp;gt;æ¥ä¸‹æ¥åŒå‡»è¿è¡ŒD:\\Server\\Apache24\\bin\\httpd.exeï¼Œå‡ºç°äº†ä¸€ä¸ªæ²¡æœ‰ä»»ä½•è¾“å‡ºçš„é»‘çª—ä½“ï¼Œä¸”ä¸ä¼šé—ªé€€ã€‚è¿™å…¶å®æ„å‘³ç€æ‰“å¼€äº†ApacheæœåŠ¡å™¨ï¼Œä¸è¦å…³é—­é»‘çª—ä½“ï¼Œä¸‹é¢æµ‹è¯•ï¼šåœ¨è™šæ‹Ÿæœºä¸­æ‰“å¼€Google Chromeï¼Œåœ°å€æ è¾“å…¥localhostï¼Œå¯ä»¥è®¿é—®åˆ°å¦‚ä¸‹é¡µé¢åœ¨ç‰©ç†æœºçš„æµè§ˆå™¨ä¸­è¾“å…¥è™šæ‹ŸæœºIPåœ°å€ä¹Ÿå¯è®¿é—®åˆ°ç›¸åŒé¡µé¢ï¼ˆcmdé‡Œipconfigå‘½ä»¤å¯æŸ¥è¯¢IPï¼‰  è‹¥æ˜¯æ²¡åœ¨è™šæ‹Ÿæœºé‡Œå®‰è£…ï¼Œå…¨éƒ¨å®‰åœ¨ç‰©ç†æœºä¹Ÿä¸€æ ·ï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥localhostï¼Œå¯ä»¥è®¿é—®åˆ°ä¸Šè¿°é¡µé¢å‡ºç°It works!è¯´æ˜åº”è¯¥æ²¡ä»€ä¹ˆå¤§é—®é¢˜äº†ï¼Œå…³é—­é»‘çª—ä½“ï¼Œæ¥ä¸‹æ¥æŠŠhttpd.exeè£…åˆ°WindowsæœåŠ¡é‡Œã€‚æ‰“å¼€cmdï¼Œè¿›å…¥httpd.exeæ‰€åœ¨ç›®å½•ï¼Œè¾“å…¥httpd -k installå®‰è£…æœåŠ¡ã€‚  è‹¥æƒ³åˆ é™¤æœåŠ¡ï¼Œå¯ä»¥ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdç”¨sc delete Apache2.4å‘½ä»¤åˆ é™¤å®‰è£…æˆåŠŸåï¼Œåœ¨æ¡Œé¢çš„â€œè®¡ç®—æœºâ€ä¸Šå³é”®â€“ç®¡ç†â€“æœåŠ¡å’Œåº”ç”¨ç¨‹åºâ€“æœåŠ¡ï¼Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æœåŠ¡ï¼Œå…¶ä¸­å°±æœ‰Apache2.4æœåŠ¡ã€‚åœ¨è¯¥æœåŠ¡ä¸Šå³é”®-å±æ€§ï¼Œæœ‰ä¸€ä¸ªå¯åŠ¨ç±»å‹é€‰é¡¹ï¼Œé»˜è®¤æ˜¯è‡ªåŠ¨ï¼ˆå¼€æœºè‡ªå¯ï¼‰ï¼Œç”±äºåªæ˜¯å­¦ä¹ ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘æ”¹æˆäº†æ‰‹åŠ¨ï¼Œä»¥åå¯ä»¥åœ¨è¯¥æœåŠ¡ä¸Šå³é”®-å¯åŠ¨æ¥è‡ªè¡Œæ§åˆ¶å®ƒã€‚æ–¹ä¾¿èµ·è§ï¼Œæˆ‘å°†D:\\Server\\Apache24\\binä¸‹çš„ApacheMonitoræ·»åŠ åˆ°äº†å¼€å§‹èœå•ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªæ“æ§ApacheæœåŠ¡çš„å›¾å½¢åŒ–ç•Œé¢ï¼Œæ‰“å¼€ååœ¨ç”µè„‘å³ä¸‹è§’çš„å°å›¾æ ‡é‡Œæ‰¾åˆ°å®ƒï¼Œå³é”®-openï¼Œç•Œé¢å¦‚ä¸‹ï¼šPHPé…ç½®ä¸‹è½½å®‰è£…åŒ…https://windows.php.net/download#php-7.4ä¸‹è½½Thread Safeç‰ˆæœ¬ï¼Œå¦åˆ™åæœŸå¯èƒ½ç¼ºå°‘php7apache2_4.dllå°†zipå‹ç¼©åŒ…è§£å‹ä¸ºD:\\Server\\PHPåœ¨D:\\Server\\PHPä¸‹æœ‰è¿™æ ·ä¸¤ä¸ªæ–‡ä»¶ï¼šphp.ini-developmentå’Œphp.ini-productionä¸¤ä¸ªéƒ½æ˜¯PHPçš„é…ç½®æ–‡ä»¶ï¼Œhttps://www.php.net/manual/zh/migration53.ini.phpphp.ini-developmentåŒ…å«åœ¨å¼€å‘ç¯å¢ƒä¸­æ¨èä½¿ç”¨çš„è®¾ç½®php.ini-productionåŒ…å«åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¨èä½¿ç”¨çš„è®¾ç½®è¿™é‡Œä½¿ç”¨php.ini-productionï¼Œå¤åˆ¶æ›´åä¸ºphp.iniæ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œä»¥è®°äº‹æœ¬æ‰“å¼€å¼€å§‹é…ç½®extension_dirï¼ˆPHPæ‰©å±•åŒ…ç›®å½•ï¼‰ï¼š; On windows:;extension_dir = &quot;ext&quot;æ”¹ä¸º; On windows:extension_dir = &quot;ext&quot;  å¯¹äºä½ç‰ˆæœ¬çš„ PHPï¼Œè¿™é‡Œ extension_dir è¦å†™ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ï¼š  extension_dir = &quot;D:\\Development\\PHP_5.6.0\\ext&quot;ã€‚  å¯ä»¥é€šè¿‡ phpinfo éªŒè¯ä¸‹æ–‡ä¸­å¼€å¯çš„æ‰©å±•æ˜¯å¦æˆåŠŸå¼€å¯ï¼Œä»è€Œç¡®å®š extension_dir æ˜¯å¦ç”Ÿæ•ˆã€‚date.timezoneï¼ˆè®¾ç½®æ—¶åŒºï¼‰ï¼š;date.timezone =æ”¹ä¸ºdate.timezone = PRCdefault_charsetï¼ˆè®¾ç½®ç¼–ç ï¼‰ï¼šæ²¡æœ‰æ›´æ”¹ï¼Œå°±ç”¨é»˜è®¤çš„UTF-8default_charset = &quot;UTF-8&quot;å¼€å¯æ‰©å±•ï¼šç½‘ä¸Šæœäº†å‡ ä¸ªå¸¸ç”¨çš„æ‰©å±•ï¼Œå»æ‰åˆ†å·å¼€å¯ï¼ŒåŠŸèƒ½å¯æŸ¥å®˜æ–¹æ–‡æ¡£php_curl.dll                https://www.php.net/manual/zh/book.curl.phpphp_gd2.dll                https://www.php.net/manual/zh/book.image.phpphp_fileinfo.dll          https://www.php.net/manual/zh/book.fileinfo.phpphp_mbstring.dll      https://www.php.net/manual/zh/book.mbstring.phpphp_pdo_mysql.dll   https://www.php.net/manual/zh/ref.pdo-mysql.phpphp_mysqli.dll           https://www.php.net/manual/zh/book.mysqli.php;extension=curl;extension=gd2;extension=fileinfo;extension=mbstring;extension=pdo_mysql;extension=mysqliæ”¹ä¸ºextension=curlextension=gd2extension=fileinfoextension=mbstringextension=pdo_mysqlextension=mysqliä¸ºApacheæœåŠ¡æ·»åŠ PHPæ”¯æŒï¼šåœ¨æ­¤å‰çš„httpd.confæ–‡ä»¶çš„æœ€ä¸‹é¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š# php7 supportLoadModule php7_module &quot;D:/Server/PHP/php7apache2_4.dll&quot;AddType application/x-httpd-php .php .html .htm# configure the path to php.iniPHPIniDir &quot;D:/Server/PHP&quot;åœ¨D:\\Server\\wwwä¸‹æ–°å»ºindex.txtæ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹ä»£ç &amp;lt;?php    phpinfo();?&amp;gt;æ›´æ”¹æ‰©å±•åä¸º.phpï¼Œé‡å¯å…ˆå‰çš„ApacheæœåŠ¡ç”¨æµè§ˆå™¨è®¿é—®localhost/index.phpï¼Œå¯å¾—PHPè¯¦ç»†ä¿¡æ¯é¡µé¢è‡³æ­¤å°±åŸºæœ¬æ²¡æœ‰å¤§é—®é¢˜äº†ä¸‹é¢é…ç½®PHPç¯å¢ƒå˜é‡ï¼Œè¿™æ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨cmdé‡Œç›´æ¥ä½¿ç”¨PHPï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®è®¡ç®—æœºå³é”®-å±æ€§-é«˜çº§ç³»ç»Ÿè®¾ç½®-ç¯å¢ƒå˜é‡ï¼Œæ–°å»ºç³»ç»Ÿå˜é‡å†æ‰“å¼€Pathç³»ç»Ÿå˜é‡ï¼Œåœ¨åé¢åŠ ä¸Š%PHP_HOME%éšååœ¨cmdä¸­æµ‹è¯•ï¼Œè¾“å…¥php -versionï¼Œä¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯´æ˜é…ç½®æˆåŠŸMySQLé…ç½®ç›´æ¥ä¸‹è½½çš„ç¦»çº¿å®‰è£…åŒ…https://dev.mysql.com/downloads/installer/ï¼Œè·Ÿç€ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥ï¼Œæ„Ÿè§‰æ²¡å•¥ç‰¹æ®Šçš„é…ç½®æ–°å»ºMySQLæ–‡ä»¶å¤¹ï¼ŒD:\\Server\\MySQLé€‰æ‹©customè‡ªå®šä¹‰å®‰è£…ï¼Œæ ¹æ®éœ€è¦é€‰æ‹©ç›¸åº”ç»„ä»¶ï¼Œæˆ‘é€‰æ‹©è£…äº†MySQL Server 8.0ï¼›MySQL Shell 8.0ï¼›MySQL Notifier 1.1ï¼›MySQL Workbench 8.0 CEï¼›Connector ODBC 8.0ï¼›Connector C++ 8.0ï¼›Connector J 8.0ï¼›Connector NET 8.0ï¼›MySQL Documentation 8.0ï¼›åé¢å°±ä¸€ç›´â€œä¸‹ä¸€æ­¥â€ï¼Œé™¤äº†è®©ä½ è®¾ç½®å¯†ç çš„æ—¶å€™è¦è®¾ç½®ä¸€ä¸‹  MySQLå¸è½½å¯èƒ½æœ‰ç‚¹éº»çƒ¦ï¼Œè¿™é‡Œä¸èµ˜è¿°ï¼Œæœ€å¥½ä¸€éæˆåŠŸï¼Œä¸‹é¢æ˜¯é‡åˆ°çš„ä¸€äº›å‘ï¼š      å®‰è£…ç»„ä»¶æ—¶ï¼Œå³ä¸‹è§’æœ‰ä¸ªAdvanced Optionsé€‰é¡¹ï¼Œå¾ˆå®¹æ˜“å¿½ç•¥ï¼Œé‡Œé¢å¯ä»¥è®¾ç½®è‡ªå®šä¹‰å®‰è£…è·¯å¾„ï¼Œä¸”æ¯ä¸ªç»„ä»¶éƒ½è¦å•ç‹¬è®¾ç½®ä¸€éï¼Œä¸æ¸…æ¥šçš„å¯ä»¥çœ‹è¿™ä¸ªhttps://blog.csdn.net/qq_40764966/article/details/96702490    å®‰è£…å‰ç¡®ä¿ç£ç›˜ç©ºé—´è¶³å¤Ÿï¼Œå› ä¸ºæˆ‘æ˜¯åœ¨è™šæ‹Ÿæœºé‡Œå®‰è£…ï¼Œä¸€å¼€å§‹åˆé”™è£…åˆ°äº†Cç›˜ï¼Œç¢°å·§Cç›˜å‰©ä½™1Gä¸åˆ°ï¼Œæ‰€ä»¥æç¤ºFailäº†  æ­£å¸¸å®‰è£…å®Œåï¼Œåœ¨è®¡ç®—æœºå³é”®-ç®¡ç†-æœåŠ¡ä¸­å¯ä»¥çœ‹åˆ°åä¸ºMySQL80çš„æœåŠ¡ï¼Œå¯ä»¥é€‰æ‹©è®¾ä¸ºæ‰‹åŠ¨å¯åŠ¨å¦å¤–ï¼ŒMySQLNotifierå°±æ˜¯ä¸€ä¸ªè·ŸApacheMonitorå·®ä¸å¤šçš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ƒå¼€å¯æœåŠ¡ä¸‹é¢æµ‹è¯•ï¼šåœ¨D:\\Server\\wwwä¸‹æ–°å»ºtestmysql.txtæ–‡ä»¶ï¼Œå†™ä¸Šå¦‚ä¸‹ä»£ç ï¼š&amp;lt;?php    $conn=mysqli_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;rootå¯†ç &quot;);    if($conn)        echo &quot;è¿æ¥success&quot;;    else        echo &quot;è¿æ¥fail&quot;;?&amp;gt;å°†txtæ–‡ä»¶å¦å­˜ä¸ºUTF-8ç¼–ç çš„æ–‡ä»¶ï¼ˆè¦ä¸PHPè®¾ç½®çš„é»˜è®¤ç¼–ç ä¸€è‡´ï¼Œå¦åˆ™ä¸­æ–‡ä¼šä¹±ç ï¼‰æ›´æ”¹æ‰©å±•åä¸º.phpï¼Œå¯åŠ¨ApacheæœåŠ¡å’ŒMySQLæœåŠ¡ï¼Œæµè§ˆå™¨localhost/testmysql.phpè®¿é—®å¯å¾—æµ‹è¯•æˆåŠŸï¼Œè‡³æ­¤ç¯å¢ƒå°±æ­å»ºå®Œäº†ä¸‹é¢é…ç½®MySQLç¯å¢ƒå˜é‡ï¼Œè¿™æ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨cmdé‡Œç›´æ¥ä½¿ç”¨MySQLï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®æ–°å»ºç³»ç»Ÿå˜é‡MYSQL_HOMEåœ¨Pathä¸­æ·»åŠ %MYSQL_HOME%\\MySQL Server 8.0\\binå¼€å¯MySQLæœåŠ¡ï¼Œåœ¨cmdä¸­è¾“å…¥mysql -h localhost -u root -pï¼Œè¾“å…¥å¯†ç ï¼Œè‹¥èƒ½æˆåŠŸç™»å½•ï¼Œè¯´æ˜é…ç½®æˆåŠŸ"
  }
  
]

